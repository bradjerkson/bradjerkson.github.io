function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.PIXI=e()}}(function(){var e;return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[s]={exports:{}};e[s][0].call(h.exports,function(t){var r=e[s][1][t];return i(r?r:t)},h,h.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,r,n){(function(t,n){!function(){function i(){}function o(e){return e}function s(e){return!!e}function a(e){return!e}function u(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function l(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}function h(e){return U(e)||"number"==typeof e.length&&e.length>=0&&e.length%1===0}function c(e,t){for(var r=-1,n=e.length;++r<n;)t(e[r],r,e)}function d(e,t){for(var r=-1,n=e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function p(e){return d(Array(e),function(e,t){return t})}function f(e,t,r){return c(e,function(e,n,i){r=t(r,e,n,i)}),r}function g(e,t){c(X(e),function(r){t(e[r],r)})}function v(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}function m(e){var t,r,n=-1;return h(e)?(t=e.length,function(){return n++,t>n?n:null}):(r=X(e),t=r.length,function(){return n++,t>n?r[n]:null})}function y(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;r>i;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n)}}}function x(e){return function(t,r,n){return e(t,n)}}function b(e){return function(t,r,n){n=l(n||i),t=t||[];var o=m(t);if(0>=e)return n(null);var s=!1,a=0,h=!1;!function c(){if(s&&0>=a)return n(null);for(;e>a&&!h;){var i=o();if(null===i)return s=!0,void(0>=a&&n(null));a+=1,r(t[i],i,u(function(e){a-=1,e?(n(e),h=!0):c()}))}}()}}function _(e){return function(t,r,n){return e(N.eachOf,t,r,n)}}function w(e){return function(t,r,n,i){return e(b(r),t,n,i)}}function T(e){return function(t,r,n){return e(N.eachOfSeries,t,r,n)}}function E(e,t,r,n){n=l(n||i),t=t||[];var o=h(t)?[]:{};e(t,function(e,t,n){r(e,function(e,r){o[t]=r,n(e)})},function(e){n(e,o)})}function S(e,t,r,n){var i=[];e(t,function(e,t,n){r(e,function(r){r&&i.push({index:t,value:e}),n()})},function(){n(d(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function C(e,t,r,n){S(e,t,function(e,t){r(e,function(e){t(!e)})},n)}function A(e,t,r){return function(n,i,o,s){function a(){s&&s(r(!1,void 0))}function u(e,n,i){return s?void o(e,function(n){s&&t(n)&&(s(r(!0,e)),s=o=!1),i()}):i()}arguments.length>3?e(n,i,u,a):(s=o,o=i,e(n,u,a))}}function M(e,t){return t}function O(e,t,r){r=r||i;var n=h(t)?[]:{};e(t,function(e,t,r){e(y(function(e,i){i.length<=1&&(i=i[0]),n[t]=i,r(e)}))},function(e){r(e,n)})}function R(e,t,r,n){var i=[];e(t,function(e,t,n){r(e,function(e,t){i=i.concat(t||[]),n(e)})},function(e){n(e,i)})}function P(e,t,r){function n(e,t,r,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");return e.started=!0,U(t)||(t=[t]),0===t.length&&e.idle()?N.setImmediate(function(){e.drain()}):(c(t,function(t){var o={data:t,callback:n||i};r?e.tasks.unshift(o):e.tasks.push(o),e.tasks.length===e.concurrency&&e.saturated()}),void N.setImmediate(e.process))}function o(e,t){return function(){s-=1;var r=!1,n=arguments;c(t,function(e){c(a,function(t,n){t!==e||r||(a.splice(n,1),r=!0)}),e.callback.apply(e,n)}),e.tasks.length+s===0&&e.drain(),e.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var s=0,a=[],l={tasks:[],concurrency:t,payload:r,saturated:i,empty:i,drain:i,started:!1,paused:!1,push:function(e,t){n(l,e,!1,t)},kill:function(){l.drain=i,l.tasks=[]},unshift:function(e,t){n(l,e,!0,t)},process:function(){if(!l.paused&&s<l.concurrency&&l.tasks.length)for(;s<l.concurrency&&l.tasks.length;){var t=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),r=d(t,function(e){return e.data});0===l.tasks.length&&l.empty(),s+=1,a.push(t[0]);var n=u(o(l,t));e(r,n)}},length:function(){return l.tasks.length},running:function(){return s},workersList:function(){return a},idle:function(){return l.tasks.length+s===0},pause:function(){l.paused=!0},resume:function(){if(l.paused!==!1){l.paused=!1;for(var e=Math.min(l.concurrency,l.tasks.length),t=1;e>=t;t++)N.setImmediate(l.process)}}};return l}function D(e){return y(function(t,r){t.apply(null,r.concat([y(function(t,r){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&c(r,function(t){console[e](t)}))})]))})}function F(e){return function(t,r,n){e(p(t),r,n)}}function B(e){return y(function(t,r){var n=y(function(r){var n=this,i=r.pop();return e(t,function(e,t,i){e.apply(n,r.concat([i]))},i)});return r.length?n.apply(this,r):n})}function L(e){return y(function(t){var r=t.pop();t.push(function(){var e=arguments;n?N.setImmediate(function(){r.apply(null,e)}):r.apply(null,e)});var n=!0;e.apply(this,t),n=!1})}var k,N={},I="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;null!=I&&(k=I.async),N.noConflict=function(){return I.async=k,N};var j=Object.prototype.toString,U=Array.isArray||function(e){return"[object Array]"===j.call(e)},H=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},X=Object.keys||function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t},W="function"==typeof setImmediate&&setImmediate,Y=W?function(e){W(e)}:function(e){setTimeout(e,0)};"object"==typeof t&&"function"==typeof t.nextTick?N.nextTick=t.nextTick:N.nextTick=Y,N.setImmediate=W?Y:N.nextTick,N.forEach=N.each=function(e,t,r){return N.eachOf(e,x(t),r)},N.forEachSeries=N.eachSeries=function(e,t,r){return N.eachOfSeries(e,x(t),r)},N.forEachLimit=N.eachLimit=function(e,t,r,n){return b(t)(e,x(r),n)},N.forEachOf=N.eachOf=function(e,t,r){function n(e){a--,e?r(e):null===o&&0>=a&&r(null)}r=l(r||i),e=e||[];for(var o,s=m(e),a=0;null!=(o=s());)a+=1,t(e[o],o,u(n));0===a&&r(null)},N.forEachOfSeries=N.eachOfSeries=function(e,t,r){function n(){var i=!0;return null===s?r(null):(t(e[s],s,u(function(e){if(e)r(e);else{if(s=o(),null===s)return r(null);i?N.setImmediate(n):n()}})),void(i=!1))}r=l(r||i),e=e||[];var o=m(e),s=o();n()},N.forEachOfLimit=N.eachOfLimit=function(e,t,r,n){b(t)(e,r,n)},N.map=_(E),N.mapSeries=T(E),N.mapLimit=w(E),N.inject=N.foldl=N.reduce=function(e,t,r,n){N.eachOfSeries(e,function(e,n,i){r(t,e,function(e,r){t=r,i(e)})},function(e){n(e,t)})},N.foldr=N.reduceRight=function(e,t,r,n){var i=d(e,o).reverse();N.reduce(i,t,r,n)},N.transform=function(e,t,r,n){3===arguments.length&&(n=r,r=t,t=U(e)?[]:{}),N.eachOf(e,function(e,n,i){r(t,e,n,i)},function(e){n(e,t)})},N.select=N.filter=_(S),N.selectLimit=N.filterLimit=w(S),N.selectSeries=N.filterSeries=T(S),N.reject=_(C),N.rejectLimit=w(C),N.rejectSeries=T(C),N.any=N.some=A(N.eachOf,s,o),N.someLimit=A(N.eachOfLimit,s,o),N.all=N.every=A(N.eachOf,a,a),N.everyLimit=A(N.eachOfLimit,a,a),N.detect=A(N.eachOf,o,M),N.detectSeries=A(N.eachOfSeries,o,M),N.detectLimit=A(N.eachOfLimit,o,M),N.sortBy=function(e,t,r){function n(e,t){var r=e.criteria,n=t.criteria;return n>r?-1:r>n?1:0}N.map(e,function(e,r){t(e,function(t,n){t?r(t):r(null,{value:e,criteria:n})})},function(e,t){return e?r(e):void r(null,d(t.sort(n),function(e){return e.value}))})},N.auto=function(e,t,r){function n(e){p.unshift(e)}function o(e){var t=v(p,e);t>=0&&p.splice(t,1)}function s(){u--,c(p.slice(0),function(e){e()})}r||(r=t,t=null),r=l(r||i);var a=X(e),u=a.length;if(!u)return r(null);t||(t=u);var h={},d=0,p=[];n(function(){u||r(null,h)}),c(a,function(i){function a(){return t>d&&f(m,function(e,t){return e&&h.hasOwnProperty(t)},!0)&&!h.hasOwnProperty(i)}function u(){a()&&(d++,o(u),c[c.length-1](p,h))}for(var l,c=U(e[i])?e[i]:[e[i]],p=y(function(e,t){if(d--,t.length<=1&&(t=t[0]),e){var n={};g(h,function(e,t){n[t]=e}),n[i]=t,r(e,n)}else h[i]=t,N.setImmediate(s)}),m=c.slice(0,c.length-1),x=m.length;x--;){if(!(l=e[m[x]]))throw new Error("Has inexistant dependency");if(U(l)&&v(l,i)>=0)throw new Error("Has cyclic dependencies")}a()?(d++,c[c.length-1](p,h)):n(u)})},N.retry=function(e,t,r){function n(e,t){if("number"==typeof t)e.times=parseInt(t,10)||o;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||o,e.interval=parseInt(t.interval,10)||s}}function i(e,t){function r(e,r){return function(n){e(function(e,t){n(!e||r,{err:e,result:t})},t)}}function n(e){return function(t){setTimeout(function(){t(null)},e)}}for(;u.times;){var i=!(u.times-=1);a.push(r(u.task,i)),!i&&u.interval>0&&a.push(n(u.interval))}N.series(a,function(t,r){r=r[r.length-1],(e||u.callback)(r.err,r.result)})}var o=5,s=0,a=[],u={times:o,interval:s},l=arguments.length;if(1>l||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=l&&"function"==typeof e&&(r=t,t=e),"function"!=typeof e&&n(u,e),u.callback=r,u.task=t,u.callback?i():i},N.waterfall=function(e,t){function r(e){return y(function(n,i){if(n)t.apply(null,[n].concat(i));else{var o=e.next();o?i.push(r(o)):i.push(t),L(e).apply(null,i)}})}if(t=l(t||i),!U(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}return e.length?void r(N.iterator(e))():t()},N.parallel=function(e,t){O(N.eachOf,e,t)},N.parallelLimit=function(e,t,r){O(b(t),e,r)},N.series=function(e,t){O(N.eachOfSeries,e,t)},N.iterator=function(e){function t(r){function n(){return e.length&&e[r].apply(null,arguments),n.next()}return n.next=function(){return r<e.length-1?t(r+1):null},n}return t(0)},N.apply=y(function(e,t){return y(function(r){return e.apply(null,t.concat(r))})}),N.concat=_(R),N.concatSeries=T(R),N.whilst=function(e,t,r){if(r=r||i,e()){var n=y(function(i,o){i?r(i):e.apply(this,o)?t(n):r(null)});t(n)}else r(null)},N.doWhilst=function(e,t,r){var n=0;return N.whilst(function(){return++n<=1||t.apply(this,arguments)},e,r)},N.until=function(e,t,r){return N.whilst(function(){return!e.apply(this,arguments)},t,r)},N.doUntil=function(e,t,r){return N.doWhilst(e,function(){return!t.apply(this,arguments)},r)},N.during=function(e,t,r){r=r||i;var n=y(function(t,n){t?r(t):(n.push(o),e.apply(this,n))}),o=function(e,i){e?r(e):i?t(n):r(null)};e(o)},N.doDuring=function(e,t,r){var n=0;N.during(function(e){n++<1?e(null,!0):t.apply(this,arguments)},e,r)},N.queue=function(e,t){var r=P(function(t,r){e(t[0],r)},t,1);return r},N.priorityQueue=function(e,t){function r(e,t){return e.priority-t.priority}function n(e,t,r){for(var n=-1,i=e.length-1;i>n;){var o=n+(i-n+1>>>1);r(t,e[o])>=0?n=o:i=o-1}return n}function o(e,t,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");return e.started=!0,U(t)||(t=[t]),0===t.length?N.setImmediate(function(){e.drain()}):void c(t,function(t){var a={data:t,priority:o,callback:"function"==typeof s?s:i};e.tasks.splice(n(e.tasks,a,r)+1,0,a),e.tasks.length===e.concurrency&&e.saturated(),N.setImmediate(e.process)})}var s=N.queue(e,t);return s.push=function(e,t,r){o(s,e,t,r)},delete s.unshift,s},N.cargo=function(e,t){return P(e,1,t)},N.log=D("log"),N.dir=D("dir"),N.memoize=function(e,t){var r={},n={};t=t||o;var i=y(function(i){var o=i.pop(),s=t.apply(null,i);s in r?N.setImmediate(function(){o.apply(null,r[s])}):s in n?n[s].push(o):(n[s]=[o],e.apply(null,i.concat([y(function(e){r[s]=e;var t=n[s];delete n[s];for(var i=0,o=t.length;o>i;i++)t[i].apply(null,e)})])))});return i.memo=r,i.unmemoized=e,i},N.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},N.times=F(N.map),N.timesSeries=F(N.mapSeries),N.timesLimit=function(e,t,r,n){return N.mapLimit(p(e),t,r,n)},N.seq=function(){var e=arguments;return y(function(t){var r=this,n=t[t.length-1];"function"==typeof n?t.pop():n=i,N.reduce(e,t,function(e,t,n){t.apply(r,e.concat([y(function(e,t){n(e,t)})]))},function(e,t){n.apply(r,[e].concat(t))})})},N.compose=function(){return N.seq.apply(null,Array.prototype.reverse.call(arguments))},N.applyEach=B(N.eachOf),N.applyEachSeries=B(N.eachOfSeries),N.forever=function(e,t){function r(e){return e?n(e):void o(r)}var n=u(t||i),o=L(e);r()},N.ensureAsync=L,N.constant=y(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),N.wrapSync=N.asyncify=function(e){return y(function(t){var r,n=t.pop();try{r=e.apply(this,t)}catch(i){return n(i)}H(r)&&"function"==typeof r.then?r.then(function(e){n(null,e)})["catch"](function(e){n(e.message?e:new Error(e))}):n(null,r)})},"object"==typeof r&&r.exports?r.exports=N:"function"==typeof e&&e.amd?e([],function(){return N}):I.async=N}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,i="/"===s.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(e){var i=r.isAbsolute(e),o="/"===s(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=n(e.split("/")),o=n(t.split("/")),s=Math.min(i.length,o.length),a=s,u=0;s>u;u++)if(i[u]!==o[u]){a=u;break}for(var l=[],u=a;u<i.length;u++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return 0>t&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:3}],3:[function(e,t,r){function n(){h=!1,a.length?l=a.concat(l):c=-1,l.length&&i()}function i(){if(!h){var e=setTimeout(n);h=!0;for(var t=l.length;t;){for(a=l,l=[];++c<t;)a&&a[c].run();c=-1,t=l.length}a=null,h=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,u=t.exports={},l=[],h=!1,c=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new o(e,t)),1!==l.length||h||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],4:[function(t,r,n){(function(t){!function(i){function o(e){throw RangeError(B[e])}function s(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function a(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(F,".");var i=e.split("."),o=s(i,t).join(".");return n+o}function u(e){for(var t,r,n=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function l(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=N(e>>>10&1023|55296),e=56320|1023&e),t+=N(e)}).join("")}function h(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:T}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,r){var n=0;for(e=r?k(e/A):e>>1,e+=k(e/t);e>L*S>>1;n+=T)e=k(e/L);return k(n+(L+1)*e/(e+C))}function p(e){var t,r,n,i,s,a,u,c,p,f,g=[],v=e.length,m=0,y=O,x=M;for(r=e.lastIndexOf(R),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)>=128&&o("not-basic"),g.push(e.charCodeAt(n));for(i=r>0?r+1:0;v>i;){for(s=m,a=1,u=T;i>=v&&o("invalid-input"),c=h(e.charCodeAt(i++)),(c>=T||c>k((w-m)/a))&&o("overflow"),m+=c*a,p=x>=u?E:u>=x+S?S:u-x,!(p>c);u+=T)f=T-p,a>k(w/f)&&o("overflow"),a*=f;t=g.length+1,x=d(m-s,t,0==s),k(m/t)>w-y&&o("overflow"),y+=k(m/t),m%=t,g.splice(m++,0,y)}return l(g)}function f(e){var t,r,n,i,s,a,l,h,p,f,g,v,m,y,x,b=[];for(e=u(e),v=e.length,t=O,r=0,s=M,a=0;v>a;++a)g=e[a],128>g&&b.push(N(g));for(n=i=b.length,i&&b.push(R);v>n;){for(l=w,a=0;v>a;++a)g=e[a],g>=t&&l>g&&(l=g);for(m=n+1,l-t>k((w-r)/m)&&o("overflow"),r+=(l-t)*m,t=l,a=0;v>a;++a)if(g=e[a],t>g&&++r>w&&o("overflow"),g==t){for(h=r,p=T;f=s>=p?E:p>=s+S?S:p-s,!(f>h);p+=T)x=h-f,y=T-f,b.push(N(c(f+x%y,0))),h=k(x/y);b.push(N(c(h,0))),s=d(r,m,n==i),r=0,++n}++r,++t}return b.join("")}function g(e){return a(e,function(e){return P.test(e)?p(e.slice(4).toLowerCase()):e})}function v(e){return a(e,function(e){return D.test(e)?"xn--"+f(e):e})}var m="object"==typeof n&&n&&!n.nodeType&&n,y="object"==typeof r&&r&&!r.nodeType&&r,x="object"==typeof t&&t;(x.global===x||x.window===x||x.self===x)&&(i=x);var b,_,w=2147483647,T=36,E=1,S=26,C=38,A=700,M=72,O=128,R="-",P=/^xn--/,D=/[^\x20-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=T-E,k=Math.floor,N=String.fromCharCode;if(b={version:"1.3.2",ucs2:{decode:u,encode:l},decode:p,encode:f,toASCII:v,toUnicode:g},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return b});else if(m&&y)if(r.exports==m)y.exports=b;else for(_ in b)b.hasOwnProperty(_)&&(m[_]=b[_]);else i.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var h=0;l>h;++h){var c,d,p,f,g=e[h].replace(a,"%20"),v=g.indexOf(r);v>=0?(c=g.substr(0,v),d=g.substr(v+1)):(c=g,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),n(s,p)?i(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],6:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var a=encodeURIComponent(i(s))+r;return o(e[s])?n(e[s],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[s]))}).join(t):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],7:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":5,"./encode":6}],8:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&l(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return u(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}function u(e){return"string"==typeof e}function l(e){return"object"==typeof e&&null!==e}function h(e){return null===e}function c(e){return null==e}var d=e("punycode");r.parse=i,r.resolve=s,r.resolveObject=a,r.format=o,r.Url=n;var p=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(g),m=["'"].concat(v),y=["%","/","?",";","#"].concat(m),x=["/","?","#"],b=255,_=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,T={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=e("querystring");n.prototype.parse=function(e,t,r){if(!u(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var i=p.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===n.substr(0,2);!s||i&&E[i]||(n=n.substr(2),this.slashes=!0)}if(!E[i]&&(s||i&&!S[i])){for(var a=-1,l=0;l<x.length;l++){var h=n.indexOf(x[l]);-1!==h&&(-1===a||a>h)&&(a=h)}var c,f;f=-1===a?n.lastIndexOf("@"):n.lastIndexOf("@",a),-1!==f&&(c=n.slice(0,f),n=n.slice(f+1),this.auth=decodeURIComponent(c)),a=-1;for(var l=0;l<y.length;l++){var h=n.indexOf(y[l]);-1!==h&&(-1===a||a>h)&&(a=h)}-1===a&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),l=0,A=v.length;A>l;l++){var M=v[l];if(M&&!M.match(_)){for(var O="",R=0,P=M.length;P>R;R++)O+=M.charCodeAt(R)>127?"x":M[R];if(!O.match(_)){var D=v.slice(0,l),F=v.slice(l+1),B=M.match(w);B&&(D.push(B[1]),F.unshift(B[2])),F.length&&(n="/"+F.join(".")+n),this.hostname=D.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var L=this.hostname.split("."),k=[],l=0;l<L.length;++l){var N=L[l];k.push(N.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(N):N)}this.hostname=k.join(".")}var I=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+I,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!T[o])for(var l=0,A=m.length;A>l;l++){var U=m[l],H=encodeURIComponent(U);H===U&&(H=escape(U)),n=n.split(U).join(H)}var X=n.indexOf("#");-1!==X&&(this.hash=n.substr(X),n=n.slice(0,X));var W=n.indexOf("?");if(-1!==W?(this.search=n.substr(W),this.query=n.substr(W+1),t&&(this.query=C.parse(this.query)),n=n.slice(0,W)):t&&(this.search="",this.query={}),n&&(this.pathname=n),S[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",N=this.search||"";this.path=I+N}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(o=C.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(u(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),S[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!S[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||E[e.protocol])r.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var o=r.pathname||"",s=r.search||"";r.path=o+s}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),l=e.host||e.pathname&&"/"===e.pathname.charAt(0),d=l||a||r.host&&e.pathname,p=d,f=r.pathname&&r.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],g=r.protocol&&!S[r.protocol];if(g&&(r.hostname="",r.port=null,r.host&&(""===f[0]?f[0]=r.host:f.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),d=d&&(""===i[0]||""===f[0])),l)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,f=i;else if(i.length)f||(f=[]),f.pop(),f=f.concat(i),r.search=e.search,r.query=e.query;else if(!c(e.search)){if(g){r.hostname=r.host=f.shift();var v=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;v&&(r.auth=v.shift(),r.host=r.hostname=v.shift())}return r.search=e.search,r.query=e.query,h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!f.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var m=f.slice(-1)[0],y=(r.host||e.host)&&("."===m||".."===m)||""===m,x=0,b=f.length;b>=0;b--)m=f[b],"."==m?f.splice(b,1):".."===m?(f.splice(b,1),x++):x&&(f.splice(b,1),x--);if(!d&&!p)for(;x--;x)f.unshift("..");!d||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),y&&"/"!==f.join("/").substr(-1)&&f.push("");var _=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(g){r.hostname=r.host=_?"":f.length?f.shift():"";var v=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;v&&(r.auth=v.shift(),r.host=r.hostname=v.shift())}return d=d||r.host&&f.length,d&&!_&&f.unshift(""),f.length?r.pathname=f.join("/"):(r.pathname=null,r.path=null),h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:4,querystring:7}],9:[function(e,t,r){"use strict";function n(e,t,r){r=r||2;var n=t&&t.length,o=n?t[0]*r:e.length,a=i(e,0,o,r,!0),u=[];if(!a)return u;var l,h,d,p,f,g,v;if(n&&(a=c(e,t,a,r)),e.length>80*r){l=d=e[0],h=p=e[1];for(var m=r;o>m;m+=r)f=e[m],g=e[m+1],l>f&&(l=f),h>g&&(h=g),f>d&&(d=f),g>p&&(p=g);v=Math.max(d-l,p-h)}return s(a,u,r,l,h,v),u}function i(e,t,r,n,i){var o,s,a,u=0;for(o=t,s=r-n;r>o;o+=n)u+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;if(i===u>0)for(o=t;r>o;o+=n)a=M(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=M(o,e[o],e[o+1],a);return a}function o(e,t){if(!e)return e;t||(t=e);var r,n=e;do if(r=!1,n.steiner||!w(n,n.next)&&0!==_(n.prev,n,n.next))n=n.next;else{if(O(n),n=t=n.prev,n===n.next)return null;r=!0}while(r||n!==t);return t}function s(e,t,r,n,i,c,d){if(e){!d&&c&&g(e,n,i,c);for(var p,f,v=e;e.prev!==e.next;)if(p=e.prev,f=e.next,c?u(e,n,i,c):a(e))t.push(p.i/r),t.push(e.i/r),t.push(f.i/r),O(e),e=f.next,v=f.next;else if(e=f,e===v){d?1===d?(e=l(e,t,r),s(e,t,r,n,i,c,2)):2===d&&h(e,t,r,n,i,c):s(o(e),t,r,n,i,c,1);break}}}function a(e){var t=e.prev,r=e,n=e.next;if(_(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(x(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&_(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,r,n){var i=e.prev,o=e,s=e.next;if(_(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,h=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=m(a,u,t,r,n),d=m(l,h,t,r,n),p=e.nextZ;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&x(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=c;){if(p!==e.prev&&p!==e.next&&x(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function l(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;T(i,n,n.next,o)&&S(i,o)&&S(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),O(n),O(n.next),n=e=o),n=n.next}while(n!==e);return n}function h(e,t,r,n,i,a){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var h=A(u,l);return u=o(u,u.next),h=o(h,h.next),s(u,t,r,n,i,a),void s(h,t,r,n,i,a)}l=l.next}u=u.next}while(u!==e)}function c(e,t,r,n){var s,a,u,l,h,c=[];for(s=0,a=t.length;a>s;s++)u=t[s]*n,l=a-1>s?t[s+1]*n:e.length,h=i(e,u,l,n,!1),h===h.next&&(h.steiner=!0),c.push(y(h));for(c.sort(d),s=0;s<c.length;s++)p(c[s],r),r=o(r,r.next);return r}function d(e,t){return e.x-t.x}function p(e,t){if(t=f(e,t)){var r=A(t,e);o(r,r.next)}}function f(e,t){var r,n=t,i=e.x,o=e.y,s=-(1/0);do{if(o<=n.y&&o>=n.next.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);i>=a&&a>s&&(s=a,r=n.x<n.next.x?n:n.next)}n=n.next}while(n!==t);if(!r)return null;var u,l=r,h=1/0;for(n=r.next;n!==l;)i>=n.x&&n.x>=r.x&&x(o<r.y?i:s,o,r.x,r.y,o<r.y?s:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),(h>u||u===h&&n.x>r.x)&&S(n,e)&&(r=n,h=u)),n=n.next;return r}function g(e,t,r,n){var i=e;do null===i.z&&(i.z=m(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,v(i)}function v(e){var t,r,n,i,o,s,a,u,l=1;do{for(r=e,e=null,o=null,s=0;r;){for(s++,n=r,a=0,t=0;l>t&&(a++,n=n.nextZ,n);t++);for(u=l;a>0||u>0&&n;)0===a?(i=n,n=n.nextZ,u--):0!==u&&n?r.z<=n.z?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,a--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(s>1);return e}function m(e,t,r,n,i){return e=32767*(e-r)/i,t=32767*(t-n)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),
t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function y(e){var t=e,r=e;do t.x<r.x&&(r=t),t=t.next;while(t!==e);return r}function x(e,t,r,n,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(n-a)-(r-s)*(t-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function b(e,t){return w(e,t)||e.next.i!==t.i&&e.prev.i!==t.i&&!E(e,t)&&S(e,t)&&S(t,e)&&C(e,t)}function _(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function T(e,t,r,n){return _(e,t,r)>0!=_(e,t,n)>0&&_(r,n,e)>0!=_(r,n,t)>0}function E(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&T(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function S(e,t){return _(e.prev,e,e.next)<0?_(e,t,e.next)>=0&&_(e,e.prev,t)>=0:_(e,t,e.prev)<0||_(e,e.next,t)<0}function C(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function A(e,t){var r=new R(e.i,e.x,e.y),n=new R(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function M(e,t,r,n){var i=new R(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function O(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function R(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}t.exports=n},{}],10:[function(e,t,r){"use strict";function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(){}var o="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.listeners=function(e,t){var r=o?o+e:e,n=this._events&&this._events[r];if(t)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);s>i;i++)a[i]=n[i].fn;return a},i.prototype.emit=function(e,t,r,n,i,s){var a=o?o+e:e;if(!this._events||!this._events[a])return!1;var u,l,h=this._events[a],c=arguments.length;if("function"==typeof h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,r),!0;case 4:return h.fn.call(h.context,t,r,n),!0;case 5:return h.fn.call(h.context,t,r,n,i),!0;case 6:return h.fn.call(h.context,t,r,n,i,s),!0}for(l=1,u=new Array(c-1);c>l;l++)u[l-1]=arguments[l];h.fn.apply(h.context,u)}else{var d,p=h.length;for(l=0;p>l;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),c){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,r);break;default:if(!u)for(d=1,u=new Array(c-1);c>d;d++)u[d-1]=arguments[d];h[l].fn.apply(h[l].context,u)}}return!0},i.prototype.on=function(e,t,r){var i=new n(t,r||this),s=o?o+e:e;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.once=function(e,t,r){var i=new n(t,r||this,!0),s=o?o+e:e;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.removeListener=function(e,t,r,n){var i=o?o+e:e;if(!this._events||!this._events[i])return this;var s=this._events[i],a=[];if(t)if(s.fn)(s.fn!==t||n&&!s.once||r&&s.context!==r)&&a.push(s);else for(var u=0,l=s.length;l>u;u++)(s[u].fn!==t||n&&!s[u].once||r&&s[u].context!==r)&&a.push(s[u]);return a.length?this._events[i]=1===a.length?a[0]:a:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[o?o+e:e]:this._events=o?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=o,"undefined"!=typeof t&&(t.exports=i)},{}],11:[function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(e,t){for(var r,s,a=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var l in r)i.call(r,l)&&(a[l]=r[l]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(r);for(var h=0;h<s.length;h++)o.call(r,s[h])&&(a[s[h]]=r[s[h]])}}return a}},{}],12:[function(e,t,r){t.exports={name:"pixi.js",version:"3.0.9",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/pixijs/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/pixijs/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:["bin/","src/","CONTRIBUTING.md","LICENSE","package.json","README.md"],dependencies:{async:"^1.5.0",brfs:"^1.4.1",earcut:"^2.0.7",eventemitter3:"^1.1.1","object-assign":"^4.0.1","resource-loader":"^1.6.4"},devDependencies:{browserify:"^11.1.0",chai:"^3.2.0",del:"^2.0.2",gulp:"^3.9.0","gulp-cached":"^1.1.0","gulp-concat":"^2.6.0","gulp-debug":"^2.1.0","gulp-header":"^1.7.1","gulp-jshint":"^1.11.2","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.4.1","gulp-util":"^3.0.6","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.2","jshint-summary":"^0.4.0",minimist:"^1.2.0",mocha:"^2.3.2","require-dir":"^0.3.0","run-sequence":"^1.1.2",testem:"^0.9.4","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.4.0"},browserify:{transform:["brfs"]}}},{}],13:[function(e,t,r){function n(e){var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.zIndex=2,this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var i=e("../core");Object.assign(i.DisplayObject.prototype,e("./accessibleTarget")),n.prototype.constructor=n,t.exports=n,n.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))},n.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,r=t.length-1;r>=0;r--)this.updateAccessibleObjects(t[r])}},n.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,r=e.height/this.renderer.height,n=this.div;n.style.left=e.left+"px",n.style.top=e.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,i.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{n=s._accessibleDiv;var a=s.hitArea,u=s.worldTransform;s.hitArea?(n.style.left=(u.tx+a.x*u.a)*t+"px",n.style.top=(u.ty+a.y*u.d)*r+"px",n.style.width=a.width*u.a*t+"px",n.style.height=a.height*u.d*r+"px"):(a=s.getBounds(),this.capHitArea(a),n.style.left=a.x*t+"px",n.style.top=a.y*r+"px",n.style.width=a.width*t+"px",n.style.height=a.height*r+"px")}}this.renderId++},n.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},n.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2,t.style.borderStyle="none",t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.title=e.accessibleTitle||"displayObject "+this.tabIndex,e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},n.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},n.prototype._onFocus=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},n.prototype._onFocusOut=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},n.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},n.prototype._onMouseMove=function(){this.deactivate()},n.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i.WebGLRenderer.registerPlugin("accessibility",n),i.CanvasRenderer.registerPlugin("accessibility",n)},{"../core":23,"./accessibleTarget":14}],14:[function(e,t,r){var n={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};t.exports=n},{}],15:[function(e,t,r){t.exports={accessibleTarget:e("./accessibleTarget"),AccessibilityManager:e("./AccessibilityManager")}},{"./AccessibilityManager":13,"./accessibleTarget":14}],16:[function(e,t,r){var n={VERSION:e("../../package.json").version,PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};t.exports=n},{"../../package.json":12}],17:[function(e,t,r){function n(){s.call(this),this.children=[]}var i=e("../math"),o=e("../utils"),s=e("./DisplayObject"),a=e("../textures/RenderTexture"),u=new i.Matrix;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;0!==t?this.scale.x=e/t:this.scale.x=1,this._width=e}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;0!==t?this.scale.y=e/t:this.scale.y=1,this._height=e}}}),n.prototype.onChildrenChange=function(){},n.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var r=0;t>r;r++)this.addChild(arguments[r]);else e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},n.prototype.addChildAt=function(e,t){if(t>=0&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),this.onChildrenChange(t),e.emit("added",this),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},n.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),n=this.getChildIndex(t);if(0>r||0>n)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[r]=t,this.children[n]=e,this.onChildrenChange(n>r?r:n)}},n.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},n.prototype.setChildIndex=function(e,t){if(0>t||t>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(e);o.removeItems(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)},n.prototype.getChildAt=function(e){if(0>e||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[e]},n.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var r=0;t>r;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(e);if(-1===n)return;e.parent=null,o.removeItems(this.children,n,1),this.onChildrenChange(n),e.emit("removed",this)}return e},n.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,o.removeItems(this.children,e,1),this.onChildrenChange(e),t.emit("removed",this),t},n.prototype.removeChildren=function(e,t){var r,n,i=e||0,o="number"==typeof t?t:this.children.length,s=o-i;if(s>0&&o>=s){for(r=this.children.splice(i,s),n=0;n<r.length;++n)r[n].parent=null;for(this.onChildrenChange(e),n=0;n<r.length;++n)r[n].emit("removed",this);return r}if(0===s&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},n.prototype.generateTexture=function(e,t,r){var n=this.getLocalBounds(),i=new a(e,0|n.width,0|n.height,r,t);return u.tx=-n.x,u.ty=-n.y,i.render(this,u),i},n.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var e=0,t=this.children.length;t>e;++e)this.children[e].updateTransform()}},n.prototype.containerUpdateTransform=n.prototype.updateTransform,n.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return i.Rectangle.EMPTY;for(var e,t,r,n=1/0,o=1/0,s=-(1/0),a=-(1/0),u=!1,l=0,h=this.children.length;h>l;++l){var c=this.children[l];c.visible&&(u=!0,e=this.children[l].getBounds(),n=n<e.x?n:e.x,o=o<e.y?o:e.y,t=e.width+e.x,r=e.height+e.y,s=s>t?s:t,a=a>r?a:r)}if(!u)return i.Rectangle.EMPTY;var d=this._bounds;d.x=n,d.y=o,d.width=s-n,d.height=a-o,this._currentBounds=d}return this._currentBounds},n.prototype.containerGetBounds=n.prototype.getBounds,n.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=i.Matrix.IDENTITY;for(var t=0,r=this.children.length;r>t;++t)this.children[t].updateTransform();return this.worldTransform=e,this._currentBounds=null,this.getBounds(i.Matrix.IDENTITY)},n.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var t,r;if(this._mask||this._filters){for(e.currentRenderer.flush(),this._filters&&this._filters.length&&e.filterManager.pushFilter(this,this._filters),this._mask&&e.maskManager.pushMask(this,this._mask),e.currentRenderer.start(),this._renderWebGL(e),t=0,r=this.children.length;r>t;t++)this.children[t].renderWebGL(e);e.currentRenderer.flush(),this._mask&&e.maskManager.popMask(this,this._mask),this._filters&&e.filterManager.popFilter(),e.currentRenderer.start()}else for(this._renderWebGL(e),t=0,r=this.children.length;r>t;++t)this.children[t].renderWebGL(e)}},n.prototype._renderWebGL=function(e){},n.prototype._renderCanvas=function(e){},n.prototype.renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask,e),this._renderCanvas(e);for(var t=0,r=this.children.length;r>t;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},n.prototype.destroy=function(e){if(s.prototype.destroy.call(this),e)for(var t=0,r=this.children.length;r>t;++t)this.children[t].destroy(e);this.removeChildren(),this.children=null}},{"../math":26,"../textures/RenderTexture":64,"../utils":70,"./DisplayObject":18}],18:[function(e,t,r){function n(){s.call(this),this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.skew=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new i.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var i=e("../math"),o=e("../textures/RenderTexture"),s=e("eventemitter3"),a=e("../const"),u=new i.Matrix,l={worldTransform:new i.Matrix,worldAlpha:1,children:[]};n.prototype=Object.create(s.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},worldVisible:{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},mask:{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0),this._mask=e,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}}),n.prototype.updateTransform=function(){var e,t,r,n,i,o,s=this.parent.worldTransform,l=this.worldTransform;this.skew.x||this.skew.y?(u.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),l.a=u.a*s.a+u.b*s.c,l.b=u.a*s.b+u.b*s.d,l.c=u.c*s.a+u.d*s.c,l.d=u.c*s.b+u.d*s.d,l.tx=u.tx*s.a+u.ty*s.c+s.tx,l.ty=u.tx*s.b+u.ty*s.d+s.ty):this.rotation%a.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scale.x,t=this._sr*this.scale.x,r=-this._sr*this.scale.y,n=this._cr*this.scale.y,i=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(i-=this.pivot.x*e+this.pivot.y*r,o-=this.pivot.x*t+this.pivot.y*n),l.a=e*s.a+t*s.c,l.b=e*s.b+t*s.d,l.c=r*s.a+n*s.c,l.d=r*s.b+n*s.d,l.tx=i*s.a+o*s.c+s.tx,l.ty=i*s.b+o*s.d+s.ty):(e=this.scale.x,n=this.scale.y,i=this.position.x-this.pivot.x*e,o=this.position.y-this.pivot.y*n,l.a=e*s.a,l.b=e*s.b,l.c=n*s.c,l.d=n*s.d,l.tx=i*s.a+o*s.c+s.tx,l.ty=i*s.b+o*s.d+s.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},n.prototype.displayObjectUpdateTransform=n.prototype.updateTransform,n.prototype.getBounds=function(e){return i.Rectangle.EMPTY},n.prototype.getLocalBounds=function(){return this.getBounds(i.Matrix.IDENTITY)},n.prototype.toGlobal=function(e){return this.parent?this.displayObjectUpdateTransform():(this.parent=l,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(e)},n.prototype.toLocal=function(e,t,r){return t&&(e=t.toGlobal(e)),this.parent?this.displayObjectUpdateTransform():(this.parent=l,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(e,r)},n.prototype.renderWebGL=function(e){},n.prototype.renderCanvas=function(e){},n.prototype.generateTexture=function(e,t,r){var n=this.getLocalBounds(),i=new o(e,0|n.width,0|n.height,t,r);return u.tx=-n.x,u.ty=-n.y,i.render(this,u),i},n.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},n.prototype.setTransform=function(e,t,r,n,i,o,s,a,u){return this.position.x=e||0,this.position.y=t||0,this.scale.x=r?r:1,this.scale.y=n?n:1,this.rotation=i||0,this.skew.x=o||0,this.skew.y=s||0,this.pivot.x=a||0,this.pivot.y=u||0,this},n.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":16,"../math":26,"../textures/RenderTexture":64,eventemitter3:10}],19:[function(e,t,r){function n(){i.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=h.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new l.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var i=e("../display/Container"),o=e("../textures/Texture"),s=e("../renderers/canvas/utils/CanvasBuffer"),a=e("../renderers/canvas/utils/CanvasGraphics"),u=e("./GraphicsData"),l=e("../math"),h=e("../const"),c=new l.Point;n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){var e=new n;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=!0,e.glDirty=!0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var t=0;t<this.graphicsData.length;++t)e.graphicsData.push(this.graphicsData[t].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},n.prototype.lineStyle=function(e,t,r){if(this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=void 0===r?1:r,this.currentPath)if(this.currentPath.shape.points.length){var n=new l.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},n.prototype.moveTo=function(e,t){var r=new l.Polygon([e,t]);return r.closed=!1,this.drawShape(r),this},n.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty=!0,this},n.prototype.quadraticCurveTo=function(e,t,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,s=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var u=a[a.length-2],l=a[a.length-1],h=0,c=1;s>=c;++c)h=c/s,i=u+(e-u)*h,o=l+(t-l)*h,a.push(i+(e+(r-e)*h-i)*h,o+(t+(n-t)*h-o)*h);return this.dirty=this.boundsDirty=!0,this},n.prototype.bezierCurveTo=function(e,t,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var s,a,u,l,h,c=20,d=this.currentPath.shape.points,p=d[d.length-2],f=d[d.length-1],g=0,v=1;c>=v;++v)g=v/c,s=1-g,a=s*s,u=a*s,l=g*g,h=l*g,d.push(u*p+3*a*g*e+3*s*l*r+h*i,u*f+3*a*g*t+3*s*l*n+h*o);return this.dirty=this.boundsDirty=!0,this},n.prototype.arcTo=function(e,t,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],u=a-t,l=s-e,h=n-t,c=r-e,d=Math.abs(u*c-l*h);if(1e-8>d||0===i)(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t);else{var p=u*u+l*l,f=h*h+c*c,g=u*h+l*c,v=i*Math.sqrt(p)/d,m=i*Math.sqrt(f)/d,y=v*g/p,x=m*g/f,b=v*c+m*l,_=v*h+m*u,w=l*(m+y),T=u*(m+y),E=c*(v+x),S=h*(v+x),C=Math.atan2(T-_,w-b),A=Math.atan2(S-_,E-b);this.arc(b+e,_+t,i,C,A,l*h>c*u)}return this.dirty=this.boundsDirty=!0,this},n.prototype.arc=function(e,t,r,n,i,o){if(o=o||!1,n===i)return this;!o&&n>=i?i+=2*Math.PI:o&&i>=n&&(n+=2*Math.PI);var s=o?-1*(n-i):i-n,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var u=e+Math.cos(n)*r,l=t+Math.sin(n)*r;this.currentPath?this.currentPath.shape.points.push(u,l):this.moveTo(u,l);for(var h=this.currentPath.shape.points,c=s/(2*a),d=2*c,p=Math.cos(c),f=Math.sin(c),g=a-1,v=g%1/g,m=0;g>=m;m++){var y=m+v*m,x=c+n+d*y,b=Math.cos(x),_=-Math.sin(x);h.push((p*b+f*_)*r+e,(p*-_+f*b)*r+t)}return this.dirty=this.boundsDirty=!0,this},n.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=void 0===t?1:t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.prototype.drawRect=function(e,t,r,n){return this.drawShape(new l.Rectangle(e,t,r,n)),this},n.prototype.drawRoundedRect=function(e,t,r,n,i){return this.drawShape(new l.RoundedRectangle(e,t,r,n,i)),this},n.prototype.drawCircle=function(e,t,r){return this.drawShape(new l.Circle(e,t,r)),this},n.prototype.drawEllipse=function(e,t,r,n){return this.drawShape(new l.Ellipse(e,t,r,n)),this},n.prototype.drawPolygon=function(e){var t=e,r=!0;if(t instanceof l.Polygon&&(r=t.closed,t=t.points),!Array.isArray(t)){t=new Array(arguments.length);for(var n=0;n<t.length;++n)t[n]=arguments[n]}var i=new l.Polygon(t);return i.closed=r,this.drawShape(i),this},n.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},n.prototype.generateTexture=function(e,t,r){t=t||1;var n=this.getLocalBounds(),i=new s(n.width*t,n.height*t),u=o.fromCanvas(i.canvas,r);return u.baseTexture.resolution=t,i.context.scale(t,t),i.context.translate(-n.x,-n.y),a.renderGraphics(this,i.context),u},n.prototype._renderWebGL=function(e){this.glDirty&&(this.dirty=!0,this.glDirty=!1),e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this)},n.prototype._renderCanvas=function(e){if(this.isMask!==!0){this._prevTint!==this.tint&&(this.dirty=!0);var t=e.context,r=this.worldTransform,n=e.blendModes[this.blendMode];n!==t.globalCompositeOperation&&(t.globalCompositeOperation=n);var i=e.resolution;t.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),a.renderGraphics(this,t)}},n.prototype.getBounds=function(e){if(!this._currentBounds){if(!this.renderable)return l.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var t=this._localBounds,r=t.x,n=t.width+t.x,i=t.y,o=t.height+t.y,s=e||this.worldTransform,a=s.a,u=s.b,h=s.c,c=s.d,d=s.tx,p=s.ty,f=a*n+h*o+d,g=c*o+u*n+p,v=a*r+h*o+d,m=c*o+u*r+p,y=a*r+h*i+d,x=c*i+u*r+p,b=a*n+h*i+d,_=c*i+u*n+p,w=f,T=g,E=f,S=g;E=E>v?v:E,E=E>y?y:E,E=E>b?b:E,S=S>m?m:S,S=S>x?x:S,S=S>_?_:S,w=v>w?v:w,w=y>w?y:w,w=b>w?b:w,T=m>T?m:T,T=x>T?x:T,T=_>T?_:T,this._bounds.x=E,this._bounds.width=w-E,this._bounds.y=S,this._bounds.height=T-S,this._currentBounds=this._bounds}return this._currentBounds},n.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,c);for(var t=this.graphicsData,r=0;r<t.length;r++){var n=t[r];if(n.fill&&n.shape&&n.shape.contains(c.x,c.y))return!0}return!1},n.prototype.updateLocalBounds=function(){var e=1/0,t=-(1/0),r=1/0,n=-(1/0);if(this.graphicsData.length)for(var i,o,s,a,u,l,c=0;c<this.graphicsData.length;c++){var d=this.graphicsData[c],p=d.type,f=d.lineWidth;if(i=d.shape,p===h.SHAPES.RECT||p===h.SHAPES.RREC)s=i.x-f/2,a=i.y-f/2,u=i.width+f,l=i.height+f,e=e>s?s:e,t=s+u>t?s+u:t,r=r>a?a:r,n=a+l>n?a+l:n;else if(p===h.SHAPES.CIRC)s=i.x,a=i.y,u=i.radius+f/2,l=i.radius+f/2,e=e>s-u?s-u:e,t=s+u>t?s+u:t,r=r>a-l?a-l:r,n=a+l>n?a+l:n;else if(p===h.SHAPES.ELIP)s=i.x,a=i.y,u=i.width+f/2,l=i.height+f/2,e=e>s-u?s-u:e,t=s+u>t?s+u:t,r=r>a-l?a-l:r,n=a+l>n?a+l:n;else{o=i.points;for(var g=0;g<o.length;g+=2)s=o[g],a=o[g+1],e=e>s-f?s-f:e,t=s+f>t?s+f:t,r=r>a-f?a-f:r,n=a+f>n?a+f:n}}else e=0,t=0,r=0,n=0;var v=this.boundsPadding;this._localBounds.x=e-v,this._localBounds.width=t-e+2*v,this._localBounds.y=r-v,this._localBounds.height=n-r+2*v},n.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new u(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,e);return this.graphicsData.push(t),t.type===h.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty=this.boundsDirty=!0,t},n.prototype.destroy=function(){i.prototype.destroy.apply(this,arguments);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();for(var t in this._webgl)for(var r=0;r<this._webgl[t].data.length;++r)this._webgl[t].data[r].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":16,"../display/Container":17,"../math":26,"../renderers/canvas/utils/CanvasBuffer":38,"../renderers/canvas/utils/CanvasGraphics":39,"../textures/Texture":65,"./GraphicsData":20}],20:[function(e,t,r){function n(e,t,r,n,i,o,s){this.lineWidth=e,this.lineColor=t,this.lineAlpha=r,this._lineTint=t,this.fillColor=n,this.fillAlpha=i,this._fillTint=n,this.fill=o,this.shape=s,this.type=s.type}n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n.prototype.destroy=function(){this.shape=null}},{}],21:[function(e,t,r){function n(e){a.call(this,e),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var i=e("../../utils"),o=e("../../math"),s=e("../../const"),a=e("../../renderers/webgl/utils/ObjectRenderer"),u=e("../../renderers/webgl/WebGLRenderer"),l=e("./WebGLGraphicsData"),h=e("earcut");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,t.exports=n,u.registerPlugin("graphics",n),n.prototype.onContextChange=function(){},n.prototype.destroy=function(){a.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},n.prototype.render=function(e){var t,r=this.renderer,n=r.gl,o=r.shaderManager.plugins.primitiveShader;(e.dirty||!e._webGL[n.id])&&this.updateGraphics(e);var s=e._webGL[n.id];r.blendModeManager.setBlendMode(e.blendMode);for(var a=0,u=s.data.length;u>a;a++)t=s.data[a],1===s.data[a].mode?(r.stencilManager.pushStencil(e,t),n.uniform1f(r.shaderManager.complexPrimitiveShader.uniforms.alpha._location,e.worldAlpha*t.alpha),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),r.stencilManager.popStencil(e,t)):(o=r.shaderManager.primitiveShader,r.shaderManager.setShader(o),n.uniformMatrix3fv(o.uniforms.translationMatrix._location,!1,e.worldTransform.toArray(!0)),n.uniformMatrix3fv(o.uniforms.projectionMatrix._location,!1,r.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(o.uniforms.tint._location,i.hex2rgb(e.tint)),n.uniform1f(o.uniforms.alpha._location,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,t.buffer),n.vertexAttribPointer(o.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(o.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0)),r.drawCount++},n.prototype.updateGraphics=function(e){var t=this.renderer.gl,r=e._webGL[t.id];r||(r=e._webGL[t.id]={lastIndex:0,data:[],gl:t}),e.dirty=!1;var n;if(e.clearDirty){for(e.clearDirty=!1,n=0;n<r.data.length;n++){var i=r.data[n];i.reset(),this.graphicsDataPool.push(i)}r.data=[],r.lastIndex=0}var o;for(n=r.lastIndex;n<e.graphicsData.length;n++){var a=e.graphicsData[n];if(a.type===s.SHAPES.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),
a.fill&&a.points.length>=6)if(a.points.length<2*this.maximumSimplePolySize){o=this.switchMode(r,0);var u=this.buildPoly(a,o);u||(o=this.switchMode(r,1),this.buildComplexPoly(a,o))}else o=this.switchMode(r,1),this.buildComplexPoly(a,o);a.lineWidth>0&&(o=this.switchMode(r,0),this.buildLine(a,o))}else o=this.switchMode(r,0),a.type===s.SHAPES.RECT?this.buildRectangle(a,o):a.type===s.SHAPES.CIRC||a.type===s.SHAPES.ELIP?this.buildCircle(a,o):a.type===s.SHAPES.RREC&&this.buildRoundedRectangle(a,o);r.lastIndex++}for(n=0;n<r.data.length;n++)o=r.data[n],o.dirty&&o.upload()},n.prototype.switchMode=function(e,t){var r;return e.data.length?(r=e.data[e.data.length-1],(r.points.length>32e4||r.mode!==t||1===t)&&(r=this.graphicsDataPool.pop()||new l(e.gl),r.mode=t,e.data.push(r))):(r=this.graphicsDataPool.pop()||new l(e.gl),r.mode=t,e.data.push(r)),r.dirty=!0,r},n.prototype.buildRectangle=function(e,t){var r=e.shape,n=r.x,o=r.y,s=r.width,a=r.height;if(e.fill){var u=i.hex2rgb(e.fillColor),l=e.fillAlpha,h=u[0]*l,c=u[1]*l,d=u[2]*l,p=t.points,f=t.indices,g=p.length/6;p.push(n,o),p.push(h,c,d,l),p.push(n+s,o),p.push(h,c,d,l),p.push(n,o+a),p.push(h,c,d,l),p.push(n+s,o+a),p.push(h,c,d,l),f.push(g,g,g+1,g+2,g+3,g+3)}if(e.lineWidth){var v=e.points;e.points=[n,o,n+s,o,n+s,o+a,n,o+a,n,o],this.buildLine(e,t),e.points=v}},n.prototype.buildRoundedRectangle=function(e,t){var r=e.shape,n=r.x,o=r.y,s=r.width,a=r.height,u=r.radius,l=[];if(l.push(n,o+u),this.quadraticBezierCurve(n,o+a-u,n,o+a,n+u,o+a,l),this.quadraticBezierCurve(n+s-u,o+a,n+s,o+a,n+s,o+a-u,l),this.quadraticBezierCurve(n+s,o+u,n+s,o,n+s-u,o,l),this.quadraticBezierCurve(n+u,o,n,o,n,o+u+1e-10,l),e.fill){var c=i.hex2rgb(e.fillColor),d=e.fillAlpha,p=c[0]*d,f=c[1]*d,g=c[2]*d,v=t.points,m=t.indices,y=v.length/6,x=h(l,null,2),b=0;for(b=0;b<x.length;b+=3)m.push(x[b]+y),m.push(x[b]+y),m.push(x[b+1]+y),m.push(x[b+2]+y),m.push(x[b+2]+y);for(b=0;b<l.length;b++)v.push(l[b],l[++b],p,f,g,d)}if(e.lineWidth){var _=e.points;e.points=l,this.buildLine(e,t),e.points=_}},n.prototype.quadraticBezierCurve=function(e,t,r,n,i,o,s){function a(e,t,r){var n=t-e;return e+n*r}for(var u,l,h,c,d,p,f=20,g=s||[],v=0,m=0;f>=m;m++)v=m/f,u=a(e,r,v),l=a(t,n,v),h=a(r,i,v),c=a(n,o,v),d=a(u,h,v),p=a(l,c,v),g.push(d,p);return g},n.prototype.buildCircle=function(e,t){var r,n,o=e.shape,a=o.x,u=o.y;e.type===s.SHAPES.CIRC?(r=o.radius,n=o.radius):(r=o.width,n=o.height);var l=Math.floor(30*Math.sqrt(o.radius))||Math.floor(15*Math.sqrt(o.width+o.height)),h=2*Math.PI/l,c=0;if(e.fill){var d=i.hex2rgb(e.fillColor),p=e.fillAlpha,f=d[0]*p,g=d[1]*p,v=d[2]*p,m=t.points,y=t.indices,x=m.length/6;for(y.push(x),c=0;l+1>c;c++)m.push(a,u,f,g,v,p),m.push(a+Math.sin(h*c)*r,u+Math.cos(h*c)*n,f,g,v,p),y.push(x++,x++);y.push(x-1)}if(e.lineWidth){var b=e.points;for(e.points=[],c=0;l+1>c;c++)e.points.push(a+Math.sin(h*c)*r,u+Math.cos(h*c)*n);this.buildLine(e,t),e.points=b}},n.prototype.buildLine=function(e,t){var r=0,n=e.points;if(0!==n.length){var s=new o.Point(n[0],n[1]),a=new o.Point(n[n.length-2],n[n.length-1]);if(s.x===a.x&&s.y===a.y){n=n.slice(),n.pop(),n.pop(),a=new o.Point(n[n.length-2],n[n.length-1]);var u=a.x+.5*(s.x-a.x),l=a.y+.5*(s.y-a.y);n.unshift(u,l),n.push(u,l)}var h,c,d,p,f,g,v,m,y,x,b,_,w,T,E,S,C,A,M,O,R,P,D,F=t.points,B=t.indices,L=n.length/2,k=n.length,N=F.length/6,I=e.lineWidth/2,j=i.hex2rgb(e.lineColor),U=e.lineAlpha,H=j[0]*U,X=j[1]*U,W=j[2]*U;for(d=n[0],p=n[1],f=n[2],g=n[3],y=-(p-g),x=d-f,D=Math.sqrt(y*y+x*x),y/=D,x/=D,y*=I,x*=I,F.push(d-y,p-x,H,X,W,U),F.push(d+y,p+x,H,X,W,U),r=1;L-1>r;r++)d=n[2*(r-1)],p=n[2*(r-1)+1],f=n[2*r],g=n[2*r+1],v=n[2*(r+1)],m=n[2*(r+1)+1],y=-(p-g),x=d-f,D=Math.sqrt(y*y+x*x),y/=D,x/=D,y*=I,x*=I,b=-(g-m),_=f-v,D=Math.sqrt(b*b+_*_),b/=D,_/=D,b*=I,_*=I,E=-x+p-(-x+g),S=-y+f-(-y+d),C=(-y+d)*(-x+g)-(-y+f)*(-x+p),A=-_+m-(-_+g),M=-b+f-(-b+v),O=(-b+v)*(-_+g)-(-b+f)*(-_+m),R=E*M-A*S,Math.abs(R)<.1?(R+=10.1,F.push(f-y,g-x,H,X,W,U),F.push(f+y,g+x,H,X,W,U)):(h=(S*O-M*C)/R,c=(A*C-E*O)/R,P=(h-f)*(h-f)+(c-g)*(c-g),P>19600?(w=y-b,T=x-_,D=Math.sqrt(w*w+T*T),w/=D,T/=D,w*=I,T*=I,F.push(f-w,g-T),F.push(H,X,W,U),F.push(f+w,g+T),F.push(H,X,W,U),F.push(f-w,g-T),F.push(H,X,W,U),k++):(F.push(h,c),F.push(H,X,W,U),F.push(f-(h-f),g-(c-g)),F.push(H,X,W,U)));for(d=n[2*(L-2)],p=n[2*(L-2)+1],f=n[2*(L-1)],g=n[2*(L-1)+1],y=-(p-g),x=d-f,D=Math.sqrt(y*y+x*x),y/=D,x/=D,y*=I,x*=I,F.push(f-y,g-x),F.push(H,X,W,U),F.push(f+y,g+x),F.push(H,X,W,U),B.push(N),r=0;k>r;r++)B.push(N++);B.push(N-1)}},n.prototype.buildComplexPoly=function(e,t){var r=e.points.slice();if(!(r.length<6)){var n=t.indices;t.points=r,t.alpha=e.fillAlpha,t.color=i.hex2rgb(e.fillColor);for(var o,s,a=1/0,u=-(1/0),l=1/0,h=-(1/0),c=0;c<r.length;c+=2)o=r[c],s=r[c+1],a=a>o?o:a,u=o>u?o:u,l=l>s?s:l,h=s>h?s:h;r.push(a,l,u,l,u,h,a,h);var d=r.length/2;for(c=0;d>c;c++)n.push(c)}},n.prototype.buildPoly=function(e,t){var r=e.points;if(!(r.length<6)){var n=t.points,o=t.indices,s=r.length/2,a=i.hex2rgb(e.fillColor),u=e.fillAlpha,l=a[0]*u,c=a[1]*u,d=a[2]*u,p=h(r,null,2);if(!p)return!1;var f=n.length/6,g=0;for(g=0;g<p.length;g+=3)o.push(p[g]+f),o.push(p[g]+f),o.push(p[g+1]+f),o.push(p[g+2]+f),o.push(p[g+2]+f);for(g=0;s>g;g++)n.push(r[2*g],r[2*g+1],l,c,d,u);return!0}}},{"../../const":16,"../../math":26,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56,"../../utils":70,"./WebGLGraphicsData":22,earcut:9}],22:[function(e,t,r){function n(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}n.prototype.constructor=n,t.exports=n,n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){var e=this.gl;this.glPoints=new Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndices,e.STATIC_DRAW),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],23:[function(e,t,r){var n=t.exports=Object.assign(e("./const"),e("./math"),{utils:e("./utils"),ticker:e("./ticker"),DisplayObject:e("./display/DisplayObject"),Container:e("./display/Container"),Sprite:e("./sprites/Sprite"),ParticleContainer:e("./particles/ParticleContainer"),SpriteRenderer:e("./sprites/webgl/SpriteRenderer"),ParticleRenderer:e("./particles/webgl/ParticleRenderer"),Text:e("./text/Text"),Graphics:e("./graphics/Graphics"),GraphicsData:e("./graphics/GraphicsData"),GraphicsRenderer:e("./graphics/webgl/GraphicsRenderer"),Texture:e("./textures/Texture"),BaseTexture:e("./textures/BaseTexture"),RenderTexture:e("./textures/RenderTexture"),VideoBaseTexture:e("./textures/VideoBaseTexture"),TextureUvs:e("./textures/TextureUvs"),CanvasRenderer:e("./renderers/canvas/CanvasRenderer"),CanvasGraphics:e("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:e("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:e("./renderers/webgl/WebGLRenderer"),WebGLManager:e("./renderers/webgl/managers/WebGLManager"),ShaderManager:e("./renderers/webgl/managers/ShaderManager"),Shader:e("./renderers/webgl/shaders/Shader"),ObjectRenderer:e("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:e("./renderers/webgl/utils/RenderTarget"),AbstractFilter:e("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:e("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:e("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(e,t,r,i){return e=e||800,t=t||600,!i&&n.utils.isWebGLSupported()?new n.WebGLRenderer(e,t,r):new n.CanvasRenderer(e,t,r)}})},{"./const":16,"./display/Container":17,"./display/DisplayObject":18,"./graphics/Graphics":19,"./graphics/GraphicsData":20,"./graphics/webgl/GraphicsRenderer":21,"./math":26,"./particles/ParticleContainer":32,"./particles/webgl/ParticleRenderer":34,"./renderers/canvas/CanvasRenderer":37,"./renderers/canvas/utils/CanvasBuffer":38,"./renderers/canvas/utils/CanvasGraphics":39,"./renderers/webgl/WebGLRenderer":42,"./renderers/webgl/filters/AbstractFilter":43,"./renderers/webgl/filters/FXAAFilter":44,"./renderers/webgl/filters/SpriteMaskFilter":45,"./renderers/webgl/managers/ShaderManager":49,"./renderers/webgl/managers/WebGLManager":51,"./renderers/webgl/shaders/Shader":54,"./renderers/webgl/utils/ObjectRenderer":56,"./renderers/webgl/utils/RenderTarget":58,"./sprites/Sprite":60,"./sprites/webgl/SpriteRenderer":61,"./text/Text":62,"./textures/BaseTexture":63,"./textures/RenderTexture":64,"./textures/Texture":65,"./textures/TextureUvs":66,"./textures/VideoBaseTexture":67,"./ticker":69,"./utils":70}],24:[function(e,t,r){function n(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var i=e("./Point");n.prototype.constructor=n,t.exports=n,n.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},n.prototype.set=function(e,t,r,n,i,o){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=o,this},n.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},n.prototype.apply=function(e,t){t=t||new i;var r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t},n.prototype.applyInverse=function(e,t){t=t||new i;var r=1/(this.a*this.d+this.c*-this.b),n=e.x,o=e.y;return t.x=this.d*r*n+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*o+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t},n.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},n.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},n.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,o=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this},n.prototype.append=function(e){var t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this},n.prototype.setTransform=function(e,t,r,n,i,o,s,a,u){var l,h,c,d,p,f,g,v,m,y;return p=Math.sin(s),f=Math.cos(s),g=Math.cos(u),v=Math.sin(u),m=-Math.sin(a),y=Math.cos(a),l=f*i,h=p*i,c=-p*o,d=f*o,this.a=g*l+v*c,this.b=g*h+v*d,this.c=m*l+y*c,this.d=m*h+y*d,this.tx=e+(r*l+n*c),this.ty=t+(r*h+n*d),this},n.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},n.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,n=this.d,i=this.tx,o=e*n-t*r;return this.a=n/o,this.b=-t/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(e*this.ty-t*i)/o,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var e=new n;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.IDENTITY=new n,n.TEMP_MATRIX=new n},{"./Point":25}],25:[function(e,t,r){function n(e,t){this.x=e||0,this.y=t||0}n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(e){this.set(e.x,e.y)},n.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},n.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)}},{}],26:[function(e,t,r){t.exports={Point:e("./Point"),Matrix:e("./Matrix"),Circle:e("./shapes/Circle"),Ellipse:e("./shapes/Ellipse"),Polygon:e("./shapes/Polygon"),Rectangle:e("./shapes/Rectangle"),RoundedRectangle:e("./shapes/RoundedRectangle")}},{"./Matrix":24,"./Point":25,"./shapes/Circle":27,"./shapes/Ellipse":28,"./shapes/Polygon":29,"./shapes/Rectangle":30,"./shapes/RoundedRectangle":31}],27:[function(e,t,r){function n(e,t,r){this.x=e||0,this.y=t||0,this.radius=r||0,this.type=o.SHAPES.CIRC}var i=e("./Rectangle"),o=e("../../const");n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(e,t){if(this.radius<=0)return!1;var r=this.x-e,n=this.y-t,i=this.radius*this.radius;return r*=r,n*=n,i>=r+n},n.prototype.getBounds=function(){return new i(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":16,"./Rectangle":30}],28:[function(e,t,r){function n(e,t,r,n){this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0,this.type=o.SHAPES.ELIP}var i=e("./Rectangle"),o=e("../../const");n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,n=(t-this.y)/this.height;return r*=r,n*=n,1>=r+n},n.prototype.getBounds=function(){return new i(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":16,"./Rectangle":30}],29:[function(e,t,r){function n(e){var t=e;if(!Array.isArray(t)){t=new Array(arguments.length);for(var r=0;r<t.length;++r)t[r]=arguments[r]}if(t[0]instanceof i){for(var n=[],s=0,a=t.length;a>s;s++)n.push(t[s].x,t[s].y);t=n}this.closed=!0,this.points=t,this.type=o.SHAPES.POLY}var i=e("../Point"),o=e("../../const");n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){return new n(this.points.slice())},n.prototype.contains=function(e,t){for(var r=!1,n=this.points.length/2,i=0,o=n-1;n>i;o=i++){var s=this.points[2*i],a=this.points[2*i+1],u=this.points[2*o],l=this.points[2*o+1],h=a>t!=l>t&&(u-s)*(t-a)/(l-a)+s>e;h&&(r=!r)}return r}},{"../../const":16,"../Point":25}],30:[function(e,t,r){function n(e,t,r,n){this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0,this.type=i.SHAPES.RECT}var i=e("../../const");n.prototype.constructor=n,t.exports=n,n.EMPTY=new n(0,0,0,0),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height?!0:!1}},{"../../const":16}],31:[function(e,t,r){function n(e,t,r,n,o){this.x=e||0,this.y=t||0,this.width=r||0,this.height=n||0,this.radius=o||20,this.type=i.SHAPES.RREC}var i=e("../../const");n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height?!0:!1}},{"../../const":16}],32:[function(e,t,r){function n(e,t,r){i.call(this),r=r||15e3,e=e||15e3;var n=16384;r>n&&(r=n),r>e&&(r=e),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=o.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(t)}var i=e("../display/Container"),o=e("../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.setProperties=function(e){e&&(this._properties[0]="scale"in e?!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="alpha"in e?!!e.alpha:this._properties[4])},n.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.prototype.renderWebGL=function(e){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},n.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},n.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,r=this.worldTransform,n=!0,i=0,o=0,s=0,a=0,u=e.blendModes[this.blendMode];u!==t.globalCompositeOperation&&(t.globalCompositeOperation=u),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(h.visible){var c=h.texture.frame;if(t.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)===0)n&&(t.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),n=!1),i=h.anchor.x*(-c.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-c.height*h.scale.y)+h.position.y+.5,s=c.width*h.scale.x,a=c.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var d=h.worldTransform;e.roundPixels?t.setTransform(d.a,d.b,d.c,d.d,0|d.tx,0|d.ty):t.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),i=h.anchor.x*-c.width+.5,o=h.anchor.y*-c.height+.5,s=c.width,a=c.height}t.drawImage(h.texture.baseTexture.source,c.x,c.y,c.width,c.height,i,o,s,a)}}}},n.prototype.destroy=function(){if(i.prototype.destroy.apply(this,arguments),this._buffers)for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._properties=null,this._buffers=null}},{"../const":16,"../display/Container":17}],33:[function(e,t,r){function n(e,t,r,n){this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;i++){var o=t[i];r[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}n.prototype.constructor=n,t.exports=n,n.prototype.initBuffers=function(){var e,t,r=this.gl,n=0;for(this.dynamicStride=0,e=0;e<this.dynamicProperties.length;e++)t=this.dynamicProperties[e],t.offset=n,n+=t.size,this.dynamicStride+=t.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),r.bufferData(r.ARRAY_BUFFER,this.dynamicData,r.DYNAMIC_DRAW);var i=0;for(this.staticStride=0,e=0;e<this.staticProperties.length;e++)t=this.staticProperties[e],t.offset=i,i+=t.size,this.staticStride+=t.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),r.bufferData(r.ARRAY_BUFFER,this.staticData,r.DYNAMIC_DRAW)},n.prototype.uploadDynamic=function(e,t,r){for(var n=this.gl,i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(e,t,r,this.dynamicData,this.dynamicStride,o.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.dynamicData)},n.prototype.uploadStatic=function(e,t,r){for(var n=this.gl,i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(e,t,r,this.staticData,this.staticStride,o.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.staticData)},n.prototype.bind=function(){var e,t,r=this.gl;for(r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),e=0;e<this.dynamicProperties.length;e++)t=this.dynamicProperties[e],r.vertexAttribPointer(t.attribute,t.size,r.FLOAT,!1,4*this.dynamicStride,4*t.offset);for(r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),e=0;e<this.staticProperties.length;e++)t=this.staticProperties[e],r.vertexAttribPointer(t.attribute,t.size,r.FLOAT,!1,4*this.staticStride,4*t.offset)},n.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],34:[function(e,t,r){function n(e){i.call(this,e);var t=98304;this.indices=new Uint16Array(t);for(var r=0,n=0;t>r;r+=6,n+=4)this.indices[r+0]=n+0,this.indices[r+1]=n+1,this.indices[r+2]=n+2,this.indices[r+3]=n+0,this.indices[r+4]=n+2,this.indices[r+5]=n+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new u.Matrix}var i=e("../../renderers/webgl/utils/ObjectRenderer"),o=e("../../renderers/webgl/WebGLRenderer"),s=e("./ParticleShader"),a=e("./ParticleBuffer"),u=e("../../math");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,o.registerPlugin("particle",n),n.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new s(this.renderer.shaderManager),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},n.prototype.start=function(){var e=this.renderer.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.shader;this.renderer.shaderManager.setShader(t)},n.prototype.render=function(e){var t=e.children,r=t.length,n=e._maxSize,i=e._batchSize;if(0!==r){r>n&&(r=n),e._buffers||(e._buffers=this.generateBuffers(e)),this.renderer.blendModeManager.setBlendMode(e.blendMode);var o=this.renderer.gl,s=e.worldTransform.copy(this.tempMatrix);s.prepend(this.renderer.currentRenderTarget.projectionMatrix),o.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,s.toArray(!0)),o.uniform1f(this.shader.uniforms.uAlpha._location,e.worldAlpha);var a=t[0]._texture.baseTexture;if(a._glTextures[o.id])o.bindTexture(o.TEXTURE_2D,a._glTextures[o.id]);else{if(!this.renderer.updateTexture(a))return;e._properties[0]&&e._properties[3]||(e._bufferToUpdate=0)}for(var u=0,l=0;r>u;u+=i,l+=1){var h=r-u;h>i&&(h=i);var c=e._buffers[l];c.uploadDynamic(t,u,h),e._bufferToUpdate===l&&(c.uploadStatic(t,u,h),e._bufferToUpdate=l+1),c.bind(this.shader),o.drawElements(o.TRIANGLES,6*h,o.UNSIGNED_SHORT,0),this.renderer.drawCount++}}},n.prototype.generateBuffers=function(e){var t,r=this.renderer.gl,n=[],i=e._maxSize,o=e._batchSize,s=e._properties;for(t=0;i>t;t+=o)n.push(new a(r,this.properties,s,o));return n},n.prototype.uploadVertices=function(e,t,r,n,i,o){for(var s,a,u,l,h,c,d,p,f,g=0;r>g;g++)s=e[t+g],a=s._texture,l=s.scale.x,h=s.scale.y,a.trim?(u=a.trim,d=u.x-s.anchor.x*u.width,c=d+a.crop.width,f=u.y-s.anchor.y*u.height,p=f+a.crop.height):(c=a._frame.width*(1-s.anchor.x),d=a._frame.width*-s.anchor.x,p=a._frame.height*(1-s.anchor.y),f=a._frame.height*-s.anchor.y),n[o]=d*l,n[o+1]=f*h,n[o+i]=c*l,n[o+i+1]=f*h,n[o+2*i]=c*l,n[o+2*i+1]=p*h,n[o+3*i]=d*l,n[o+3*i+1]=p*h,o+=4*i},n.prototype.uploadPosition=function(e,t,r,n,i,o){for(var s=0;r>s;s++){var a=e[t+s].position;n[o]=a.x,n[o+1]=a.y,n[o+i]=a.x,n[o+i+1]=a.y,n[o+2*i]=a.x,n[o+2*i+1]=a.y,n[o+3*i]=a.x,n[o+3*i+1]=a.y,o+=4*i}},n.prototype.uploadRotation=function(e,t,r,n,i,o){for(var s=0;r>s;s++){var a=e[t+s].rotation;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},n.prototype.uploadUvs=function(e,t,r,n,i,o){for(var s=0;r>s;s++){var a=e[t+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+i]=a.x1,n[o+i+1]=a.y1,n[o+2*i]=a.x2,n[o+2*i+1]=a.y2,n[o+3*i]=a.x3,n[o+3*i+1]=a.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},n.prototype.uploadAlpha=function(e,t,r,n,i,o){for(var s=0;r>s;s++){var a=e[t+s].alpha;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},n.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":26,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56,"./ParticleBuffer":33,"./ParticleShader":35}],35:[function(e,t,r){function n(e){i.call(this,e,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var i=e("../../renderers/webgl/shaders/TextureShader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n},{"../../renderers/webgl/shaders/TextureShader":55}],36:[function(e,t,r){function n(e,t,r,n){if(a.call(this),i.sayHello(e),n)for(var u in s.DEFAULT_RENDER_OPTIONS)"undefined"==typeof n[u]&&(n[u]=s.DEFAULT_RENDER_OPTIONS[u]);else n=s.DEFAULT_RENDER_OPTIONS;this.type=s.RENDERER_TYPE.UNKNOWN,this.width=t||800,this.height=r||600,this.view=n.view||document.createElement("canvas"),this.resolution=n.resolution,this.transparent=n.transparent,this.autoResize=n.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=n.preserveDrawingBuffer,this.clearBeforeRender=n.clearBeforeRender,this.roundPixels=n.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=n.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new o.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var i=e("../utils"),o=e("../math"),s=e("../const"),a=e("eventemitter3");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=i.hex2string(e),i.hex2rgb(e,this._backgroundColorRgb)}}}),n.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":16,"../math":26,"../utils":70,eventemitter3:10}],37:[function(e,t,r){function n(e,t,r){r=r||{},i.call(this,"Canvas",e,t,r),this.type=u.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new o,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new a.Matrix,worldAlpha:1},this.resize(e,t)}var i=e("../SystemRenderer"),o=e("./utils/CanvasMaskManager"),s=e("../../utils"),a=e("../../math"),u=e("../../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,s.pluginTarget.mixin(n),n.prototype.render=function(e){this.emit("prerender");var t=e.parent;this._lastObjectRendered=e,e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=t,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[u.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(e,this.context),this.emit("postrender")},n.prototype.destroy=function(e){this.destroyPlugins(),i.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},n.prototype.renderDisplayObject=function(e,t){var r=this.context;this.context=t,e.renderCanvas(this),this.context=r},n.prototype.resize=function(e,t){i.prototype.resize.call(this,e,t),this.smoothProperty&&(this.context[this.smoothProperty]=u.SCALE_MODES.DEFAULT===u.SCALE_MODES.LINEAR)},n.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},s.canUseNewCanvasBlendModes()?(this.blendModes[u.BLEND_MODES.NORMAL]="source-over",this.blendModes[u.BLEND_MODES.ADD]="lighter",this.blendModes[u.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[u.BLEND_MODES.SCREEN]="screen",this.blendModes[u.BLEND_MODES.OVERLAY]="overlay",this.blendModes[u.BLEND_MODES.DARKEN]="darken",this.blendModes[u.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[u.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[u.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[u.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[u.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[u.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[u.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[u.BLEND_MODES.HUE]="hue",this.blendModes[u.BLEND_MODES.SATURATION]="saturate",this.blendModes[u.BLEND_MODES.COLOR]="color",this.blendModes[u.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[u.BLEND_MODES.NORMAL]="source-over",this.blendModes[u.BLEND_MODES.ADD]="lighter",this.blendModes[u.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[u.BLEND_MODES.SCREEN]="source-over",this.blendModes[u.BLEND_MODES.OVERLAY]="source-over",this.blendModes[u.BLEND_MODES.DARKEN]="source-over",this.blendModes[u.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[u.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[u.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[u.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[u.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[u.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[u.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[u.BLEND_MODES.HUE]="source-over",this.blendModes[u.BLEND_MODES.SATURATION]="source-over",this.blendModes[u.BLEND_MODES.COLOR]="source-over",this.blendModes[u.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":16,"../../math":26,"../../utils":70,"../SystemRenderer":36,"./utils/CanvasMaskManager":40}],38:[function(e,t,r){function n(e,t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t}n.prototype.constructor=n,
t.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},height:{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}}),n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(e,t){this.canvas.width=e,this.canvas.height=t},n.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],39:[function(e,t,r){var n=e("../../../const"),i={};t.exports=i,i.renderGraphics=function(e,t){var r=e.worldAlpha;e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var i=0;i<e.graphicsData.length;i++){var o=e.graphicsData[i],s=o.shape,a=o._fillTint,u=o._lineTint;if(t.lineWidth=o.lineWidth,o.type===n.SHAPES.POLY){t.beginPath();var l=s.points;t.moveTo(l[0],l[1]);for(var h=1;h<l.length/2;h++)t.lineTo(l[2*h],l[2*h+1]);s.closed&&t.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke())}else if(o.type===n.SHAPES.RECT)(o.fillColor||0===o.fillColor)&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fillRect(s.x,s.y,s.width,s.height)),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.strokeRect(s.x,s.y,s.width,s.height));else if(o.type===n.SHAPES.CIRC)t.beginPath(),t.arc(s.x,s.y,s.radius,0,2*Math.PI),t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke());else if(o.type===n.SHAPES.ELIP){var c=2*s.width,d=2*s.height,p=s.x-c/2,f=s.y-d/2;t.beginPath();var g=.5522848,v=c/2*g,m=d/2*g,y=p+c,x=f+d,b=p+c/2,_=f+d/2;t.moveTo(p,_),t.bezierCurveTo(p,_-m,b-v,f,b,f),t.bezierCurveTo(b+v,f,y,_-m,y,_),t.bezierCurveTo(y,_+m,b+v,x,b,x),t.bezierCurveTo(b-v,x,p,_+m,p,_),t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke())}else if(o.type===n.SHAPES.RREC){var w=s.x,T=s.y,E=s.width,S=s.height,C=s.radius,A=Math.min(E,S)/2|0;C=C>A?A:C,t.beginPath(),t.moveTo(w,T+C),t.lineTo(w,T+S-C),t.quadraticCurveTo(w,T+S,w+C,T+S),t.lineTo(w+E-C,T+S),t.quadraticCurveTo(w+E,T+S,w+E,T+S-C),t.lineTo(w+E,T+C),t.quadraticCurveTo(w+E,T,w+E-C,T),t.lineTo(w+C,T),t.quadraticCurveTo(w,T,w,T+C),t.closePath(),(o.fillColor||0===o.fillColor)&&(t.globalAlpha=o.fillAlpha*r,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*r,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke())}}},i.renderGraphicsMask=function(e,t){var r=e.graphicsData.length;if(0!==r){t.beginPath();for(var i=0;r>i;i++){var o=e.graphicsData[i],s=o.shape;if(o.type===n.SHAPES.POLY){var a=s.points;t.moveTo(a[0],a[1]);for(var u=1;u<a.length/2;u++)t.lineTo(a[2*u],a[2*u+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&t.closePath()}else if(o.type===n.SHAPES.RECT)t.rect(s.x,s.y,s.width,s.height),t.closePath();else if(o.type===n.SHAPES.CIRC)t.arc(s.x,s.y,s.radius,0,2*Math.PI),t.closePath();else if(o.type===n.SHAPES.ELIP){var l=2*s.width,h=2*s.height,c=s.x-l/2,d=s.y-h/2,p=.5522848,f=l/2*p,g=h/2*p,v=c+l,m=d+h,y=c+l/2,x=d+h/2;t.moveTo(c,x),t.bezierCurveTo(c,x-g,y-f,d,y,d),t.bezierCurveTo(y+f,d,v,x-g,v,x),t.bezierCurveTo(v,x+g,y+f,m,y,m),t.bezierCurveTo(y-f,m,c,x+g,c,x),t.closePath()}else if(o.type===n.SHAPES.RREC){var b=s.x,_=s.y,w=s.width,T=s.height,E=s.radius,S=Math.min(w,T)/2|0;E=E>S?S:E,t.moveTo(b,_+E),t.lineTo(b,_+T-E),t.quadraticCurveTo(b,_+T,b+E,_+T),t.lineTo(b+w-E,_+T),t.quadraticCurveTo(b+w,_+T,b+w,_+T-E),t.lineTo(b+w,_+E),t.quadraticCurveTo(b+w,_,b+w-E,_),t.lineTo(b+E,_),t.quadraticCurveTo(b,_,b,_+E),t.closePath()}}}},i.updateGraphicsTint=function(e){if(16777215!==e.tint||e._prevTint!==e.tint){e._prevTint=e.tint;for(var t=(e.tint>>16&255)/255,r=(e.tint>>8&255)/255,n=(255&e.tint)/255,i=0;i<e.graphicsData.length;i++){var o=e.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255}}}},{"../../../const":16}],40:[function(e,t,r){function n(){}var i=e("./CanvasGraphics");n.prototype.constructor=n,t.exports=n,n.prototype.pushMask=function(e,t){t.context.save();var r=e.alpha,n=e.worldTransform,o=t.resolution;t.context.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),e.texture||(i.renderGraphicsMask(e,t.context),t.context.clip()),e.worldAlpha=r},n.prototype.popMask=function(e){e.context.restore()},n.prototype.destroy=function(){}},{"./CanvasGraphics":39}],41:[function(e,t,r){var n=e("../../../utils"),i={};t.exports=i,i.getTintedTexture=function(e,t){var r=e.texture;t=i.roundColor(t);var n="#"+("00000"+(0|t).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[n])return r.tintCache[n];var o=i.canvas||document.createElement("canvas");if(i.tintMethod(r,t,o),i.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[n]=s}else r.tintCache[n]=o,i.canvas=null;return o},i.tintWithMultiply=function(e,t,r){var n=r.getContext("2d"),i=e.baseTexture.resolution,o=e.crop.clone();o.x*=i,o.y*=i,o.width*=i,o.height*=i,r.width=o.width,r.height=o.height,n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,o.width,o.height),n.globalCompositeOperation="multiply",n.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},i.tintWithOverlay=function(e,t,r){var n=r.getContext("2d"),i=e.baseTexture.resolution,o=e.crop.clone();o.x*=i,o.y*=i,o.width*=i,o.height*=i,r.width=o.width,r.height=o.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,o.width,o.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},i.tintWithPerPixel=function(e,t,r){var i=r.getContext("2d"),o=e.baseTexture.resolution,s=e.crop.clone();s.x*=o,s.y*=o,s.width*=o,s.height*=o,r.width=s.width,r.height=s.height,i.globalCompositeOperation="copy",i.drawImage(e.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);for(var a=n.hex2rgb(t),u=a[0],l=a[1],h=a[2],c=i.getImageData(0,0,s.width,s.height),d=c.data,p=0;p<d.length;p+=4)d[p+0]*=u,d[p+1]*=l,d[p+2]*=h;i.putImageData(c,0,0)},i.roundColor=function(e){var t=i.cacheStepsPerColorChannel,r=n.hex2rgb(e);return r[0]=Math.min(255,r[0]/t*t),r[1]=Math.min(255,r[1]/t*t),r[2]=Math.min(255,r[2]/t*t),n.rgb2hex(r)},i.cacheStepsPerColorChannel=8,i.convertTintToImage=!1,i.canUseMultiply=n.canUseNewCanvasBlendModes(),i.tintMethod=i.canUseMultiply?i.tintWithMultiply:i.tintWithPerPixel},{"../../../utils":70}],42:[function(e,t,r){function n(e,t,r){r=r||{},i.call(this,"WebGL",e,t,r),this.type=f.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!r.forceFXAA&&r.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new o(this),this.maskManager=new s(this),this.stencilManager=new a(this),this.filterManager=new u(this),this.blendModeManager=new l(this),this.currentRenderTarget=null,this.currentRenderer=new c(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var i=e("../SystemRenderer"),o=e("./managers/ShaderManager"),s=e("./managers/MaskManager"),a=e("./managers/StencilManager"),u=e("./managers/FilterManager"),l=e("./managers/BlendModeManager"),h=e("./utils/RenderTarget"),c=e("./utils/ObjectRenderer"),d=e("./filters/FXAAFilter"),p=e("../../utils"),f=e("../../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,p.pluginTarget.mixin(n),n.glContextId=0,n.prototype._createContext=function(){var e=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=e,!e)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=n.glContextId++,e.id=this.glContextId,e.renderer=this},n.prototype._initContext=function(){var e=this.gl;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),this.renderTarget=new h(e,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",e),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!e.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new d])},n.prototype.render=function(e){if(this.emit("prerender"),!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=e,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,e.filterArea=this.renderTarget.size,e.filters=this._FXAAFilter);var t=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=t;var r=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?r.clearColor(0,0,0,0):r.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),r.clear(r.COLOR_BUFFER_BIT)),this.renderDisplayObject(e,this.renderTarget),this.emit("postrender")}},n.prototype.renderDisplayObject=function(e,t,r){this.setRenderTarget(t),r&&t.clear(),this.filterManager.setFilterStack(t.filterStack),e.renderWebGL(this),this.currentRenderer.flush()},n.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},n.prototype.setRenderTarget=function(e){this.currentRenderTarget!==e&&(this.currentRenderTarget=e,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(e.stencilMaskStack))},n.prototype.resize=function(e,t){i.prototype.resize.call(this,e,t),this.filterManager.resize(e,t),this.renderTarget.resize(e,t),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},n.prototype.updateTexture=function(e){if(e=e.baseTexture||e,e.hasLoaded){var t=this.gl;return e._glTextures[t.id]||(e._glTextures[t.id]=t.createTexture(),e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e)),t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===f.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),e.mipmap&&e.isPowerOfTwo?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===f.SCALE_MODES.LINEAR?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===f.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),e.isPowerOfTwo?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),e._glTextures[t.id]}},n.prototype.destroyTexture=function(e,t){if(e=e.baseTexture||e,e.hasLoaded&&e._glTextures[this.gl.id]&&(this.gl.deleteTexture(e._glTextures[this.gl.id]),delete e._glTextures[this.gl.id],!t)){var r=this._managedTextures.indexOf(e);-1!==r&&p.removeItems(this._managedTextures,r,1)}},n.prototype.handleContextLost=function(e){e.preventDefault()},n.prototype.handleContextRestored=function(){this._initContext();for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.gl.id]&&delete t._glTextures[this.gl.id]}},n.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var t=0;t<this._managedTextures.length;++t){var r=this._managedTextures[t];this.destroyTexture(r,!0),r.off("update",this.updateTexture,this),r.off("dispose",this.destroyTexture,this)}i.prototype.destroy.call(this,e),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl=null},n.prototype._mapGlModes=function(){var e=this.gl;this.blendModes||(this.blendModes={},this.blendModes[f.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.ADD]=[e.SRC_ALPHA,e.DST_ALPHA],this.blendModes[f.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SCREEN]=[e.SRC_ALPHA,e.ONE],this.blendModes[f.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[f.DRAW_MODES.POINTS]=e.POINTS,this.drawModes[f.DRAW_MODES.LINES]=e.LINES,this.drawModes[f.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,this.drawModes[f.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLES]=e.TRIANGLES,this.drawModes[f.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN)}},{"../../const":16,"../../utils":70,"../SystemRenderer":36,"./filters/FXAAFilter":44,"./managers/BlendModeManager":46,"./managers/FilterManager":47,"./managers/MaskManager":48,"./managers/ShaderManager":49,"./managers/StencilManager":50,"./utils/ObjectRenderer":56,"./utils/RenderTarget":58}],43:[function(e,t,r){function n(e,t,r){this.shaders=[],this.padding=0,this.uniforms=r||{},this.vertexSrc=e||i.defaultVertexSrc,this.fragmentSrc=t||i.defaultFragmentSrc}var i=e("../shaders/TextureShader");n.prototype.constructor=n,t.exports=n,n.prototype.getShader=function(e){var t=e.gl,r=this.shaders[t.id];return r||(r=new i(e.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[t.id]=r),r},n.prototype.applyFilter=function(e,t,r,n){var i=this.getShader(e);e.filterManager.applyFilter(i,t,r,n)},n.prototype.syncUniform=function(e){for(var t=0,r=this.shaders.length;r>t;++t)this.shaders[t].syncUniform(e)}},{"../shaders/TextureShader":55}],44:[function(e,t,r){function n(){i.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}var i=e("./AbstractFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r){var n=e.filterManager,i=this.getShader(e);n.applyFilter(i,t,r)}},{"./AbstractFilter":43}],45:[function(e,t,r){function n(e){var t=new o.Matrix;i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:e._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:t.toArray(!0)}}),this.maskSprite=e,this.maskMatrix=t}var i=e("./AbstractFilter"),o=e("../../../math");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r){var n=e.filterManager;this.uniforms.mask.value=this.maskSprite._texture,n.calculateMappedMatrix(t.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var i=this.getShader(e);n.applyFilter(i,t,r)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(e){this.uniforms.mask.value=e}},offset:{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}})},{"../../../math":26,"./AbstractFilter":43}],46:[function(e,t,r){function n(e){i.call(this,e),this.currentBlendMode=99999}var i=e("./WebGLManager");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var t=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(t[0],t[1]),!0}},{"./WebGLManager":51}],47:[function(e,t,r){function n(e){i.call(this,e),this.filterStack=[],this.filterStack.push({renderTarget:e.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new u.Rectangle(0,0,e.width,e.height),this.currentFrame=null}var i=e("./WebGLManager"),o=e("../utils/RenderTarget"),s=e("../../../const"),a=e("../utils/Quad"),u=e("../../../math");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.onContextChange=function(){this.texturePool.length=0;var e=this.renderer.gl;this.quad=new a(e)},n.prototype.setFilterStack=function(e){this.filterStack=e},n.prototype.pushFilter=function(e,t){var r=e.filterArea?e.filterArea.clone():e.getBounds();r.x=0|r.x,r.y=0|r.y,r.width=0|r.width,r.height=0|r.height;var n=0|t[0].padding;if(r.x-=n,r.y-=n,r.width+=2*n,r.height+=2*n,this.renderer.currentRenderTarget.transform){var i=this.renderer.currentRenderTarget.transform;r.x+=i.tx,r.y+=i.ty,this.capFilterArea(r),r.x-=i.tx,r.y-=i.ty}else this.capFilterArea(r);if(r.width>0&&r.height>0){this.currentFrame=r;var o=this.getRenderTarget();this.renderer.setRenderTarget(o),o.clear(),this.filterStack.push({renderTarget:o,filter:t})}else this.filterStack.push({renderTarget:null,filter:t})},n.prototype.popFilter=function(){var e=this.filterStack.pop(),t=this.filterStack[this.filterStack.length-1],r=e.renderTarget;if(e.renderTarget){var n=t.renderTarget,i=this.renderer.gl;this.currentFrame=r.frame,this.quad.map(this.textureSize,r.frame),i.bindBuffer(i.ARRAY_BUFFER,this.quad.vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var o=e.filter;if(i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,i.FLOAT,!1,0,32),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,i.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(s.BLEND_MODES.NORMAL),1===o.length)o[0].uniforms.dimensions&&(o[0].uniforms.dimensions.value[0]=this.renderer.width,o[0].uniforms.dimensions.value[1]=this.renderer.height,o[0].uniforms.dimensions.value[2]=this.quad.vertices[0],o[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),o[0].applyFilter(this.renderer,r,n),this.returnRenderTarget(r);else{for(var a=r,u=this.getRenderTarget(!0),l=0;l<o.length-1;l++){var h=o[l];h.uniforms.dimensions&&(h.uniforms.dimensions.value[0]=this.renderer.width,h.uniforms.dimensions.value[1]=this.renderer.height,h.uniforms.dimensions.value[2]=this.quad.vertices[0],h.uniforms.dimensions.value[3]=this.quad.vertices[5]),h.applyFilter(this.renderer,a,u);var c=a;a=u,u=c}o[o.length-1].applyFilter(this.renderer,a,n),this.returnRenderTarget(a),this.returnRenderTarget(u)}return e.filter}},n.prototype.getRenderTarget=function(e){var t=this.texturePool.pop()||new o(this.renderer.gl,this.textureSize.width,this.textureSize.height,s.SCALE_MODES.LINEAR,this.renderer.resolution*s.FILTER_RESOLUTION);return t.frame=this.currentFrame,e&&t.clear(!0),t},n.prototype.returnRenderTarget=function(e){this.texturePool.push(e)},n.prototype.applyFilter=function(e,t,r,n){var i=this.renderer.gl;this.renderer.setRenderTarget(r),n&&r.clear(),this.renderer.shaderManager.setShader(e),e.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),e.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),this.renderer.drawCount++},n.prototype.calculateMappedMatrix=function(e,t,r){var n=t.worldTransform.copy(u.Matrix.TEMP_MATRIX),i=t._texture.baseTexture,o=r.identity(),s=this.textureSize.height/this.textureSize.width;o.translate(e.x/this.textureSize.width,e.y/this.textureSize.height),o.scale(1,s);var a=this.textureSize.width/i.width,l=this.textureSize.height/i.height;return n.tx/=i.width*a,n.ty/=i.width*a,n.invert(),o.prepend(n),o.scale(1,1/s),o.scale(a,l),o.translate(t.anchor.x,t.anchor.y),o},n.prototype.capFilterArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.textureSize.width&&(e.width=this.textureSize.width-e.x),e.y+e.height>this.textureSize.height&&(e.height=this.textureSize.height-e.y)},n.prototype.resize=function(e,t){this.textureSize.width=e,this.textureSize.height=t;for(var r=0;r<this.texturePool.length;r++)this.texturePool[r].resize(e,t)},n.prototype.destroy=function(){this.quad.destroy(),i.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null}},{"../../../const":16,"../../../math":26,"../utils/Quad":57,"../utils/RenderTarget":58,"./WebGLManager":51}],48:[function(e,t,r){function n(e){i.call(this,e),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var i=e("./WebGLManager"),o=e("../filters/SpriteMaskFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.pushMask=function(e,t){t.texture?this.pushSpriteMask(e,t):this.pushStencilMask(e,t)},n.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.popStencilMask(e,t)},n.prototype.pushSpriteMask=function(e,t){var r=this.alphaMaskPool.pop();r||(r=[new o(t)]),r[0].maskSprite=t,this.renderer.filterManager.pushFilter(e,r)},n.prototype.popSpriteMask=function(){var e=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(e)},n.prototype.pushStencilMask=function(e,t){this.renderer.stencilManager.pushMask(t)},n.prototype.popStencilMask=function(e,t){this.renderer.stencilManager.popMask(t)}},{"../filters/SpriteMaskFilter":45,"./WebGLManager":51}],49:[function(e,t,r){function n(e){i.call(this,e),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var i=e("./WebGLManager"),o=e("../shaders/TextureShader"),s=e("../shaders/ComplexPrimitiveShader"),a=e("../shaders/PrimitiveShader"),u=e("../../../utils");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,u.pluginTarget.mixin(n),t.exports=n,n.prototype.onContextChange=function(){this.initPlugins();var e=this.renderer.gl;this.maxAttibs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.defaultShader=new o(this),this.primitiveShader=new a(this),this.complexPrimitiveShader=new s(this)},n.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(var r in e)this.tempAttribState[e[r]]=!0;var n=this.renderer.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.attribState[t]?n.enableVertexAttribArray(t):n.disableVertexAttribArray(t))},n.prototype.setShader=function(e){return this._currentId===e.uid?!1:(this._currentId=e.uid,this.currentShader=e,this.renderer.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},n.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),i.prototype.destroy.call(this),
this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":70,"../shaders/ComplexPrimitiveShader":52,"../shaders/PrimitiveShader":53,"../shaders/TextureShader":55,"./WebGLManager":51}],50:[function(e,t,r){function n(e){i.call(this,e),this.stencilMaskStack=null}var i=e("./WebGLManager"),o=e("../../../utils");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.stencilStack.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},n.prototype.pushStencil=function(e,t){this.renderer.currentRenderTarget.attachStencilBuffer();var r=this.renderer.gl,n=this.stencilMaskStack;this.bindGraphics(e,t),0===n.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),n.reverse=!0,n.count=0),n.stencilStack.push(t);var i=n.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===t.mode?(r.drawElements(r.TRIANGLE_FAN,t.indices.length-4,r.UNSIGNED_SHORT,0),n.reverse?(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(t.indices.length-4)),n.reverse?r.stencilFunc(r.EQUAL,255-(i+1),255):r.stencilFunc(r.EQUAL,i+1,255),n.reverse=!n.reverse):(n.reverse?(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,t.indices.length,r.UNSIGNED_SHORT,0),n.reverse?r.stencilFunc(r.EQUAL,i+1,255):r.stencilFunc(r.EQUAL,255-(i+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),n.count++},n.prototype.bindGraphics=function(e,t){var r,n=this.renderer.gl;1===t.mode?(r=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(r),n.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,e.worldTransform.toArray(!0)),n.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(r.uniforms.tint._location,o.hex2rgb(e.tint)),n.uniform3fv(r.uniforms.color._location,t.color),n.uniform1f(r.uniforms.alpha._location,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,t.buffer),n.vertexAttribPointer(r.attributes.aVertexPosition,2,n.FLOAT,!1,8,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer)):(r=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(r),n.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,e.worldTransform.toArray(!0)),n.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(r.uniforms.tint._location,o.hex2rgb(e.tint)),n.uniform1f(r.uniforms.alpha._location,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,t.buffer),n.vertexAttribPointer(r.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(r.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer))},n.prototype.popStencil=function(e,t){var r=this.renderer.gl,n=this.stencilMaskStack;if(n.stencilStack.pop(),n.count--,0===n.stencilStack.length)r.disable(r.STENCIL_TEST);else{var i=n.count;this.bindGraphics(e,t),r.colorMask(!1,!1,!1,!1),1===t.mode?(n.reverse=!n.reverse,n.reverse?(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(t.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,t.indices.length-4,r.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,n.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)):(n.reverse?(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,t.indices.length,r.UNSIGNED_SHORT,0),this.renderer.drawCount++,n.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},n.prototype.destroy=function(){i.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},n.prototype.pushMask=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),e.dirty&&this.renderer.plugins.graphics.updateGraphics(e,this.renderer.gl),e._webGL[this.renderer.gl.id].data.length&&this.pushStencil(e,e._webGL[this.renderer.gl.id].data[0])},n.prototype.popMask=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(e,e._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":70,"./WebGLManager":51}],51:[function(e,t,r){function n(e){this.renderer=e,this.renderer.on("context",this.onContextChange,this)}n.prototype.constructor=n,t.exports=n,n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],52:[function(e,t,r){function n(e){i.call(this,e,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var i=e("./Shader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n},{"./Shader":54}],53:[function(e,t,r){function n(e){i.call(this,e,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var i=e("./Shader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n},{"./Shader":54}],54:[function(e,t,r){function n(e,t,r,n,o){if(!t||!r)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=i.uid(),this.gl=e.renderer.gl,this.shaderManager=e,this.program=null,this.uniforms=n||{},this.attributes=o||{},this.textureCount=1,this.vertexSrc=t,this.fragmentSrc=r,this.init()}var i=e("../../../utils");n.prototype.constructor=n,t.exports=n,n.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},n.prototype.cacheUniformLocations=function(e){for(var t=0;t<e.length;++t)this.uniforms[e[t]]._location=this.gl.getUniformLocation(this.program,e[t])},n.prototype.cacheAttributeLocations=function(e){for(var t=0;t<e.length;++t)this.attributes[e[t]]=this.gl.getAttribLocation(this.program,e[t])},n.prototype.compile=function(){var e=this.gl,t=this._glCompile(e.VERTEX_SHADER,this.vertexSrc),r=this._glCompile(e.FRAGMENT_SHADER,this.fragmentSrc),n=e.createProgram();return e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(n,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(n)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(n)),e.deleteProgram(n),n=null),e.deleteShader(t),e.deleteShader(r),this.program=n},n.prototype.syncUniform=function(e){var t,r,n=e._location,o=e.value,s=this.gl;switch(e.type){case"b":case"bool":case"boolean":s.uniform1i(n,o?1:0);break;case"i":case"1i":s.uniform1i(n,o);break;case"f":case"1f":s.uniform1f(n,o);break;case"2f":s.uniform2f(n,o[0],o[1]);break;case"3f":s.uniform3f(n,o[0],o[1],o[2]);break;case"4f":s.uniform4f(n,o[0],o[1],o[2],o[3]);break;case"v2":s.uniform2f(n,o.x,o.y);break;case"v3":s.uniform3f(n,o.x,o.y,o.z);break;case"v4":s.uniform4f(n,o.x,o.y,o.z,o.w);break;case"1iv":s.uniform1iv(n,o);break;case"2iv":s.uniform2iv(n,o);break;case"3iv":s.uniform3iv(n,o);break;case"4iv":s.uniform4iv(n,o);break;case"1fv":s.uniform1fv(n,o);break;case"2fv":s.uniform2fv(n,o);break;case"3fv":s.uniform3fv(n,o);break;case"4fv":s.uniform4fv(n,o);break;case"m2":case"mat2":case"Matrix2fv":s.uniformMatrix2fv(n,e.transpose,o);break;case"m3":case"mat3":case"Matrix3fv":s.uniformMatrix3fv(n,e.transpose,o);break;case"m4":case"mat4":case"Matrix4fv":s.uniformMatrix4fv(n,e.transpose,o);break;case"c":"number"==typeof o&&(o=i.hex2rgb(o)),s.uniform3f(n,o[0],o[1],o[2]);break;case"iv1":s.uniform1iv(n,o);break;case"iv":s.uniform3iv(n,o);break;case"fv1":s.uniform1fv(n,o);break;case"fv":s.uniform3fv(n,o);break;case"v2v":for(e._array||(e._array=new Float32Array(2*o.length)),t=0,r=o.length;r>t;++t)e._array[2*t]=o[t].x,e._array[2*t+1]=o[t].y;s.uniform2fv(n,e._array);break;case"v3v":for(e._array||(e._array=new Float32Array(3*o.length)),t=0,r=o.length;r>t;++t)e._array[3*t]=o[t].x,e._array[3*t+1]=o[t].y,e._array[3*t+2]=o[t].z;s.uniform3fv(n,e._array);break;case"v4v":for(e._array||(e._array=new Float32Array(4*o.length)),t=0,r=o.length;r>t;++t)e._array[4*t]=o[t].x,e._array[4*t+1]=o[t].y,e._array[4*t+2]=o[t].z,e._array[4*t+3]=o[t].w;s.uniform4fv(n,e._array);break;case"t":case"sampler2D":if(!e.value||!e.value.baseTexture.hasLoaded)break;s.activeTexture(s["TEXTURE"+this.textureCount]);var a=e.value.baseTexture._glTextures[s.id];a||(this.initSampler2D(e),a=e.value.baseTexture._glTextures[s.id]),s.bindTexture(s.TEXTURE_2D,a),s.uniform1i(e._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+e.type)}},n.prototype.syncUniforms=function(){this.textureCount=1;for(var e in this.uniforms)this.syncUniform(this.uniforms[e])},n.prototype.initSampler2D=function(e){var t=this.gl,r=e.value.baseTexture;if(r.hasLoaded)if(e.textureData){var n=e.textureData;r._glTextures[t.id]=t.createTexture(),t.bindTexture(t.TEXTURE_2D,r._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,n.luminance?t.LUMINANCE:t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n.magFilter?n.magFilter:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n.wrapS?n.wrapS:t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,n.wrapS?n.wrapS:t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,n.wrapT?n.wrapT:t.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(r)},n.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},n.prototype._glCompile=function(e,t){var r=this.gl.createShader(e);return this.gl.shaderSource(r,t),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(console.log(this.gl.getShaderInfoLog(r)),null)}},{"../../../utils":70}],55:[function(e,t,r){function n(e,t,r,o,s){var a={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(o)for(var u in o)a[u]=o[u];var l={aVertexPosition:0,aTextureCoord:0,aColor:0};if(s)for(var h in s)l[h]=s[h];t=t||n.defaultVertexSrc,r=r||n.defaultFragmentSrc,i.call(this,e,t,r,a,l)}var i=e("./Shader");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),n.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":54}],56:[function(e,t,r){function n(e){i.call(this,e)}var i=e("../managers/WebGLManager");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.flush=function(){},n.prototype.render=function(e){}},{"../managers/WebGLManager":51}],57:[function(e,t,r){function n(e){this.gl=e,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,128,e.DYNAMIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),this.upload()}n.prototype.constructor=n,n.prototype.map=function(e,t){var r=0,n=0;this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+t.width/e.width,this.uvs[3]=n,this.uvs[4]=r+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=r,this.uvs[7]=n+t.height/e.height,r=t.x,n=t.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+t.width,this.vertices[3]=n,this.vertices[4]=r+t.width,this.vertices[5]=n+t.height,this.vertices[6]=r,this.vertices[7]=n+t.height,this.upload()},n.prototype.upload=function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.bufferSubData(e.ARRAY_BUFFER,32,this.uvs),e.bufferSubData(e.ARRAY_BUFFER,64,this.colors)},n.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},t.exports=n},{}],58:[function(e,t,r){var n=e("../../../math"),i=e("../../../utils"),o=e("../../../const"),s=e("./StencilMaskStack"),a=function(e,t,r,a,u,l){if(this.gl=e,this.frameBuffer=null,this.texture=null,this.size=new n.Rectangle(0,0,1,1),this.resolution=u||o.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new s,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=a||o.SCALE_MODES.DEFAULT,this.root=l,!this.root){this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,a===o.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,a===o.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST);var h=i.isPowerOfTwo(t,r);h?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0)}this.resize(t,r)};a.prototype.constructor=a,t.exports=a,a.prototype.clear=function(e){var t=this.gl;e&&t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},a.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var e=this.gl;this.stencilBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencilBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},a.prototype.activate=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer);var t=this.frame||this.size;this.calculateProjection(t),this.transform&&this.projectionMatrix.append(this.transform),e.viewport(0,0,t.width*this.resolution,t.height*this.resolution)},a.prototype.calculateProjection=function(e){var t=this.projectionMatrix;t.identity(),this.root?(t.a=1/e.width*2,t.d=-1/e.height*2,t.tx=-1-e.x*t.a,t.ty=1-e.y*t.d):(t.a=1/e.width*2,t.d=1/e.height*2,t.tx=-1-e.x*t.a,t.ty=-1-e.y*t.d)},a.prototype.resize=function(e,t){if(e=0|e,t=0|t,this.size.width!==e||this.size.height!==t){if(this.size.width=e,this.size.height=t,!this.root){var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e*this.resolution,t*this.resolution,0,r.RGBA,r.UNSIGNED_BYTE,null),this.stencilBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencilBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e*this.resolution,t*this.resolution))}var n=this.frame||this.size;this.calculateProjection(n)}},a.prototype.destroy=function(){var e=this.gl;e.deleteRenderbuffer(this.stencilBuffer),e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":16,"../../../math":26,"../../../utils":70,"./StencilMaskStack":59}],59:[function(e,t,r){function n(){this.stencilStack=[],this.reverse=!0,this.count=0}n.prototype.constructor=n,t.exports=n},{}],60:[function(e,t,r){function n(e){s.call(this),this.anchor=new i.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=e||o.EMPTY}var i=e("../math"),o=e("../textures/Texture"),s=e("../display/Container"),a=e("../renderers/canvas/utils/CanvasTinter"),u=e("../utils"),l=e("../const"),h=new i.Point;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(e){var t=u.sign(this.scale.x)||1;this.scale.x=t*e/this.texture._frame.width,this._width=e}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(e){var t=u.sign(this.scale.y)||1;this.scale.y=t*e/this.texture._frame.height,this._height=e}},texture:{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this.cachedTint=16777215,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}}),n.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=u.sign(this.scale.x)*this._width/this.texture.frame.width),this._height&&(this.scale.y=u.sign(this.scale.y)*this._height/this.texture.frame.height)},n.prototype._renderWebGL=function(e){e.setObjectRenderer(e.plugins.sprite),e.plugins.sprite.render(this)},n.prototype.getBounds=function(e){if(!this._currentBounds){var t,r,n,i,o=this._texture._frame.width,s=this._texture._frame.height,a=o*(1-this.anchor.x),u=o*-this.anchor.x,l=s*(1-this.anchor.y),h=s*-this.anchor.y,c=e||this.worldTransform,d=c.a,p=c.b,f=c.c,g=c.d,v=c.tx,m=c.ty,y=d*u+f*h+v,x=g*h+p*u+m,b=d*a+f*h+v,_=g*h+p*a+m,w=d*a+f*l+v,T=g*l+p*a+m,E=d*u+f*l+v,S=g*l+p*u+m;if(t=y,t=t>b?b:t,t=t>w?w:t,t=t>E?E:t,n=x,n=n>_?_:n,n=n>T?T:n,n=n>S?S:n,r=y,r=b>r?b:r,r=w>r?w:r,r=E>r?E:r,i=x,i=_>i?_:i,i=T>i?T:i,i=S>i?S:i,this.children.length){var C=this.containerGetBounds();a=C.x,u=C.x+C.width,l=C.y,h=C.y+C.height,t=a>t?t:a,n=l>n?n:l,r=r>u?r:u,i=i>h?i:h}var A=this._bounds;A.x=t,A.width=r-t,A.y=n,A.height=i-n,this._currentBounds=A}return this._currentBounds},n.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},n.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,h);var t,r=this._texture._frame.width,n=this._texture._frame.height,i=-r*this.anchor.x;return h.x>i&&h.x<i+r&&(t=-n*this.anchor.y,h.y>t&&h.y<t+n)?!0:!1},n.prototype._renderCanvas=function(e){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)){var t=e.blendModes[this.blendMode];if(t!==e.context.globalCompositeOperation&&(e.context.globalCompositeOperation=t),this.texture.valid){var r,n,i,o,s=this._texture,u=this.worldTransform;e.context.globalAlpha=this.worldAlpha;var h=s.baseTexture.scaleMode===l.SCALE_MODES.LINEAR;if(e.smoothProperty&&e.context[e.smoothProperty]!==h&&(e.context[e.smoothProperty]=h),s.rotate){i=s.crop.height,o=s.crop.width,r=s.trim?s.trim.y-this.anchor.y*s.trim.height:this.anchor.y*-s._frame.height,n=s.trim?s.trim.x-this.anchor.x*s.trim.width:this.anchor.x*-s._frame.width,r+=i,u.tx=n*u.a+r*u.c+u.tx,u.ty=n*u.b+r*u.d+u.ty;var c=u.a;u.a=-u.c,u.c=c,c=u.b,u.b=-u.d,u.d=c,r=0,n=0}else i=s.crop.width,o=s.crop.height,r=s.trim?s.trim.x-this.anchor.x*s.trim.width:this.anchor.x*-s._frame.width,n=s.trim?s.trim.y-this.anchor.y*s.trim.height:this.anchor.y*-s._frame.height;e.roundPixels?(e.context.setTransform(u.a,u.b,u.c,u.d,u.tx*e.resolution|0,u.ty*e.resolution|0),r=0|r,n=0|n):e.context.setTransform(u.a,u.b,u.c,u.d,u.tx*e.resolution,u.ty*e.resolution);var d=s.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),e.context.drawImage(this.tintedTexture,0,0,i*d,o*d,r*e.resolution,n*e.resolution,i*e.resolution,o*e.resolution)):e.context.drawImage(s.baseTexture.source,s.crop.x*d,s.crop.y*d,i*d,o*d,r*e.resolution,n*e.resolution,i*e.resolution,o*e.resolution)}}},n.prototype.destroy=function(e,t){s.prototype.destroy.call(this),this.anchor=null,e&&this._texture.destroy(t),this._texture=null,this.shader=null},n.fromFrame=function(e){var t=u.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new n(t)},n.fromImage=function(e,t,r){return new n(o.fromImage(e,t,r))}},{"../const":16,"../display/Container":17,"../math":26,"../renderers/canvas/utils/CanvasTinter":41,"../textures/Texture":65,"../utils":70}],61:[function(e,t,r){function n(e){i.call(this,e),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=s.SPRITE_BATCH_SIZE;var t=4*this.size*this.vertByteSize,r=6*this.size;this.vertices=new ArrayBuffer(t),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(r);for(var n=0,o=0;r>n;n+=6,o+=4)this.indices[n+0]=o+0,this.indices[n+1]=o+1,this.indices[n+2]=o+2,this.indices[n+3]=o+0,this.indices[n+4]=o+2,this.indices[n+5]=o+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var i=e("../../renderers/webgl/utils/ObjectRenderer"),o=e("../../renderers/webgl/WebGLRenderer"),s=e("../../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,o.registerPlugin("sprite",n),n.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999},n.prototype.render=function(e){var t=e._texture;this.currentBatchSize>=this.size&&this.flush();var r=t._uvs;if(r){var n,i,o,s,a=e.anchor.x,u=e.anchor.y;if(t.trim&&void 0===e.tileScale){var l=t.trim;i=l.x-a*l.width,n=i+t.crop.width,s=l.y-u*l.height,o=s+t.crop.height}else n=t._frame.width*(1-a),i=t._frame.width*-a,o=t._frame.height*(1-u),s=t._frame.height*-u;var h=this.currentBatchSize*this.vertByteSize,c=e.worldTransform,d=c.a,p=c.b,f=c.c,g=c.d,v=c.tx,m=c.ty,y=this.colors,x=this.positions;if(this.renderer.roundPixels){var b=this.renderer.resolution;x[h]=((d*i+f*s+v)*b|0)/b,x[h+1]=((g*s+p*i+m)*b|0)/b,x[h+5]=((d*n+f*s+v)*b|0)/b,x[h+6]=((g*s+p*n+m)*b|0)/b,x[h+10]=((d*n+f*o+v)*b|0)/b,x[h+11]=((g*o+p*n+m)*b|0)/b,x[h+15]=((d*i+f*o+v)*b|0)/b,x[h+16]=((g*o+p*i+m)*b|0)/b}else x[h]=d*i+f*s+v,x[h+1]=g*s+p*i+m,x[h+5]=d*n+f*s+v,x[h+6]=g*s+p*n+m,x[h+10]=d*n+f*o+v,x[h+11]=g*o+p*n+m,x[h+15]=d*i+f*o+v,x[h+16]=g*o+p*i+m;x[h+2]=r.x0,x[h+3]=r.y0,x[h+7]=r.x1,x[h+8]=r.y1,x[h+12]=r.x2,x[h+13]=r.y2,x[h+17]=r.x3,x[h+18]=r.y3;var _=e.tint;y[h+4]=y[h+9]=y[h+14]=y[h+19]=(_>>16)+(65280&_)+((255&_)<<16)+(255*e.worldAlpha<<24),this.sprites[this.currentBatchSize++]=e}},n.prototype.flush=function(){if(0!==this.currentBatchSize){var e,t=this.renderer.gl;if(this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var r=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);t.bufferSubData(t.ARRAY_BUFFER,0,r)}for(var n,i,o,s,a=0,u=0,l=null,h=this.renderer.blendModeManager.currentBlendMode,c=null,d=!1,p=!1,f=0,g=this.currentBatchSize;g>f;f++)s=this.sprites[f],n=s._texture.baseTexture,i=s.blendMode,o=s.shader||this.shader,d=h!==i,p=c!==o,(l!==n||d||p)&&(this.renderBatch(l,a,u),u=f,a=0,l=n,d&&(h=i,this.renderer.blendModeManager.setBlendMode(h)),p&&(c=o,e=c.shaders?c.shaders[t.id]:c,e||(e=c.getShader(this.renderer)),this.renderer.shaderManager.setShader(e),e.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),e.syncUniforms(),t.activeTexture(t.TEXTURE0))),a++;this.renderBatch(l,a,u),this.currentBatchSize=0}},n.prototype.renderBatch=function(e,t,r){if(0!==t){var n=this.renderer.gl;e._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,e._glTextures[n.id]):this.renderer.updateTexture(e),n.drawElements(n.TRIANGLES,6*t,n.UNSIGNED_SHORT,6*r*2),this.renderer.drawCount++}},n.prototype.start=function(){var e=this.renderer.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.vertByteSize;e.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,e.FLOAT,!1,t,0),e.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,e.FLOAT,!1,t,8),e.vertexAttribPointer(this.shader.attributes.aColor,4,e.UNSIGNED_BYTE,!0,t,16)},n.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{"../../const":16,"../../renderers/webgl/WebGLRenderer":42,"../../renderers/webgl/utils/ObjectRenderer":56}],62:[function(e,t,r){function n(e,t,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||u.RESOLUTION,this._text=null,this._style=null;var n=o.fromCanvas(this.canvas);n.trim=new s.Rectangle,i.call(this,n),this.text=e,this.style=t}var i=e("../sprites/Sprite"),o=e("../textures/Texture"),s=e("../math"),a=e("../utils"),u=e("../const");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.fontPropertiesCache={},n.fontPropertiesCanvas=document.createElement("canvas"),n.fontPropertiesContext=n.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(n.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(e){this.scale.x=e/this._texture._frame.width,this._width=e}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(e){this.scale.y=e/this._texture._frame.height,this._height=e}},style:{get:function(){return this._style},set:function(e){e=e||{},"number"==typeof e.fill&&(e.fill=a.hex2string(e.fill)),"number"==typeof e.stroke&&(e.stroke=a.hex2string(e.stroke)),"number"==typeof e.dropShadowColor&&(e.dropShadowColor=a.hex2string(e.dropShadowColor)),e.font=e.font||"bold 20pt Arial",e.fill=e.fill||"black",e.align=e.align||"left",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.dropShadow=e.dropShadow||!1,e.dropShadowColor=e.dropShadowColor||"#000000",e.dropShadowAngle=void 0!==e.dropShadowAngle?e.dropShadowAngle:Math.PI/6,e.dropShadowDistance=void 0!==e.dropShadowDistance?e.dropShadowDistance:5,e.dropShadowBlur=void 0!==e.dropShadowBlur?e.dropShadowBlur:0,e.padding=e.padding||0,e.textBaseline=e.textBaseline||"alphabetic",e.lineJoin=e.lineJoin||"miter",e.miterLimit=e.miterLimit||10,this._style=e,this.dirty=!0}},text:{get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}}}),n.prototype.updateText=function(){var e=this._style;this.context.font=e.font;for(var t=e.wordWrap?this.wordWrap(this._text):this._text,r=t.split(/(?:\r\n|\r|\n)/),n=new Array(r.length),i=0,o=this.determineFontProperties(e.font),s=0;s<r.length;s++){var a=this.context.measureText(r[s]).width;n[s]=a,i=Math.max(i,a)}var u=i+e.strokeThickness;e.dropShadow&&(u+=e.dropShadowDistance),this.canvas.width=(u+this.context.lineWidth)*this.resolution;var l=this.style.lineHeight||o.fontSize+e.strokeThickness,h=l*r.length;e.dropShadow&&(h+=e.dropShadowDistance),this.canvas.height=(h+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=e.font,this.context.strokeStyle=e.stroke,this.context.lineWidth=e.strokeThickness,this.context.textBaseline=e.textBaseline,this.context.lineJoin=e.lineJoin,this.context.miterLimit=e.miterLimit;var c,d;if(e.dropShadow){e.dropShadowBlur>0?(this.context.shadowColor=e.dropShadowColor,this.context.shadowBlur=e.dropShadowBlur):this.context.fillStyle=e.dropShadowColor;var p=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,f=Math.sin(e.dropShadowAngle)*e.dropShadowDistance;for(s=0;s<r.length;s++)c=e.strokeThickness/2,d=e.strokeThickness/2+s*l+o.ascent,"right"===e.align?c+=i-n[s]:"center"===e.align&&(c+=(i-n[s])/2),e.fill&&this.context.fillText(r[s],c+p,d+f+this._style.padding)}for(this.context.fillStyle=e.fill,s=0;s<r.length;s++)c=e.strokeThickness/2,d=e.strokeThickness/2+s*l+o.ascent,"right"===e.align?c+=i-n[s]:"center"===e.align&&(c+=(i-n[s])/2),e.stroke&&e.strokeThickness&&this.context.strokeText(r[s],c,d+this._style.padding),e.fill&&this.context.fillText(r[s],c,d+this._style.padding);this.updateTexture()},n.prototype.updateTexture=function(){var e=this._texture;e.baseTexture.hasLoaded=!0,e.baseTexture.resolution=this.resolution,e.baseTexture.width=this.canvas.width/this.resolution,e.baseTexture.height=this.canvas.height/this.resolution,e.crop.width=e._frame.width=this.canvas.width/this.resolution,e.crop.height=e._frame.height=this.canvas.height/this.resolution,e.trim.x=0,e.trim.y=-this._style.padding,e.trim.width=e._frame.width,e.trim.height=e._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,e.baseTexture.emit("update",e.baseTexture),this.dirty=!1},n.prototype.renderWebGL=function(e){this.dirty&&this.updateText(),i.prototype.renderWebGL.call(this,e)},n.prototype._renderCanvas=function(e){this.dirty&&this.updateText(),i.prototype._renderCanvas.call(this,e)},n.prototype.determineFontProperties=function(e){var t=n.fontPropertiesCache[e];if(!t){t={};var r=n.fontPropertiesCanvas,i=n.fontPropertiesContext;i.font=e;var o=Math.ceil(i.measureText("|Mq").width),s=Math.ceil(i.measureText("M").width),a=2*s;s=1.4*s|0,
r.width=o,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mq",0,s);var u,l,h=i.getImageData(0,0,o,a).data,c=h.length,d=4*o,p=0,f=!1;for(u=0;s>u;u++){for(l=0;d>l;l+=4)if(255!==h[p+l]){f=!0;break}if(f)break;p+=d}for(t.ascent=s-u,p=c-d,f=!1,u=a;u>s;u--){for(l=0;d>l;l+=4)if(255!==h[p+l]){f=!0;break}if(f)break;p-=d}t.descent=u-s,t.fontSize=t.ascent+t.descent,n.fontPropertiesCache[e]=t}return t},n.prototype.wordWrap=function(e){for(var t="",r=e.split("\n"),n=this._style.wordWrapWidth,i=0;i<r.length;i++){for(var o=n,s=r[i].split(" "),a=0;a<s.length;a++){var u=this.context.measureText(s[a]).width,l=u+this.context.measureText(" ").width;0===a||l>o?(a>0&&(t+="\n"),t+=s[a],o=n-u):(o-=l,t+=" "+s[a])}i<r.length-1&&(t+="\n")}return t},n.prototype.getBounds=function(e){return this.dirty&&this.updateText(),i.prototype.getBounds.call(this,e)},n.prototype.destroy=function(e){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===e?!0:e)}},{"../const":16,"../math":26,"../sprites/Sprite":60,"../textures/Texture":65,"../utils":70}],63:[function(e,t,r){function n(e,t,r){s.call(this),this.uid=i.uid(),this.resolution=r||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=t||o.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},e&&this.loadSource(e)}var i=e("../utils"),o=e("../const"),s=e("eventemitter3");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=i.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},n.prototype.loadSource=function(e){var t=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=e,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!e.getContext){this.isLoading=!0;var r=this;e.onload=function(){e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),r.emit("loaded",r))},e.onerror=function(){e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},e.complete&&e.src&&(this.isLoading=!1,e.onload=null,e.onerror=null,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this))}},n.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},n.prototype.destroy=function(){this.imageUrl?(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},n.prototype.dispose=function(){this.emit("dispose",this)},n.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},n.fromImage=function(e,t,r){var o=i.BaseTextureCache[e];if(void 0===t&&0!==e.indexOf("data:")&&(t=!0),!o){var s=new Image;t&&(s.crossOrigin=""),o=new n(s,r),o.imageUrl=e,s.src=e,i.BaseTextureCache[e]=o,o.resolution=i.getResolutionOfUrl(e)}return o},n.fromCanvas=function(e,t){e._pixiId||(e._pixiId="canvas_"+i.uid());var r=i.BaseTextureCache[e._pixiId];return r||(r=new n(e,t),i.BaseTextureCache[e._pixiId]=r),r}},{"../const":16,"../utils":70,eventemitter3:10}],64:[function(e,t,r){function n(e,t,r,n,c){if(!e)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");t=t||100,r=r||100,c=c||h.RESOLUTION;var d=new i;if(d.width=t,d.height=r,d.resolution=c,d.scaleMode=n||h.SCALE_MODES.DEFAULT,d.hasLoaded=!0,o.call(this,d,new l.Rectangle(0,0,t,r)),this.width=t,this.height=r,this.resolution=c,this.render=null,this.renderer=e,this.renderer.type===h.RENDERER_TYPE.WEBGL){var p=this.renderer.gl;this.textureBuffer=new s(p,this.width,this.height,d.scaleMode,this.resolution),this.baseTexture._glTextures[p.id]=this.textureBuffer.texture,this.filterManager=new a(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(t,r),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new u(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var i=e("./BaseTexture"),o=e("./Texture"),s=e("../renderers/webgl/utils/RenderTarget"),a=e("../renderers/webgl/managers/FilterManager"),u=e("../renderers/canvas/utils/CanvasBuffer"),l=e("../math"),h=e("../const"),c=new l.Matrix;n.prototype=Object.create(o.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.resize=function(e,t,r){(e!==this.width||t!==this.height)&&(this.valid=e>0&&t>0,this.width=this._frame.width=this.crop.width=e,this.height=this._frame.height=this.crop.height=t,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},n.prototype.clear=function(){this.valid&&(this.renderer.type===h.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.prototype.renderWebGL=function(e,t,r,n){if(this.valid){if(n=void 0!==n?n:!0,this.textureBuffer.transform=t,this.textureBuffer.activate(),e.worldAlpha=1,n){e.worldTransform.identity(),e.currentBounds=null;var i,o,s=e.children;for(i=0,o=s.length;o>i;++i)s[i].updateTransform()}var a=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(e,this.textureBuffer,r),this.renderer.filterManager=a}},n.prototype.renderCanvas=function(e,t,r,n){if(this.valid){n=!!n;var i=c;i.identity(),t&&i.append(t);var o=e.worldTransform;e.worldTransform=i,e.worldAlpha=1;var s,a,u=e.children;for(s=0,a=u.length;a>s;++s)u[s].updateTransform();r&&this.textureBuffer.clear();var l=this.textureBuffer.context,h=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(e,l),this.renderer.resolution=h,e.worldTransform===i&&(e.worldTransform=o)}},n.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},n.prototype.getImage=function(){var e=new Image;return e.src=this.getBase64(),e},n.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.prototype.getCanvas=function(){if(this.renderer.type===h.RENDERER_TYPE.WEBGL){var e=this.renderer.gl,t=this.textureBuffer.size.width,r=this.textureBuffer.size.height,n=new Uint8Array(4*t*r);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer),e.readPixels(0,0,t,r,e.RGBA,e.UNSIGNED_BYTE,n),e.bindFramebuffer(e.FRAMEBUFFER,null);var i=new u(t,r),o=i.context.getImageData(0,0,t,r);return o.data.set(n),i.context.putImageData(o,0,0),i.canvas}return this.textureBuffer.canvas},n.prototype.getPixels=function(){var e,t;if(this.renderer.type===h.RENDERER_TYPE.WEBGL){var r=this.renderer.gl;e=this.textureBuffer.size.width,t=this.textureBuffer.size.height;var n=new Uint8Array(4*e*t);return r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),r.readPixels(0,0,e,t,r.RGBA,r.UNSIGNED_BYTE,n),r.bindFramebuffer(r.FRAMEBUFFER,null),n}return e=this.textureBuffer.canvas.width,t=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,e,t).data},n.prototype.getPixel=function(e,t){if(this.renderer.type===h.RENDERER_TYPE.WEBGL){var r=this.renderer.gl,n=new Uint8Array(4);return r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),r.readPixels(e,t,1,1,r.RGBA,r.UNSIGNED_BYTE,n),r.bindFramebuffer(r.FRAMEBUFFER,null),n}return this.textureBuffer.canvas.getContext("2d").getImageData(e,t,1,1).data}},{"../const":16,"../math":26,"../renderers/canvas/utils/CanvasBuffer":38,"../renderers/webgl/managers/FilterManager":47,"../renderers/webgl/utils/RenderTarget":58,"./BaseTexture":63,"./Texture":65}],65:[function(e,t,r){function n(e,t,r,i,o){a.call(this),this.noFrame=!1,t||(this.noFrame=!0,t=new u.Rectangle(0,0,1,1)),e instanceof n&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||t,this.rotate=!!o,e.hasLoaded?(this.noFrame&&(t=new u.Rectangle(0,0,e.width,e.height),e.on("update",this.onBaseTextureUpdated,this)),this.frame=t):e.once("loaded",this.onBaseTextureLoaded,this)}var i=e("./BaseTexture"),o=e("./VideoBaseTexture"),s=e("./TextureUvs"),a=e("eventemitter3"),u=e("../math"),l=e("../utils");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{frame:{get:function(){return this._frame},set:function(e){if(this._frame=e,this.noFrame=!1,this.width=e.width,this.height=e.height,!this.trim&&!this.rotate&&(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=e&&e.width&&e.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=e,this.valid&&this._updateUvs()}}}),n.prototype.update=function(){this.baseTexture.update()},n.prototype.onBaseTextureLoaded=function(e){this.noFrame?this.frame=new u.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.emit("update",this)},n.prototype.onBaseTextureUpdated=function(e){this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},n.prototype.destroy=function(e){this.baseTexture&&(e&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},n.prototype.clone=function(){return new n(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},n.prototype._updateUvs=function(){this._uvs||(this._uvs=new s),this._uvs.set(this.crop,this.baseTexture,this.rotate)},n.fromImage=function(e,t,r){var o=l.TextureCache[e];return o||(o=new n(i.fromImage(e,t,r)),l.TextureCache[e]=o),o},n.fromFrame=function(e){var t=l.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},n.fromCanvas=function(e,t){return new n(i.fromCanvas(e,t))},n.fromVideo=function(e,t){return"string"==typeof e?n.fromVideoUrl(e,t):new n(o.fromVideo(e,t))},n.fromVideoUrl=function(e,t){return new n(o.fromUrl(e,t))},n.addTextureToCache=function(e,t){l.TextureCache[t]=e},n.removeTextureFromCache=function(e){var t=l.TextureCache[e];return delete l.TextureCache[e],delete l.BaseTextureCache[e],t},n.EMPTY=new n(new i)},{"../math":26,"../utils":70,"./BaseTexture":63,"./TextureUvs":66,"./VideoBaseTexture":67,eventemitter3:10}],66:[function(e,t,r){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}t.exports=n,n.prototype.set=function(e,t,r){var n=t.width,i=t.height;r?(this.x0=(e.x+e.height)/n,this.y0=e.y/i,this.x1=(e.x+e.height)/n,this.y1=(e.y+e.width)/i,this.x2=e.x/n,this.y2=(e.y+e.width)/i,this.x3=e.x/n,this.y3=e.y/i):(this.x0=e.x/n,this.y0=e.y/i,this.x1=(e.x+e.width)/n,this.y1=e.y/i,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/i,this.x3=e.x/n,this.y3=(e.y+e.height)/i)}},{}],67:[function(e,t,r){function n(e,t){if(!e)throw new Error("No video source element specified.");(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),o.call(this,e,t),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),e.complete||(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function i(e,t){t||(t="video/"+e.substr(e.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=e,r.type=t,r}var o=e("./BaseTexture"),s=e("../utils");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,t.exports=n,n.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},n.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},n.prototype._onPlayStop=function(){this.autoUpdate=!1},n.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},n.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete s.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),o.prototype.destroy.call(this)},n.fromVideo=function(e,t){e._pixiId||(e._pixiId="video_"+s.uid());var r=s.BaseTextureCache[e._pixiId];return r||(r=new n(e,t),s.BaseTextureCache[e._pixiId]=r),r},n.fromUrl=function(e,t){var r=document.createElement("video");if(Array.isArray(e))for(var o=0;o<e.length;++o)r.appendChild(i(e[o].src||e[o],e[o].mime));else r.appendChild(i(e.src||e,e.mime));return r.load(),r.play(),n.fromVideo(r,t)},n.fromUrls=n.fromUrl},{"../utils":70,"./BaseTexture":63}],68:[function(e,t,r){function n(){var e=this;this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._emitter.listeners(s,!0)&&(e._requestId=requestAnimationFrame(e._tick)))},this._emitter=new o,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var i=e("../const"),o=e("eventemitter3"),s="tick";Object.defineProperties(n.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,i.TARGET_FPMS);this._maxElapsedMS=1/t}}}),n.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(s,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(e,t){return this._emitter.on(s,e,t),this._startIfPossible(),this},n.prototype.addOnce=function(e,t){return this._emitter.once(s,e,t),this._startIfPossible(),this},n.prototype.remove=function(e,t){return this._emitter.off(s,e,t),this._emitter.listeners(s,!0)||this._cancelIfNeeded(),this},n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.update=function(e){var t;e=e||performance.now(),t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*i.TARGET_FPMS*this.speed,this._emitter.emit(s,this.deltaTime),this.lastTime=e},t.exports=n},{"../const":16,eventemitter3:10}],69:[function(e,t,r){var n=e("./Ticker"),i=new n;i.autoStart=!0,t.exports={shared:i,Ticker:n}},{"./Ticker":68}],70:[function(e,t,r){var n=e("../const"),i=t.exports={_uid:0,_saidHello:!1,EventEmitter:e("eventemitter3"),pluginTarget:e("./pluginTarget"),async:e("async"),uid:function(){return++i._uid},hex2rgb:function(e,t){return t=t||[],t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t},hex2string:function(e){return e=e.toString(16),e="000000".substr(0,6-e.length)+e,"#"+e},rgb2hex:function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",r=new Image;r.src=e+"AP804Oa6"+t;var n=new Image;n.src=e+"/wCKxvRF"+t;var i=document.createElement("canvas");i.width=6,i.height=1;var o=i.getContext("2d");o.globalCompositeOperation="multiply",o.drawImage(r,0,0),o.drawImage(n,2,0);var s=o.getImageData(2,0,1,1).data;return 255===s[0]&&0===s[1]&&0===s[2]},getNextPowerOfTwo:function(e){if(e>0&&0===(e&e-1))return e;for(var t=1;e>t;)t<<=1;return t},isPowerOfTwo:function(e,t){return e>0&&0===(e&e-1)&&t>0&&0===(t&t-1)},getResolutionOfUrl:function(e){var t=n.RETINA_PREFIX.exec(e);return t?parseFloat(t[1]):1},sayHello:function(e){if(!i._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c Pixi.js "+n.VERSION+" -  "+e+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("Pixi.js "+n.VERSION+" - "+e+" - http://www.pixijs.com/");i._saidHello=!0}},isWebGLSupported:function(){var e={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);return!(!r||!r.getContextAttributes().stencil)}catch(n){return!1}},sign:function(e){return e?0>e?-1:1:0},removeItems:function(e,t,r){var n=e.length;if(!(t>=n||0===r)){r=t+r>n?n-t:r;for(var i=t,o=n-r;o>i;++i)e[i]=e[i+r];e.length=o}},TextureCache:{},BaseTextureCache:{}}},{"../const":16,"./pluginTarget":71,async:1,eventemitter3:10}],71:[function(e,t,r){function n(e){e.__plugins={},e.registerPlugin=function(t,r){e.__plugins[t]=r},e.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var t in e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}t.exports={mixin:function(e){n(e)}}},{}],72:[function(e,t,r){var n=e("./core"),i=e("./mesh"),o=e("./extras"),s=e("./filters");n.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},n.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(n,{Stage:{get:function(){return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),n.Container}},DisplayObjectContainer:{get:function(){return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),n.Container}},Strip:{get:function(){return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),i.Mesh}},Rope:{get:function(){return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),i.Rope}},MovieClip:{get:function(){return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),o.MovieClip}},TilingSprite:{get:function(){return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),o.TilingSprite}},BitmapText:{get:function(){return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),o.BitmapText}},blendModes:{get:function(){return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),n.BLEND_MODES}},scaleModes:{get:function(){return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),n.SCALE_MODES}},BaseTextureCache:{get:function(){return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),n.utils.BaseTextureCache}},TextureCache:{get:function(){return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),n.utils.TextureCache}},math:{get:function(){return console.warn("The math namespace is deprecated, please access members already accessible on PIXI."),n}}}),n.Sprite.prototype.setTexture=function(e){this.texture=e,console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},o.BitmapText.prototype.setText=function(e){this.text=e,console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},n.Text.prototype.setText=function(e){this.text=e,console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},n.Text.prototype.setStyle=function(e){this.style=e,console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},n.Texture.prototype.setFrame=function(e){this.frame=e,console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(s,{AbstractFilter:{get:function(){return console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on."),n.AbstractFilter}},FXAAFilter:{get:function(){return console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on."),n.FXAAFilter}},SpriteMaskFilter:{get:function(){return console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),n.SpriteMaskFilter}}}),n.utils.uuid=function(){return console.warn("utils.uuid() is deprecated, please use utils.uid() from now on."),n.utils.uid()}},{"./core":23,"./extras":79,"./filters":96,"./mesh":121}],73:[function(e,t,r){function n(e,t){i.Container.call(this),t=t||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==t.tint?t.tint:16777215,align:t.align||"left",name:null,size:0},this.font=t.font,this._text=e,this.maxWidth=0,this.maxLineHeight=0,this.dirty=!1,this.updateText()}var i=e("../core");n.prototype=Object.create(i.Container.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{tint:{get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&e>=0?e:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=e.length>=2?parseInt(e[0],10):n.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}}}),n.prototype.updateText=function(){for(var e=n.fonts[this._font.name],t=new i.Point,r=null,o=[],s=0,a=0,u=[],l=0,h=this._font.size/e.size,c=-1,d=0,p=0;p<this.text.length;p++){var f=this.text.charCodeAt(p);if(c=/(\s)/.test(this.text.charAt(p))?p:c,/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))u.push(s),a=Math.max(a,s),l++,t.x=0,t.y+=e.lineHeight,r=null;else if(-1!==c&&this.maxWidth>0&&t.x*h>this.maxWidth)i.utils.removeItems(o,c,p-c),p=c,c=-1,u.push(s),a=Math.max(a,s),l++,t.x=0,t.y+=e.lineHeight,r=null;else{var g=e.chars[f];g&&(r&&g.kerning[r]&&(t.x+=g.kerning[r]),o.push({texture:g.texture,line:l,charCode:f,position:new i.Point(t.x+g.xOffset,t.y+g.yOffset)}),s=t.x+(g.texture.width+g.xOffset),t.x+=g.xAdvance,d=Math.max(d,g.yOffset+g.texture.height),r=f)}}u.push(s),a=Math.max(a,s);var v=[];for(p=0;l>=p;p++){var m=0;"right"===this._font.align?m=a-u[p]:"center"===this._font.align&&(m=(a-u[p])/2),v.push(m)}var y=o.length,x=this.tint;for(p=0;y>p;p++){var b=this._glyphs[p];b?b.texture=o[p].texture:(b=new i.Sprite(o[p].texture),this._glyphs.push(b)),b.position.x=(o[p].position.x+v[o[p].line])*h,b.position.y=o[p].position.y*h,b.scale.x=b.scale.y=h,b.tint=x,b.parent||this.addChild(b)}for(p=y;p<this._glyphs.length;++p)this.removeChild(this._glyphs[p]);this.textWidth=a*h,this.textHeight=(t.y+e.lineHeight)*h,this.maxLineHeight=d*h},n.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},n.prototype.getLocalBounds=function(){return this.validate(),i.Container.prototype.getLocalBounds.call(this)},n.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},n.fonts={}},{"../core":23}],74:[function(e,t,r){function n(e){i.Sprite.call(this,e[0]instanceof i.Texture?e[0]:e[0].texture),this._textures=null,this._durations=null,this.textures=e,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var i=e("../core");n.prototype=Object.create(i.Sprite.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(e){if(e[0]instanceof i.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}}},currentFrame:{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return 0>e&&(e+=this._textures.length),e}}}),n.prototype.stop=function(){this.playing&&(this.playing=!1,i.ticker.shared.remove(this.update,this))},n.prototype.play=function(){this.playing||(this.playing=!0,i.ticker.shared.add(this.update,this))},n.prototype.gotoAndStop=function(e){this.stop(),this._currentTime=e,this._texture=this._textures[this.currentFrame]},n.prototype.gotoAndPlay=function(e){this._currentTime=e,this.play()},n.prototype.update=function(e){var t=this.animationSpeed*e;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;0>r;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):this._texture=this._textures[this.currentFrame]},n.prototype.destroy=function(){this.stop(),i.Sprite.prototype.destroy.call(this)},n.fromFrames=function(e){for(var t=[],r=0;r<e.length;++r)t.push(new i.Texture.fromFrame(e[r]));return new n(t)},n.fromImages=function(e){for(var t=[],r=0;r<e.length;++r)t.push(new i.Texture.fromImage(e[r]));return new n(t)}},{"../core":23}],75:[function(e,t,r){function n(e,t,r){i.Sprite.call(this,e),this.tileScale=new i.Point(1,1),this.tilePosition=new i.Point(0,0),this._width=t||100,this._height=r||100,this._uvs=new i.TextureUvs,this._canvasPattern=null,this.shader=new i.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var i=e("../core"),o=new i.Point,s=e("../core/renderers/canvas/utils/CanvasTinter");n.prototype=Object.create(i.Sprite.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this._width},set:function(e){this._width=e}},height:{get:function(){return this._height},set:function(e){this._height=e}}}),n.prototype._onTextureUpdate=function(){},n.prototype._renderWebGL=function(e){var t=this._texture;if(t&&t._uvs){var r=t._uvs,n=t._frame.width,i=t._frame.height,o=t.baseTexture.width,s=t.baseTexture.height;t._uvs=this._uvs,t._frame.width=this.width,t._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/o,this.shader.uniforms.uPixelSize.value[1]=1/s,this.shader.uniforms.uFrame.value[0]=r.x0,this.shader.uniforms.uFrame.value[1]=r.y0,this.shader.uniforms.uFrame.value[2]=r.x1-r.x0,this.shader.uniforms.uFrame.value[3]=r.y2-r.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(n*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(i*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=o/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=s/this._height*this.tileScale.y,e.setObjectRenderer(e.plugins.sprite),e.plugins.sprite.render(this),t._uvs=r,t._frame.width=n,t._frame.height=i}},n.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var r=e.context,n=this.worldTransform,o=e.resolution,a=t.baseTexture,u=this.tilePosition.x/this.tileScale.x%t._frame.width,l=this.tilePosition.y/this.tileScale.y%t._frame.height;if(!this._canvasPattern){var h=new i.CanvasBuffer(t._frame.width,t._frame.height);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=s.getTintedTexture(this,this.tint)),h.context.drawImage(this.tintedTexture,0,0)):h.context.drawImage(a.source,-t._frame.x,-t._frame.y),this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),r.scale(this.tileScale.x,this.tileScale.y),r.translate(u+this.anchor.x*-this._width,l+this.anchor.y*-this._height);var c=e.blendModes[this.blendMode];c!==e.context.globalCompositeOperation&&(r.globalCompositeOperation=c),r.fillStyle=this._canvasPattern,r.fillRect(-u,-l,this._width/this.tileScale.x,this._height/this.tileScale.y)}},n.prototype.getBounds=function(){var e,t,r,n,i=this._width,o=this._height,s=i*(1-this.anchor.x),a=i*-this.anchor.x,u=o*(1-this.anchor.y),l=o*-this.anchor.y,h=this.worldTransform,c=h.a,d=h.b,p=h.c,f=h.d,g=h.tx,v=h.ty,m=c*a+p*l+g,y=f*l+d*a+v,x=c*s+p*l+g,b=f*l+d*s+v,_=c*s+p*u+g,w=f*u+d*s+v,T=c*a+p*u+g,E=f*u+d*a+v;e=m,e=e>x?x:e,e=e>_?_:e,e=e>T?T:e,r=y,r=r>b?b:r,r=r>w?w:r,r=r>E?E:r,t=m,t=x>t?x:t,t=_>t?_:t,t=T>t?T:t,n=y,n=b>n?b:n,n=w>n?w:n,n=E>n?E:n;var S=this._bounds;return S.x=e,S.width=t-e,S.y=r,S.height=n-r,this._currentBounds=S,S},n.prototype.containsPoint=function(e){
this.worldTransform.applyInverse(e,o);var t,r=this._width,n=this._height,i=-r*this.anchor.x;return o.x>i&&o.x<i+r&&(t=-n*this.anchor.y,o.y>t&&o.y<t+n)?!0:!1},n.prototype.destroy=function(){i.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},n.fromFrame=function(e,t,r){var o=i.utils.TextureCache[e];if(!o)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new n(o,t,r)},n.fromImage=function(e,t,r,o,s){return new n(i.Texture.fromImage(e,o,s),t,r)}},{"../core":23,"../core/renderers/canvas/utils/CanvasTinter":41}],76:[function(e,t,r){var n=e("../core"),i=n.DisplayObject,o=new n.Matrix;i.prototype._cacheAsBitmap=!1,i.prototype._originalRenderWebGL=null,i.prototype._originalRenderCanvas=null,i.prototype._originalUpdateTransform=null,i.prototype._originalHitTest=null,i.prototype._originalDestroy=null,i.prototype._cachedSprite=null,Object.defineProperties(i.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),i.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cachedSprite.worldAlpha=this.worldAlpha,e.setObjectRenderer(e.plugins.sprite),e.plugins.sprite.render(this._cachedSprite))},i.prototype._initCachedDisplayObject=function(e){if(!this._cachedSprite){e.currentRenderer.flush();var t=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;t.x-=r,t.y-=r,t.width+=2*r,t.height+=2*r}var i=e.currentRenderTarget,s=e.filterManager.filterStack,a=new n.RenderTexture(e,0|t.width,0|t.height),u=o;u.tx=-t.x,u.ty=-t.y,this.renderWebGL=this._originalRenderWebGL,a.render(this,u,!0,!0),e.setRenderTarget(i),e.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new n.Sprite(a),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(e))},i.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cachedSprite){var t=this.getLocalBounds(),r=e.context,i=new n.RenderTexture(e,0|t.width,0|t.height),s=o;s.tx=-t.x,s.ty=-t.y,this.renderCanvas=this._originalRenderCanvas,i.render(this,s,!0),e.context=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new n.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},i.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},i.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":23}],77:[function(e,t,r){var n=e("../core");n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null}},{"../core":23}],78:[function(e,t,r){var n=e("../core");n.DisplayObject.prototype.getGlobalPosition=function(e){return e=e||new n.Point,this.parent?(this.displayObjectUpdateTransform(),e.x=this.worldTransform.tx,e.y=this.worldTransform.ty):(e.x=this.position.x,e.y=this.position.y),e}},{"../core":23}],79:[function(e,t,r){e("./cacheAsBitmap"),e("./getChildByName"),e("./getGlobalPosition"),t.exports={MovieClip:e("./MovieClip"),TilingSprite:e("./TilingSprite"),BitmapText:e("./BitmapText")}},{"./BitmapText":73,"./MovieClip":74,"./TilingSprite":75,"./cacheAsBitmap":76,"./getChildByName":77,"./getGlobalPosition":78}],80:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.uniforms.pixelSize.value=e}}})},{"../../core":23}],81:[function(e,t,r){function n(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new s,this.defaultFilter=new i.AbstractFilter}var i=e("../../core"),o=e("../blur/BlurXFilter"),s=e("../blur/BlurYFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r){var n=e.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(e,t,r),this.blurXFilter.applyFilter(e,t,n),e.blendModeManager.setBlendMode(i.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(e,n,r),e.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),e.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e}},blurX:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}},blurY:{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}})},{"../../core":23,"../blur/BlurXFilter":84,"../blur/BlurYFilter":85}],82:[function(e,t,r){function n(e,t){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:e||0},dirY:{type:"1f",value:t||0}}),this.defaultFilter=new i.AbstractFilter,this.passes=1,this.dirX=e||0,this.dirY=t||0,this.strength=4}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r,n){var i=this.getShader(e);if(this.uniforms.strength.value=this.strength/4/this.passes*(t.frame.width/t.size.width),1===this.passes)e.filterManager.applyFilter(i,t,r,n);else{var o=e.filterManager.getRenderTarget(!0);e.filterManager.applyFilter(i,t,o,n);for(var s=0;s<this.passes-2;s++)e.filterManager.applyFilter(i,o,o,n);e.filterManager.applyFilter(i,o,r,n),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*e,this.strength=e}},dirX:{get:function(){return this.dirX},set:function(e){this.uniforms.dirX.value=e}},dirY:{get:function(){return this.dirY},set:function(e){this.uniforms.dirY.value=e}}})},{"../../core":23}],83:[function(e,t,r){function n(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new s}var i=e("../../core"),o=e("./BlurXFilter"),s=e("./BlurYFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r){var n=e.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(e,t,n),this.blurYFilter.applyFilter(e,n,r),e.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(e){this.padding=.5*Math.abs(e),this.blurXFilter.blur=this.blurYFilter.blur=e}},passes:{get:function(){return this.blurXFilter.passes},set:function(e){this.blurXFilter.passes=this.blurYFilter.passes=e}},blurX:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}},blurY:{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}})},{"../../core":23,"./BlurXFilter":84,"./BlurYFilter":85}],84:[function(e,t,r){function n(){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r,n){var i=this.getShader(e);if(this.uniforms.strength.value=this.strength/4/this.passes*(t.frame.width/t.size.width),1===this.passes)e.filterManager.applyFilter(i,t,r,n);else{for(var o=e.filterManager.getRenderTarget(!0),s=t,a=o,u=0;u<this.passes-1;u++){e.filterManager.applyFilter(i,s,a,!0);var l=a;a=s,s=l}e.filterManager.applyFilter(i,s,r,n),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*Math.abs(e),this.strength=e}}})},{"../../core":23}],85:[function(e,t,r){function n(){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r,n){var i=this.getShader(e);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(t.frame.height/t.size.height),1===this.passes)e.filterManager.applyFilter(i,t,r,n);else{for(var o=e.filterManager.getRenderTarget(!0),s=t,a=o,u=0;u<this.passes-1;u++){e.filterManager.applyFilter(i,s,a,!0);var l=a;a=s,s=l}e.filterManager.applyFilter(i,s,r,n),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*Math.abs(e),this.strength=e}}})},{"../../core":23}],86:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:.1,y:0}}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n},{"../../core":23}],87:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype._loadMatrix=function(e,t){t=!!t;var r=e;t&&(this._multiply(r,this.uniforms.m.value,e),r=this._colorMatrix(r)),this.uniforms.m.value=r},n.prototype._multiply=function(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19],e},n.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},n.prototype.brightness=function(e,t){var r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},n.prototype.greyscale=function(e,t){var r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},n.prototype.grayscale=n.prototype.greyscale,n.prototype.blackAndWhite=function(e){var t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)},n.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var r=Math.cos(e),n=Math.sin(e),i=.213,o=.715,s=.072,a=[i+r*(1-i)+n*-i,o+r*-o+n*-o,s+r*-s+n*(1-s),0,0,i+r*-i+.143*n,o+r*(1-o)+.14*n,s+r*-s+n*-.283,0,0,i+r*-i+n*-(1-i),o+r*-o+n*o,s+r*(1-s)+n*s,0,0,0,0,0,1,0];this._loadMatrix(a,t)},n.prototype.contrast=function(e,t){var r=(e||0)+1,n=-128*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,t)},n.prototype.saturate=function(e,t){var r=2*(e||0)/3+1,n=(r-1)*-.5,i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,t)},n.prototype.desaturate=function(e){this.saturate(-1)},n.prototype.negative=function(e){var t=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)},n.prototype.sepia=function(e){var t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)},n.prototype.technicolor=function(e){var t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)},n.prototype.polaroid=function(e){var t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)},n.prototype.toBGR=function(e){var t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)},n.prototype.kodachrome=function(e){var t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)},n.prototype.browni=function(e){var t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)},n.prototype.vintage=function(e){var t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)},n.prototype.colorTone=function(e,t,r,n,i){e=e||.2,t=t||.15,r=r||16770432,n=n||3375104;var o=(r>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,u=(n>>16&255)/255,l=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,e,0,u,l,h,t,0,o-u,s-l,a-h,0,0];this._loadMatrix(c,i)},n.prototype.night=function(e,t){e=e||.1;var r=[-2*e,-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},n.prototype.predator=function(e,t){var r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)},n.prototype.lsd=function(e){var t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)},n.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(e){this.uniforms.m.value=e}}})},{"../../core":23}],88:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(e){this.uniforms.step.value=e}}})},{"../../core":23}],89:[function(e,t,r){function n(e,t,r){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(e)},texelSize:{type:"v2",value:{x:1/t,y:1/r}}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(e){this.uniforms.matrix.value=new Float32Array(e)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(e){this.uniforms.texelSize.value.x=1/e}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(e){this.uniforms.texelSize.value.y=1/e}}})},{"../../core":23}],90:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n},{"../../core":23}],91:[function(e,t,r){function n(e,t){var r=new i.Matrix;e.renderable=!1,i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision mediump float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:e.texture},otherMatrix:{type:"mat3",value:r.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=e,this.maskMatrix=r,(null===t||void 0===t)&&(t=20),this.scale=new i.Point(t,t)}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r){var n=e.filterManager;n.calculateMappedMatrix(t.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/t.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/t.frame.height);var i=this.getShader(e);n.applyFilter(i,t,r)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(e){this.uniforms.mapSampler.value=e}}})},{"../../core":23}],92:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},angle:{get:function(){return this.uniforms.angle.value},set:function(e){this.uniforms.angle.value=e}}})},{"../../core":23}],93:[function(e,t,r){function n(){i.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},
alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r,n){var i=this.getShader(e);if(this.uniforms.strength.value=this.strength/4/this.passes*(t.frame.height/t.size.height),1===this.passes)e.filterManager.applyFilter(i,t,r,n);else{for(var o=e.filterManager.getRenderTarget(!0),s=t,a=o,u=0;u<this.passes-1;u++){e.filterManager.applyFilter(i,s,a,n);var l=a;a=s,s=l}e.filterManager.applyFilter(i,s,r,n),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*e,this.strength=e}}})},{"../../core":23}],94:[function(e,t,r){function n(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYTintFilter=new s,this.defaultFilter=new i.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=i.BLEND_MODES.MULTIPLY}var i=e("../../core"),o=e("../blur/BlurXFilter"),s=e("./BlurYTintFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r){var n=e.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(e,t,n),e.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(e,n,r),e.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(e,t,r),e.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYTintFilter.blur=e}},blurX:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(e){this.blurYTintFilter.blur=e}},color:{get:function(){return i.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(e){this.blurYTintFilter.uniforms.color.value=i.utils.hex2rgb(e)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(e){this.blurYTintFilter.uniforms.alpha.value=e}},distance:{get:function(){return this._distance},set:function(e){this._dirtyPosition=!0,this._distance=e}},angle:{get:function(){return this._angle},set:function(e){this._dirtyPosition=!0,this._angle=e}}})},{"../../core":23,"../blur/BlurXFilter":84,"./BlurYTintFilter":93}],95:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(e){this.uniforms.gray.value=e}}})},{"../../core":23}],96:[function(e,t,r){t.exports={AsciiFilter:e("./ascii/AsciiFilter"),BloomFilter:e("./bloom/BloomFilter"),BlurFilter:e("./blur/BlurFilter"),BlurXFilter:e("./blur/BlurXFilter"),BlurYFilter:e("./blur/BlurYFilter"),BlurDirFilter:e("./blur/BlurDirFilter"),ColorMatrixFilter:e("./color/ColorMatrixFilter"),ColorStepFilter:e("./color/ColorStepFilter"),ConvolutionFilter:e("./convolution/ConvolutionFilter"),CrossHatchFilter:e("./crosshatch/CrossHatchFilter"),DisplacementFilter:e("./displacement/DisplacementFilter"),DotScreenFilter:e("./dot/DotScreenFilter"),GrayFilter:e("./gray/GrayFilter"),DropShadowFilter:e("./dropshadow/DropShadowFilter"),InvertFilter:e("./invert/InvertFilter"),NoiseFilter:e("./noise/NoiseFilter"),PixelateFilter:e("./pixelate/PixelateFilter"),RGBSplitFilter:e("./rgb/RGBSplitFilter"),ShockwaveFilter:e("./shockwave/ShockwaveFilter"),SepiaFilter:e("./sepia/SepiaFilter"),SmartBlurFilter:e("./blur/SmartBlurFilter"),TiltShiftFilter:e("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:e("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:e("./tiltshift/TiltShiftYFilter"),TwistFilter:e("./twist/TwistFilter")}},{"./ascii/AsciiFilter":80,"./bloom/BloomFilter":81,"./blur/BlurDirFilter":82,"./blur/BlurFilter":83,"./blur/BlurXFilter":84,"./blur/BlurYFilter":85,"./blur/SmartBlurFilter":86,"./color/ColorMatrixFilter":87,"./color/ColorStepFilter":88,"./convolution/ConvolutionFilter":89,"./crosshatch/CrossHatchFilter":90,"./displacement/DisplacementFilter":91,"./dot/DotScreenFilter":92,"./dropshadow/DropShadowFilter":94,"./gray/GrayFilter":95,"./invert/InvertFilter":97,"./noise/NoiseFilter":98,"./pixelate/PixelateFilter":99,"./rgb/RGBSplitFilter":100,"./sepia/SepiaFilter":101,"./shockwave/ShockwaveFilter":102,"./tiltshift/TiltShiftFilter":104,"./tiltshift/TiltShiftXFilter":105,"./tiltshift/TiltShiftYFilter":106,"./twist/TwistFilter":107}],97:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(e){this.uniforms.invert.value=e}}})},{"../../core":23}],98:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(e){this.uniforms.noise.value=e}}})},{"../../core":23}],99:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.uniforms.pixelSize.value=e}}})},{"../../core":23}],100:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(e){this.uniforms.red.value=e}},green:{get:function(){return this.uniforms.green.value},set:function(e){this.uniforms.green.value=e}},blue:{get:function(){return this.uniforms.blue.value},set:function(e){this.uniforms.blue.value=e}}})},{"../../core":23}],101:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(e){this.uniforms.sepia.value=e}}})},{"../../core":23}],102:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(e){this.uniforms.center.value=e}},params:{get:function(){return this.uniforms.params.value},set:function(e){this.uniforms.params.value=e}},time:{get:function(){return this.uniforms.time.value},set:function(e){this.uniforms.time.value=e}}})},{"../../core":23}],103:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(n.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(e){this.uniforms.blur.value=e}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(e){this.uniforms.gradientBlur.value=e}},start:{get:function(){return this.uniforms.start.value},set:function(e){this.uniforms.start.value=e,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(e){this.uniforms.end.value=e,this.updateDelta()}}})},{"../../core":23}],104:[function(e,t,r){function n(){i.AbstractFilter.call(this),this.tiltShiftXFilter=new o,this.tiltShiftYFilter=new s}var i=e("../../core"),o=e("./TiltShiftXFilter"),s=e("./TiltShiftYFilter");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.applyFilter=function(e,t,r){var n=e.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(e,t,n),this.tiltShiftYFilter.applyFilter(e,n,r),e.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e}}})},{"../../core":23,"./TiltShiftXFilter":105,"./TiltShiftYFilter":106}],105:[function(e,t,r){function n(){i.call(this)}var i=e("./TiltShiftAxisFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.updateDelta=function(){var e=this.uniforms.end.value.x-this.uniforms.start.value.x,t=this.uniforms.end.value.y-this.uniforms.start.value.y,r=Math.sqrt(e*e+t*t);this.uniforms.delta.value.x=e/r,this.uniforms.delta.value.y=t/r}},{"./TiltShiftAxisFilter":103}],106:[function(e,t,r){function n(){i.call(this)}var i=e("./TiltShiftAxisFilter");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.updateDelta=function(){var e=this.uniforms.end.value.x-this.uniforms.start.value.x,t=this.uniforms.end.value.y-this.uniforms.start.value.y,r=Math.sqrt(e*e+t*t);this.uniforms.delta.value.x=-t/r,this.uniforms.delta.value.y=e/r}},{"./TiltShiftAxisFilter":103}],107:[function(e,t,r){function n(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var i=e("../../core");n.prototype=Object.create(i.AbstractFilter.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}},radius:{get:function(){return this.uniforms.radius.value},set:function(e){this.uniforms.radius.value=e}},angle:{get:function(){return this.uniforms.angle.value},set:function(e){this.uniforms.angle.value=e}}})},{"../../core":23}],108:[function(e,t,r){(function(r){e("./polyfill");var n=t.exports=e("./core");n.extras=e("./extras"),n.filters=e("./filters"),n.interaction=e("./interaction"),n.loaders=e("./loaders"),n.mesh=e("./mesh"),n.accessibility=e("./accessibility"),n.loader=new n.loaders.Loader,Object.assign(n,e("./deprecation")),r.PIXI=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":15,"./core":23,"./deprecation":72,"./extras":79,"./filters":96,"./interaction":111,"./loaders":114,"./mesh":121,"./polyfill":126}],109:[function(e,t,r){function n(){this.global=new i.Point,this.target=null,this.originalEvent=null}var i=e("../core");n.prototype.constructor=n,t.exports=n,n.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)}},{"../core":23}],110:[function(e,t,r){function n(e,t){t=t||{},this.renderer=e,this.autoPreventDefault=void 0!==t.autoPreventDefault?t.autoPreventDefault:!0,this.interactionFrequency=t.interactionFrequency||10,this.mouse=new o,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new i.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var i=e("../core"),o=e("./InteractionData");Object.assign(i.DisplayObject.prototype,e("./interactiveTarget")),n.prototype.constructor=n,t.exports=n,n.prototype.setTargetElement=function(e,t){this.removeEvents(),this.interactionDOMElement=e,this.resolution=t||1,this.addEvents()},n.prototype.addEvents=function(){this.interactionDOMElement&&(i.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},n.prototype.removeEvents=function(){this.interactionDOMElement&&(i.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},n.prototype.update=function(e){if(this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},n.prototype.dispatchEvent=function(e,t,r){r.stopped||(r.target=e,r.type=t,e.emit(t,r),e[t]&&e[t](r))},n.prototype.mapPositionToPoint=function(e,t,r){var n=this.interactionDOMElement.getBoundingClientRect();e.x=(t-n.left)*(this.interactionDOMElement.width/n.width)/this.resolution,e.y=(r-n.top)*(this.interactionDOMElement.height/n.height)/this.resolution},n.prototype.processInteractive=function(e,t,r,n,i){if(!t||!t.visible)return!1;var o=!1,s=i=t.interactive||i;if(t.hitArea&&(s=!1),t.interactiveChildren)for(var a=t.children,u=a.length-1;u>=0;u--)this.processInteractive(e,a[u],r,n,s)&&(o=!0,s=!1,a[u].interactive&&(n=!1));return i&&(n&&!o&&(t.hitArea?(t.worldTransform.applyInverse(e,this._tempPoint),o=t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):t.containsPoint&&(o=t.containsPoint(e))),t.interactive&&r(t,o)),o},n.prototype.onMouseDown=function(e){this.mouse.originalEvent=e,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},n.prototype.processMouseDown=function(e,t){var r=this.mouse.originalEvent,n=2===r.button||3===r.which;t&&(e[n?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(e,n?"rightdown":"mousedown",this.eventData))},n.prototype.onMouseUp=function(e){this.mouse.originalEvent=e,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},n.prototype.processMouseUp=function(e,t){var r=this.mouse.originalEvent,n=2===r.button||3===r.which,i=n?"_isRightDown":"_isLeftDown";t?(this.dispatchEvent(e,n?"rightup":"mouseup",this.eventData),e[i]&&(e[i]=!1,this.dispatchEvent(e,n?"rightclick":"click",this.eventData))):e[i]&&(e[i]=!1,this.dispatchEvent(e,n?"rightupoutside":"mouseupoutside",this.eventData))},n.prototype.onMouseMove=function(e){this.mouse.originalEvent=e,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},n.prototype.processMouseMove=function(e,t){this.dispatchEvent(e,"mousemove",this.eventData),this.processMouseOverOut(e,t)},n.prototype.onMouseOut=function(e){this.mouse.originalEvent=e,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},n.prototype.processMouseOverOut=function(e,t){t?(e._over||(e._over=!0,this.dispatchEvent(e,"mouseover",this.eventData)),e.buttonMode&&(this.cursor=e.defaultCursor)):e._over&&(e._over=!1,this.dispatchEvent(e,"mouseout",this.eventData))},n.prototype.onTouchStart=function(e){this.autoPreventDefault&&e.preventDefault();for(var t=e.changedTouches,r=t.length,n=0;r>n;n++){var i=t[n],o=this.getTouchData(i);o.originalEvent=e,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(o)}},n.prototype.processTouchStart=function(e,t){t&&(e._touchDown=!0,this.dispatchEvent(e,"touchstart",this.eventData))},n.prototype.onTouchEnd=function(e){this.autoPreventDefault&&e.preventDefault();for(var t=e.changedTouches,r=t.length,n=0;r>n;n++){var i=t[n],o=this.getTouchData(i);o.originalEvent=e,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(o)}},n.prototype.processTouchEnd=function(e,t){t?(this.dispatchEvent(e,"touchend",this.eventData),e._touchDown&&(e._touchDown=!1,this.dispatchEvent(e,"tap",this.eventData))):e._touchDown&&(e._touchDown=!1,this.dispatchEvent(e,"touchendoutside",this.eventData))},n.prototype.onTouchMove=function(e){this.autoPreventDefault&&e.preventDefault();for(var t=e.changedTouches,r=t.length,n=0;r>n;n++){var i=t[n],o=this.getTouchData(i);o.originalEvent=e,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchMove,!0),this.returnTouchData(o)}},n.prototype.processTouchMove=function(e,t){t=t,this.dispatchEvent(e,"touchmove",this.eventData)},n.prototype.getTouchData=function(e){var t=this.interactiveDataPool.pop();return t||(t=new o),t.identifier=e.identifier,this.mapPositionToPoint(t.global,e.clientX,e.clientY),navigator.isCocoonJS&&(t.global.x=t.global.x/this.resolution,t.global.y=t.global.y/this.resolution),e.globalX=t.global.x,e.globalY=t.global.y,t},n.prototype.returnTouchData=function(e){this.interactiveDataPool.push(e)},n.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},i.WebGLRenderer.registerPlugin("interaction",n),i.CanvasRenderer.registerPlugin("interaction",n)},{"../core":23,"./InteractionData":109,"./interactiveTarget":112}],111:[function(e,t,r){t.exports={InteractionData:e("./InteractionData"),InteractionManager:e("./InteractionManager"),interactiveTarget:e("./interactiveTarget")}},{"./InteractionData":109,"./InteractionManager":110,"./interactiveTarget":112}],112:[function(e,t,r){var n={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1};t.exports=n},{}],113:[function(e,t,r){function n(e,t){var r={},n=e.data.getElementsByTagName("info")[0],i=e.data.getElementsByTagName("common")[0];r.font=n.getAttribute("face"),r.size=parseInt(n.getAttribute("size"),10),r.lineHeight=parseInt(i.getAttribute("lineHeight"),10),r.chars={};for(var a=e.data.getElementsByTagName("char"),u=0;u<a.length;u++){var l=parseInt(a[u].getAttribute("id"),10),h=new o.Rectangle(parseInt(a[u].getAttribute("x"),10)+t.frame.x,parseInt(a[u].getAttribute("y"),10)+t.frame.y,parseInt(a[u].getAttribute("width"),10),parseInt(a[u].getAttribute("height"),10));r.chars[l]={xOffset:parseInt(a[u].getAttribute("xoffset"),10),yOffset:parseInt(a[u].getAttribute("yoffset"),10),xAdvance:parseInt(a[u].getAttribute("xadvance"),10),kerning:{},texture:new o.Texture(t.baseTexture,h)}}var c=e.data.getElementsByTagName("kerning");for(u=0;u<c.length;u++){var d=parseInt(c[u].getAttribute("first"),10),p=parseInt(c[u].getAttribute("second"),10),f=parseInt(c[u].getAttribute("amount"),10);r.chars[p].kerning[d]=f}e.bitmapFont=r,s.BitmapText.fonts[r.font]=r}var i=e("resource-loader").Resource,o=e("../core"),s=e("../extras"),a=e("path");t.exports=function(){return function(e,t){if(!e.data||!e.isXml)return t();if(0===e.data.getElementsByTagName("page").length||0===e.data.getElementsByTagName("info").length||null===e.data.getElementsByTagName("info")[0].getAttribute("face"))return t();var r=a.dirname(e.url);"."===r&&(r=""),this.baseUrl&&r&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/"),r=r.replace(this.baseUrl,"")),r&&"/"!==r.charAt(r.length-1)&&(r+="/");var s=r+e.data.getElementsByTagName("page")[0].getAttribute("file");if(o.utils.TextureCache[s])n(e,o.utils.TextureCache[s]),t();else{var u={crossOrigin:e.crossOrigin,loadType:i.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata};this.add(e.name+"_image",s,u,function(r){n(e,r.texture),t()})}}}},{"../core":23,"../extras":79,path:2,"resource-loader":133}],114:[function(e,t,r){t.exports={Loader:e("./loader"),bitmapFontParser:e("./bitmapFontParser"),spritesheetParser:e("./spritesheetParser"),textureParser:e("./textureParser"),Resource:e("resource-loader").Resource}},{"./bitmapFontParser":113,"./loader":115,"./spritesheetParser":116,"./textureParser":117,"resource-loader":133}],115:[function(e,t,r){function n(e,t){i.call(this,e,t);for(var r=0;r<n._pixiMiddleware.length;++r)this.use(n._pixiMiddleware[r]())}var i=e("resource-loader"),o=e("./textureParser"),s=e("./spritesheetParser"),a=e("./bitmapFontParser");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n._pixiMiddleware=[i.middleware.parsing.blob,o,s,a],n.addPixiMiddleware=function(e){n._pixiMiddleware.push(e)};var u=i.Resource;u.setExtensionXhrType("fnt",u.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":113,"./spritesheetParser":116,"./textureParser":117,"resource-loader":133}],116:[function(e,t,r){var n=e("resource-loader").Resource,i=e("path"),o=e("../core");t.exports=function(){return function(e,t){if(!e.data||!e.isJson||!e.data.frames)return t();var r={crossOrigin:e.crossOrigin,loadType:n.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata},s=i.dirname(e.url.replace(this.baseUrl,"")),a=o.utils.getResolutionOfUrl(e.url);this.add(e.name+"_image",s+"/"+e.data.meta.image,r,function(r){e.textures={};var n=e.data.frames;for(var i in n){var s=n[i].frame;if(s){var u=null,l=null;if(u=n[i].rotated?new o.Rectangle(s.x,s.y,s.h,s.w):new o.Rectangle(s.x,s.y,s.w,s.h),n[i].trimmed&&(l=new o.Rectangle(n[i].spriteSourceSize.x/a,n[i].spriteSourceSize.y/a,n[i].sourceSize.w/a,n[i].sourceSize.h/a)),n[i].rotated){var h=u.width;u.width=u.height,u.height=h}u.x/=a,u.y/=a,u.width/=a,u.height/=a,e.textures[i]=new o.Texture(r.texture.baseTexture,u,u.clone(),l,n[i].rotated),o.utils.TextureCache[i]=e.textures[i]}}t()})}}},{"../core":23,path:2,"resource-loader":133}],117:[function(e,t,r){var n=e("../core");t.exports=function(){return function(e,t){if(e.data&&e.isImage){var r=new n.BaseTexture(e.data,null,n.utils.getResolutionOfUrl(e.url));r.imageUrl=e.url,e.texture=new n.Texture(r),n.utils.BaseTextureCache[e.url]=r,n.utils.TextureCache[e.url]=e.texture}t()}}},{"../core":23}],118:[function(e,t,r){function n(e,t,r,o,s){i.Container.call(this),this._texture=null,this.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=t||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=o||new Uint16Array([0,1,3,2]),this.dirty=!0,this.blendMode=i.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=s||n.DRAW_MODES.TRIANGLE_MESH,this.texture=e,this.shader=null}var i=e("../core"),o=new i.Point,s=new i.Polygon;n.prototype=Object.create(i.Container.prototype),n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{texture:{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}}),n.prototype._renderWebGL=function(e){e.setObjectRenderer(e.plugins.mesh),
e.plugins.mesh.render(this)},n.prototype._renderCanvas=function(e){var t=e.context,r=this.worldTransform;e.roundPixels?t.setTransform(r.a,r.b,r.c,r.d,0|r.tx,0|r.ty):t.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawMode===n.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(t):this._renderCanvasTriangles(t)},n.prototype._renderCanvasTriangleMesh=function(e){for(var t=this.vertices,r=this.uvs,n=t.length/2,i=0;n-2>i;i++){var o=2*i;this._renderCanvasDrawTriangle(e,t,r,o,o+2,o+4)}},n.prototype._renderCanvasTriangles=function(e){for(var t=this.vertices,r=this.uvs,n=this.indices,i=n.length,o=0;i>o;o+=3){var s=2*n[o],a=2*n[o+1],u=2*n[o+2];this._renderCanvasDrawTriangle(e,t,r,s,a,u)}},n.prototype._renderCanvasDrawTriangle=function(e,t,r,n,i,o){var s=this._texture.baseTexture.source,a=this._texture.baseTexture.width,u=this._texture.baseTexture.height,l=t[n],h=t[i],c=t[o],d=t[n+1],p=t[i+1],f=t[o+1],g=r[n]*a,v=r[i]*a,m=r[o]*a,y=r[n+1]*u,x=r[i+1]*u,b=r[o+1]*u;if(this.canvasPadding>0){var _=this.canvasPadding/this.worldTransform.a,w=this.canvasPadding/this.worldTransform.d,T=(l+h+c)/3,E=(d+p+f)/3,S=l-T,C=d-E,A=Math.sqrt(S*S+C*C);l=T+S/A*(A+_),d=E+C/A*(A+w),S=h-T,C=p-E,A=Math.sqrt(S*S+C*C),h=T+S/A*(A+_),p=E+C/A*(A+w),S=c-T,C=f-E,A=Math.sqrt(S*S+C*C),c=T+S/A*(A+_),f=E+C/A*(A+w)}e.save(),e.beginPath(),e.moveTo(l,d),e.lineTo(h,p),e.lineTo(c,f),e.closePath(),e.clip();var M=g*x+y*m+v*b-x*m-y*v-g*b,O=l*x+y*c+h*b-x*c-y*h-l*b,R=g*h+l*m+v*c-h*m-l*v-g*c,P=g*x*c+y*h*m+l*v*b-l*x*m-y*v*c-g*h*b,D=d*x+y*f+p*b-x*f-y*p-d*b,F=g*p+d*m+v*f-p*m-d*v-g*f,B=g*x*f+y*p*m+d*v*b-d*x*m-y*v*f-g*p*b;e.transform(O/M,D/M,R/M,F/M,P/M,B/M),e.drawImage(s,0,0),e.restore()},n.prototype.renderMeshFlat=function(e){var t=this.context,r=e.vertices,n=r.length/2;t.beginPath();for(var i=1;n-2>i;i++){var o=2*i,s=r[o],a=r[o+2],u=r[o+4],l=r[o+1],h=r[o+3],c=r[o+5];t.moveTo(s,l),t.lineTo(a,h),t.lineTo(u,c)}t.fillStyle="#FF0000",t.fill(),t.closePath()},n.prototype._onTextureUpdate=function(){this.updateFrame=!0},n.prototype.getBounds=function(e){if(!this._currentBounds){for(var t=e||this.worldTransform,r=t.a,n=t.b,o=t.c,s=t.d,a=t.tx,u=t.ty,l=-(1/0),h=-(1/0),c=1/0,d=1/0,p=this.vertices,f=0,g=p.length;g>f;f+=2){var v=p[f],m=p[f+1],y=r*v+o*m+a,x=s*m+n*v+u;c=c>y?y:c,d=d>x?x:d,l=y>l?y:l,h=x>h?x:h}if(c===-(1/0)||h===1/0)return i.Rectangle.EMPTY;var b=this._bounds;b.x=c,b.width=l-c,b.y=d,b.height=h-d,this._currentBounds=b}return this._currentBounds},n.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,o);var t,r,i=this.vertices,a=s.points;if(this.drawMode===n.DRAW_MODES.TRIANGLES){var u=this.indices;for(r=this.indices.length,t=0;r>t;t+=3){var l=2*u[t],h=2*u[t+1],c=2*u[t+2];if(a[0]=i[l],a[1]=i[l+1],a[2]=i[h],a[3]=i[h+1],a[4]=i[c],a[5]=i[c+1],s.contains(o.x,o.y))return!0}}else for(r=i.length,t=0;r>t;t+=6)if(a[0]=i[t],a[1]=i[t+1],a[2]=i[t+2],a[3]=i[t+3],a[4]=i[t+4],a[5]=i[t+5],s.contains(o.x,o.y))return!0;return!1},n.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":23}],119:[function(e,t,r){function n(e,t,r){i.call(this,e),this._ready=!0,this.segmentsX=t||10,this.segmentsY=r||10,this.drawMode=i.DRAW_MODES.TRIANGLES,this.refresh()}var i=e("./Mesh");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.refresh=function(){var e=this.segmentsX*this.segmentsY,t=[],r=[],n=[],i=[],o=this.texture,s=this.segmentsX-1,a=this.segmentsY-1,u=0,l=o.width/s,h=o.height/a;for(u=0;e>u;u++){var c=u%this.segmentsX,d=u/this.segmentsX|0;t.push(c*l,d*h),n.push(c/(this.segmentsX-1),d/(this.segmentsY-1))}var p=s*a;for(u=0;p>u;u++){var f=u%s,g=u/s|0,v=g*this.segmentsX+f,m=g*this.segmentsX+f+1,y=(g+1)*this.segmentsX+f,x=(g+1)*this.segmentsX+f+1;i.push(v,m,y),i.push(m,x,y)}this.vertices=new Float32Array(t),this.uvs=new Float32Array(n),this.colors=new Float32Array(r),this.indices=new Uint16Array(i)},n.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{"./Mesh":118}],120:[function(e,t,r){function n(e,t){i.call(this,e),this.points=t,this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length),this._ready=!0,this.refresh()}var i=e("./Mesh"),o=e("../core");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){var t=this.uvs,r=this.indices,n=this.colors,i=this._texture._uvs,s=new o.Point(i.x0,i.y0),a=new o.Point(i.x2-i.x0,i.y2-i.y0);t[0]=0+s.x,t[1]=0+s.y,t[2]=0+s.x,t[3]=1*a.y+s.y,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var u,l,h,c=e.length,d=1;c>d;d++)u=e[d],l=4*d,h=d/(c-1),t[l]=h*a.x+s.x,t[l+1]=0+s.y,t[l+2]=h*a.x+s.x,t[l+3]=1*a.y+s.y,l=2*d,n[l]=1,n[l+1]=1,l=2*d,r[l]=l,r[l+1]=l+1;this.dirty=!0}},n.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},n.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){for(var t,r,n,i,o,s,a=e[0],u=0,l=0,h=this.vertices,c=e.length,d=0;c>d;d++)r=e[d],n=4*d,t=d<e.length-1?e[d+1]:r,l=-(t.x-a.x),u=t.y-a.y,i=10*(1-d/(c-1)),i>1&&(i=1),o=Math.sqrt(u*u+l*l),s=this._texture.height/2,u/=o,l/=o,u*=s,l*=s,h[n]=r.x+u,h[n+1]=r.y+l,h[n+2]=r.x-u,h[n+3]=r.y-l,a=r;this.containerUpdateTransform()}}},{"../core":23,"./Mesh":118}],121:[function(e,t,r){t.exports={Mesh:e("./Mesh"),Plane:e("./Plane"),Rope:e("./Rope"),MeshRenderer:e("./webgl/MeshRenderer"),MeshShader:e("./webgl/MeshShader")}},{"./Mesh":118,"./Plane":119,"./Rope":120,"./webgl/MeshRenderer":122,"./webgl/MeshShader":123}],122:[function(e,t,r){function n(e){i.ObjectRenderer.call(this,e),this.indices=new Uint16Array(15e3);for(var t=0,r=0;15e3>t;t+=6,r+=4)this.indices[t+0]=r+0,this.indices[t+1]=r+1,this.indices[t+2]=r+2,this.indices[t+3]=r+0,this.indices[t+4]=r+2,this.indices[t+5]=r+3;this.currentShader=null}var i=e("../../core"),o=e("../Mesh");n.prototype=Object.create(i.ObjectRenderer.prototype),n.prototype.constructor=n,t.exports=n,i.WebGLRenderer.registerPlugin("mesh",n),n.prototype.onContextChange=function(){},n.prototype.render=function(e){e._vertexBuffer||this._initWebGL(e);var t=this.renderer,r=t.gl,n=e._texture.baseTexture,i=e.shader,s=e.drawMode===o.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;t.blendModeManager.setBlendMode(e.blendMode),i=i?i.shaders[r.id]||i.getShader(t):t.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(i),i.uniforms.translationMatrix.value=e.worldTransform.toArray(!0),i.uniforms.projectionMatrix.value=t.currentRenderTarget.projectionMatrix.toArray(!0),i.uniforms.alpha.value=e.worldAlpha,i.syncUniforms(),e.dirty?(e.dirty=!1,r.bindBuffer(r.ARRAY_BUFFER,e._vertexBuffer),r.bufferData(r.ARRAY_BUFFER,e.vertices,r.STATIC_DRAW),r.vertexAttribPointer(i.attributes.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,e._uvBuffer),r.bufferData(r.ARRAY_BUFFER,e.uvs,r.STATIC_DRAW),r.vertexAttribPointer(i.attributes.aTextureCoord,2,r.FLOAT,!1,0,0),r.activeTexture(r.TEXTURE0),n._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,n._glTextures[r.id]):this.renderer.updateTexture(n),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e._indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.indices,r.STATIC_DRAW)):(r.bindBuffer(r.ARRAY_BUFFER,e._vertexBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,e.vertices),r.vertexAttribPointer(i.attributes.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,e._uvBuffer),r.vertexAttribPointer(i.attributes.aTextureCoord,2,r.FLOAT,!1,0,0),r.activeTexture(r.TEXTURE0),n._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,n._glTextures[r.id]):this.renderer.updateTexture(n),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e._indexBuffer),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,e.indices)),r.drawElements(s,e.indices.length,r.UNSIGNED_SHORT,0)},n.prototype._initWebGL=function(e){var t=this.renderer.gl;e._vertexBuffer=t.createBuffer(),e._indexBuffer=t.createBuffer(),e._uvBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,e.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e._uvBuffer),t.bufferData(t.ARRAY_BUFFER,e.uvs,t.STATIC_DRAW),e.colors&&(e._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._colorBuffer),t.bufferData(t.ARRAY_BUFFER,e.colors,t.STATIC_DRAW)),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.indices,t.STATIC_DRAW)},n.prototype.flush=function(){},n.prototype.start=function(){this.currentShader=null},n.prototype.destroy=function(){i.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":23,"../Mesh":118}],123:[function(e,t,r){function n(e){i.Shader.call(this,e,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var i=e("../../core");n.prototype=Object.create(i.Shader.prototype),n.prototype.constructor=n,t.exports=n,i.ShaderManager.registerPlugin("meshShader",n)},{"../../core":23}],124:[function(e,t,r){Math.sign||(Math.sign=function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1})},{}],125:[function(e,t,r){Object.assign||(Object.assign=e("object-assign"))},{"object-assign":11}],126:[function(e,t,r){e("./Object.assign"),e("./requestAnimationFrame"),e("./Math.sign")},{"./Math.sign":124,"./Object.assign":125,"./requestAnimationFrame":127}],127:[function(e,t,r){(function(e){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!e.performance||!e.performance.now){var t=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-t}}for(var r=Date.now(),n=["ms","moz","webkit","o"],i=0;i<n.length&&!e.requestAnimationFrame;++i)e.requestAnimationFrame=e[n[i]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[i]+"CancelAnimationFrame"]||e[n[i]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),n=16+r-t;return 0>n&&(n=0),r=t,setTimeout(function(){r=Date.now(),e(performance.now())},n)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],128:[function(t,r,n){(function(t){!function(){function n(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(i,arguments)}}var i,o,s={};i=this,null!=i&&(o=i.async),s.noConflict=function(){return i.async=o,s};var a=Object.prototype.toString,u=Array.isArray||function(e){return"[object Array]"===a.call(e)},l=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r+=1)t(e[r],r,e)},h=function(e,t){if(e.map)return e.map(t);var r=[];return l(e,function(e,n,i){r.push(t(e,n,i))}),r},c=function(e,t,r){return e.reduce?e.reduce(t,r):(l(e,function(e,n,i){r=t(r,e,n,i)}),r)},d=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};"undefined"!=typeof t&&t.nextTick?(s.nextTick=t.nextTick,"undefined"!=typeof setImmediate?s.setImmediate=function(e){setImmediate(e)}:s.setImmediate=s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(e){setImmediate(e)},s.setImmediate=s.nextTick):(s.nextTick=function(e){setTimeout(e,0)},s.setImmediate=s.nextTick),s.each=function(e,t,r){function i(t){t?(r(t),r=function(){}):(o+=1,o>=e.length&&r())}if(r=r||function(){},!e.length)return r();var o=0;l(e,function(e){t(e,n(i))})},s.forEach=s.each,s.eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,i=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r():i())})};i()},s.forEachSeries=s.eachSeries,s.eachLimit=function(e,t,r,n){var i=p(t);i.apply(null,[e,r,n])},s.forEachLimit=s.eachLimit;var p=function(e){return function(t,r,n){if(n=n||function(){},!t.length||0>=e)return n();var i=0,o=0,s=0;!function a(){if(i>=t.length)return n();for(;e>s&&o<t.length;)o+=1,s+=1,r(t[o-1],function(e){e?(n(e),n=function(){}):(i+=1,s-=1,i>=t.length?n():a())})}()}},f=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}},g=function(e,t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[p(e)].concat(r))}},v=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}},m=function(e,t,r,n){if(t=h(t,function(e,t){return{index:t,value:e}}),n){var i=[];e(t,function(e,t){r(e.value,function(r,n){i[e.index]=n,t(r)})},function(e){n(e,i)})}else e(t,function(e,t){r(e.value,function(e){t(e)})})};s.map=f(m),s.mapSeries=v(m),s.mapLimit=function(e,t,r,n){return y(t)(e,r,n)};var y=function(e){return g(e,m)};s.reduce=function(e,t,r,n){s.eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(e,t,r,n){var i=h(e,function(e){return e}).reverse();s.reduce(i,t,r,n)},s.foldr=s.reduceRight;var x=function(e,t,r,n){var i=[];t=h(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r&&i.push(e),t()})},function(e){n(h(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.filter=f(x),s.filterSeries=v(x),s.select=s.filter,s.selectSeries=s.filterSeries;var b=function(e,t,r,n){var i=[];t=h(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r||i.push(e),t()})},function(e){n(h(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.reject=f(b),s.rejectSeries=v(b);var _=function(e,t,r,n){e(t,function(e,t){r(e,function(r){r?(n(e),n=function(){}):t()})},function(e){n()})};s.detect=f(_),s.detectSeries=v(_),s.some=function(e,t,r){s.each(e,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(e){r(!1)})},s.any=s.some,s.every=function(e,t,r){s.each(e,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(e){r(!0)})},s.all=s.every,s.sortBy=function(e,t,r){s.map(e,function(e,r){t(e,function(t,n){t?r(t):r(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);var n=function(e,t){var r=e.criteria,n=t.criteria;return n>r?-1:r>n?1:0};r(null,h(t.sort(n),function(e){return e.value}))})},s.auto=function(e,t){t=t||function(){};var r=d(e),n=r.length;if(!n)return t();var i={},o=[],a=function(e){o.unshift(e)},h=function(e){for(var t=0;t<o.length;t+=1)if(o[t]===e)return void o.splice(t,1)},p=function(){n--,l(o.slice(0),function(e){e()})};a(function(){if(!n){var e=t;t=function(){},e(null,i)}}),l(r,function(r){var n=u(e[r])?e[r]:[e[r]],o=function(e){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),e){var o={};l(d(i),function(e){o[e]=i[e]}),o[r]=n,t(e,o),t=function(){}}else i[r]=n,s.setImmediate(p)},f=n.slice(0,Math.abs(n.length-1))||[],g=function(){return c(f,function(e,t){return e&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(r)};if(g())n[n.length-1](o,i);else{var v=function(){g()&&(h(v),n[n.length-1](o,i))};a(v)}})},s.retry=function(e,t,r){var n=5,i=[];"function"==typeof e&&(r=t,t=e,e=n),e=parseInt(e,10)||n;var o=function(n,o){for(var a=function(e,t){return function(r){e(function(e,n){r(!e||t,{err:e,result:n})},o)}};e;)i.push(a(t,!(e-=1)));s.series(i,function(e,t){t=t[t.length-1],(n||r)(t.err,t.result)})};return r?o():o},s.waterfall=function(e,t){if(t=t||function(){},!u(e)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();var n=function(e){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=e.next();o?i.push(n(o)):i.push(t),s.setImmediate(function(){e.apply(null,i)})}}};n(s.iterator(e))()};var w=function(e,t,r){if(r=r||function(){},u(t))e.map(t,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},r);else{var n={};e.each(d(t),function(e,r){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)})},function(e){r(e,n)})}};s.parallel=function(e,t){w({map:s.map,each:s.each},e,t)},s.parallelLimit=function(e,t,r){w({map:y(t),each:p(t)},e,r)},s.series=function(e,t){if(t=t||function(){},u(e))s.mapSeries(e,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},t);else{var r={};s.eachSeries(d(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(e){t(e,r)})}},s.iterator=function(e){var t=function(r){var n=function(){return e.length&&e[r].apply(null,arguments),n.next()};return n.next=function(){return r<e.length-1?t(r+1):null},n};return t(0)},s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var T=function(e,t,r,n){var i=[];e(t,function(e,t){r(e,function(e,r){i=i.concat(r||[]),t(e)})},function(e){n(e,i)})};s.concat=f(T),s.concatSeries=v(T),s.whilst=function(e,t,r){e()?t(function(n){return n?r(n):void s.whilst(e,t,r)}):r()},s.doWhilst=function(e,t,r){e(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?s.doWhilst(e,t,r):r()})},s.until=function(e,t,r){e()?r():t(function(n){return n?r(n):void s.until(e,t,r)})},s.doUntil=function(e,t,r){e(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?r():s.doUntil(e,t,r)})},s.queue=function(e,t){function r(e,t,r,n){return e.started||(e.started=!0),u(t)||(t=[t]),0==t.length?s.setImmediate(function(){e.drain&&e.drain()}):void l(t,function(t){var i={data:t,callback:"function"==typeof n?n:null};r?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),s.setImmediate(e.process)})}void 0===t&&(t=1);var i=0,o={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){r(o,e,!1,t)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(e,t){r(o,e,!0,t)},process:function(){if(!o.paused&&i<o.concurrency&&o.tasks.length){var t=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),i+=1;var r=function(){i-=1,t.callback&&t.callback.apply(t,arguments),o.drain&&o.tasks.length+i===0&&o.drain(),o.process()},s=n(r);e(t.data,s)}},length:function(){return o.tasks.length},running:function(){return i},idle:function(){return o.tasks.length+i===0},pause:function(){o.paused!==!0&&(o.paused=!0,o.process())},resume:function(){o.paused!==!1&&(o.paused=!1,o.process())}};return o},s.priorityQueue=function(e,t){function r(e,t){return e.priority-t.priority}function n(e,t,r){for(var n=-1,i=e.length-1;i>n;){var o=n+(i-n+1>>>1);r(t,e[o])>=0?n=o:i=o-1}return n}function i(e,t,i,o){return e.started||(e.started=!0),u(t)||(t=[t]),0==t.length?s.setImmediate(function(){e.drain&&e.drain()}):void l(t,function(t){var a={data:t,priority:i,callback:"function"==typeof o?o:null};e.tasks.splice(n(e.tasks,a,r)+1,0,a),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),s.setImmediate(e.process)})}var o=s.queue(e,t);return o.push=function(e,t,r){i(o,e,t,r)},delete o.unshift,o},s.cargo=function(e,t){var r=!1,n=[],i={tasks:n,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,r){u(e)||(e=[e]),l(e,function(e){n.push({data:e,callback:"function"==typeof r?r:null}),i.drained=!1,i.saturated&&n.length===t&&i.saturated()}),s.setImmediate(i.process)},process:function o(){if(!r){if(0===n.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var s="number"==typeof t?n.splice(0,t):n.splice(0,n.length),a=h(s,function(e){return e.data});i.empty&&i.empty(),r=!0,e(a,function(){r=!1;var e=arguments;l(s,function(t){t.callback&&t.callback.apply(null,e)}),o()})}},length:function(){return n.length},running:function(){return r}};return i};var E=function(e){return function(t){var r=Array.prototype.slice.call(arguments,1);t.apply(null,r.concat([function(t){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&l(r,function(t){console[e](t)}))}]))}};s.log=E("log"),s.dir=E("dir"),s.memoize=function(e,t){var r={},n={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=t.apply(null,i);a in r?s.nextTick(function(){o.apply(null,r[a])}):a in n?n[a].push(o):(n[a]=[o],e.apply(null,i.concat([function(){r[a]=arguments;var e=n[a];delete n[a];for(var t=0,i=e.length;i>t;t++)e[t].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=e,i},s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},s.times=function(e,t,r){for(var n=[],i=0;e>i;i++)n.push(i);return s.map(n,t,r)},s.timesSeries=function(e,t,r){for(var n=[],i=0;e>i;i++)n.push(i);return s.mapSeries(n,t,r)},s.seq=function(){var e=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();s.reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(e,t){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return e(t,function(e,t){e.apply(r,n.concat([t]))},i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};s.applyEach=f(S),s.applyEachSeries=v(S),s.forever=function(e,t){function r(n){if(n){if(t)return t(n);throw n}e(r)}r()},"undefined"!=typeof r&&r.exports?r.exports=s:"undefined"!=typeof e&&e.amd?e([],function(){return s}):i.async=s}()}).call(this,t("_process"))},{_process:3}],129:[function(e,t,r){"use strict";function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(){}var o="function"!=typeof Object.create?"~":!1;i.prototype._events=void 0,i.prototype.listeners=function(e,t){var r=o?o+e:e,n=this._events&&this._events[r];if(t)return!!n;if(!n)return[];if(this._events[r].fn)return[this._events[r].fn];for(var i=0,s=this._events[r].length,a=new Array(s);s>i;i++)a[i]=this._events[r][i].fn;return a},i.prototype.emit=function(e,t,r,n,i,s){var a=o?o+e:e;if(!this._events||!this._events[a])return!1;var u,l,h=this._events[a],c=arguments.length;if("function"==typeof h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,r),!0;case 4:return h.fn.call(h.context,t,r,n),!0;case 5:return h.fn.call(h.context,t,r,n,i),!0;case 6:return h.fn.call(h.context,t,r,n,i,s),!0}for(l=1,u=new Array(c-1);c>l;l++)u[l-1]=arguments[l];h.fn.apply(h.context,u)}else{var d,p=h.length;for(l=0;p>l;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),c){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,r);break;default:if(!u)for(d=1,u=new Array(c-1);c>d;d++)u[d-1]=arguments[d];h[l].fn.apply(h[l].context,u)}}return!0},i.prototype.on=function(e,t,r){var i=new n(t,r||this),s=o?o+e:e;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.once=function(e,t,r){var i=new n(t,r||this,!0),s=o?o+e:e;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.removeListener=function(e,t,r,n){var i=o?o+e:e;if(!this._events||!this._events[i])return this;var s=this._events[i],a=[];if(t)if(s.fn)(s.fn!==t||n&&!s.once||r&&s.context!==r)&&a.push(s);else for(var u=0,l=s.length;l>u;u++)(s[u].fn!==t||n&&!s[u].once||r&&s[u].context!==r)&&a.push(s[u]);return a.length?this._events[i]=1===a.length?a[0]:a:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[o?o+e:e]:this._events=o?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=o,t.exports=i},{}],130:[function(e,t,r){function n(e,t){a.call(this),t=t||10,this.baseUrl=e||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=i.queue(this._boundLoadResource,t),this.resources={}}var i=e("async"),o=e("url"),s=e("./Resource"),a=e("eventemitter3");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.add=n.prototype.enqueue=function(e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}if("object"==typeof e&&(n=t||e.callback||e.onComplete,r=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(n=r,r=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.resources[e])throw new Error('Resource with name "'+e+'" already exists.');return t=this._handleBaseUrl(t),this.resources[e]=new s(e,t,r),"function"==typeof n&&this.resources[e].once("afterMiddleware",n),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[e]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[e]),this._progressChunk=100/this._buffer.length),this},n.prototype._handleBaseUrl=function(e){var t=o.parse(e);return t.protocol||0===t.pathname.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e},n.prototype.before=n.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},n.prototype.after=n.prototype.use=function(e){return this._afterMiddleware.push(e),this},n.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},n.prototype.load=function(e){if("function"==typeof e&&this.once("complete",e),this._queue.started)return this;this.emit("start",this);for(var t=0;t<this._buffer.length;++t)this._queue.push(this._buffer[t]);return this._buffer.length=0,this},n.prototype._loadResource=function(e,t){var r=this;e._dequeue=t,this._runMiddleware(e,this._beforeMiddleware,function(){e.load(r._boundOnLoad)})},n.prototype._onComplete=function(){this.emit("complete",this,this.resources)},n.prototype._onLoad=function(e){this.progress+=this._progressChunk,this.emit("progress",this,e),this._runMiddleware(e,this._afterMiddleware,function(){e.emit("afterMiddleware",e),this._numToLoad--,0===this._numToLoad&&(this.progress=100,this._onComplete()),e.error?this.emit("error",e.error,this,e):this.emit("load",this,e)}),e._dequeue()},n.prototype._runMiddleware=function(e,t,r){var n=this;i.eachSeries(t,function(t,r){t.call(n,e,r)},r.bind(this,e))},n.LOAD_TYPE=s.LOAD_TYPE,n.XHR_READY_STATE=s.XHR_READY_STATE,n.XHR_RESPONSE_TYPE=s.XHR_RESPONSE_TYPE},{"./Resource":131,async:128,eventemitter3:129,url:8}],131:[function(e,t,r){function n(e,t,r){if(s.call(this),r=r||{},"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");this.name=e,this.url=t,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=r.crossOrigin===!0?"anonymous":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function i(e){return e.toString().replace("object ","")}function o(e,t,r){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=r)}var s=e("eventemitter3"),a=e("url"),u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,t.exports=n,n.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},n.prototype.load=function(e){switch(this.emit("start",this),e&&this.once("complete",e),(this.crossOrigin===!1||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this._loadImage();break;case n.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case n.LOAD_TYPE.VIDEO:this._loadElement("video");break;case n.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}},n.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},n.prototype._loadElement=function(e){if("audio"===e&&"undefined"!=typeof Audio?this.data=new Audio:this.data=document.createElement(e),null===this.data)return this.error=new Error("Unsupported element "+e),void this.complete();if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=0;t<this.url.length;++t)this.data.appendChild(this._createSource(e,this.url[t]));else this.data.appendChild(this._createSource(e,this.url));this["is"+e[0].toUpperCase()+e.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},n.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=n.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},n.prototype._loadXdr=function(){
"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){e.send()},0)},n.prototype._createSource=function(e,t,r){r||(r=e+"/"+t.substr(t.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=t,n.type=r,n},n.prototype._onError=function(e){this.error=new Error("Failed to load element using "+e.target.nodeName),this.complete()},n.prototype._onProgress=function(e){e&&e.lengthComputable&&this.emit("progress",this,e.loaded/e.total)},n.prototype._xhrOnError=function(){this.error=new Error(i(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},n.prototype._xhrOnAbort=function(){this.error=new Error(i(this.xhr)+" Request was aborted by the user."),this.complete()},n.prototype._xdrOnTimeout=function(){this.error=new Error(i(this.xhr)+" Request timed out."),this.complete()},n.prototype._xhrOnLoad=function(){var e=this.xhr,t=void 0!==e.status?e.status:200;if(200===t||204===t||0===t&&e.responseText.length>0)if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=e.responseText;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e.responseText),this.isJson=!0}catch(r){this.error=new Error("Error trying to parse loaded json:",r)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(e.responseText,"text/xml")}else{var o=document.createElement("div");o.innerHTML=e.responseText,this.data=o}this.isXml=!0}catch(r){this.error=new Error("Error trying to parse loaded xml:",r)}else this.data=e.response||e.responseText;else this.error=new Error("["+e.status+"]"+e.statusText+":"+e.responseURL);this.complete()},n.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,l||(l=document.createElement("a")),l.href=e,e=a.parse(l.href);var r=!e.port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&r&&e.protocol===t.protocol?"":"anonymous"},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this._getExtension()]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this._getExtension()]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(){var e,t=this.url;if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var n=t.indexOf("?");-1!==n&&(t=t.substring(0,n)),e=t.substring(t.lastIndexOf(".")+1)}return e},n.prototype._getMimeFromXhrType=function(e){switch(e){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},n.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},n.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT},n.setExtensionLoadType=function(e,t){o(n._loadTypeMap,e,t)},n.setExtensionXhrType=function(e,t){o(n._xhrTypeMap,e,t)}},{eventemitter3:129,url:8}],132:[function(e,t,r){t.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(e){for(var t,r="",n=new Array(4),i=0,o=0,s=0;i<e.length;){for(t=new Array(3),o=0;o<t.length;o++)i<e.length?t[o]=255&e.charCodeAt(i++):t[o]=0;switch(n[0]=t[0]>>2,n[1]=(3&t[0])<<4|t[1]>>4,n[2]=(15&t[1])<<2|t[2]>>6,n[3]=63&t[2],s=i-(e.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(o=0;o<n.length;o++)r+=this._keyStr.charAt(n[o])}return r}}},{}],133:[function(e,t,r){t.exports=e("./Loader"),t.exports.Resource=e("./Resource"),t.exports.middleware={caching:{memory:e("./middlewares/caching/memory")},parsing:{blob:e("./middlewares/parsing/blob")}}},{"./Loader":130,"./Resource":131,"./middlewares/caching/memory":134,"./middlewares/parsing/blob":135}],134:[function(e,t,r){var n={};t.exports=function(){return function(e,t){n[e.url]?(e.data=n[e.url],e.complete()):e.once("complete",function(){n[this.url]=this.data}),t()}}},{}],135:[function(e,t,r){var n=e("../../Resource"),i=e("../../b64");window.URL=window.URL||window.webkitURL,t.exports=function(){return function(e,t){if(!e.data)return t();if(e.xhr&&e.xhrType===n.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var r=URL.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=r,e.isImage=!0,e.data.onload=function(){URL.revokeObjectURL(r),e.data.onload=null,t()}}}else{var o=e.xhr.getResponseHeader("content-type");o&&0===o.indexOf("image")&&(e.data=new Image,e.data.src="data:"+o+";base64,"+i.encodeBinary(e.xhr.responseText),e.isImage=!0,e.data.onload=function(){e.data.onload=null,t()})}else t()}}},{"../../Resource":131,"../../b64":132}]},{},[108])(108)});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Bump=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?PIXI:arguments[0];if(_classCallCheck(this,e),void 0===t)throw new Error("Please assign a rendering engine in the constructor before using bump.js");this.renderer="",t.ParticleContainer&&t.Sprite&&(this.renderer="pixi")}return _createClass(e,[{key:"addCollisionProperties",value:function(e){"pixi"===this.renderer&&(void 0===e.gx&&Object.defineProperty(e,"gx",{get:function(){return e.getGlobalPosition().x},enumerable:!0,configurable:!0}),void 0===e.gy&&Object.defineProperty(e,"gy",{get:function(){return e.getGlobalPosition().y},enumerable:!0,configurable:!0}),void 0===e.centerX&&Object.defineProperty(e,"centerX",{get:function(){return e.x+e.width/2},enumerable:!0,configurable:!0}),void 0===e.centerY&&Object.defineProperty(e,"centerY",{get:function(){return e.y+e.height/2},enumerable:!0,configurable:!0}),void 0===e.halfWidth&&Object.defineProperty(e,"halfWidth",{get:function(){return e.width/2},enumerable:!0,configurable:!0}),void 0===e.halfHeight&&Object.defineProperty(e,"halfHeight",{get:function(){return e.height/2},enumerable:!0,configurable:!0}),void 0===e.xAnchorOffset&&Object.defineProperty(e,"xAnchorOffset",{get:function(){return void 0!==e.anchor?e.height*e.anchor.x:0},enumerable:!0,configurable:!0}),void 0===e.yAnchorOffset&&Object.defineProperty(e,"yAnchorOffset",{get:function(){return void 0!==e.anchor?e.width*e.anchor.y:0},enumerable:!0,configurable:!0}),e.circular&&void 0===e.radius&&Object.defineProperty(e,"radius",{get:function(){return e.width/2},enumerable:!0,configurable:!0})),e._bumpPropertiesAdded=!0}},{key:"hitTestPoint",value:function(e,t){t._bumpPropertiesAdded||this.addCollisionProperties(t);var r=void 0,n=void 0,i=void 0,o=void 0,s=void 0,a=void 0;if(r=t.radius?"circle":"rectangle","rectangle"===r&&(n=t.x-t.xAnchorOffset,i=t.x+t.width-t.xAnchorOffset,o=t.y-t.yAnchorOffset,s=t.y+t.height-t.yAnchorOffset,a=e.x>n&&e.x<i&&e.y>o&&e.y<s),"circle"===r){var u=e.x-t.x-t.width/2+t.xAnchorOffset,l=e.y-t.y-t.height/2+t.yAnchorOffset,h=Math.sqrt(u*u+l*l);a=h<t.radius}return a}},{key:"hitTestCircle",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];e._bumpPropertiesAdded||this.addCollisionProperties(e),t._bumpPropertiesAdded||this.addCollisionProperties(t);var n=void 0,i=void 0,o=void 0,s=void 0,a=void 0;return r?(n=t.gx+t.width/2-t.xAnchorOffset-(e.gx+e.width/2-e.xAnchorOffset),i=t.gy+t.width/2-t.yAnchorOffset-(e.gy+e.width/2-e.yAnchorOffset)):(n=t.x+t.width/2-t.xAnchorOffset-(e.x+e.width/2-e.xAnchorOffset),i=t.y+t.width/2-t.yAnchorOffset-(e.y+e.width/2-e.yAnchorOffset)),o=Math.sqrt(n*n+i*i),s=e.radius+t.radius,a=s>o}},{key:"circleCollision",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];e._bumpPropertiesAdded||this.addCollisionProperties(e),t._bumpPropertiesAdded||this.addCollisionProperties(t);var i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=void 0,h=void 0,c={},d=!1;if(n?(a=t.gx+t.width/2-t.xAnchorOffset-(e.gx+e.width/2-e.xAnchorOffset),u=t.gy+t.width/2-t.yAnchorOffset-(e.gy+e.width/2-e.yAnchorOffset)):(a=t.x+t.width/2-t.xAnchorOffset-(e.x+e.width/2-e.xAnchorOffset),u=t.y+t.width/2-t.yAnchorOffset-(e.y+e.width/2-e.yAnchorOffset)),i=Math.sqrt(a*a+u*u),o=e.radius+t.radius,o>i){d=!0,s=o-i;var p=.3;s+=p,l=a/i,h=u/i,e.x-=s*l,e.y-=s*h,r&&(c.x=u,c.y=-a,this.bounceOffSurface(e,c))}return d}},{key:"movingCircleCollision",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];e._bumpPropertiesAdded||this.addCollisionProperties(e),t._bumpPropertiesAdded||this.addCollisionProperties(t);var n=void 0,i=void 0,o=void 0,s=void 0,a={},u={},l={},h={},c={},d=!1;if(e.mass=e.mass||1,t.mass=t.mass||1,r?(a.vx=t.gx+t.radius-t.xAnchorOffset-(e.gx+e.radius-e.xAnchorOffset),a.vy=t.gy+t.radius-t.yAnchorOffset-(e.gy+e.radius-e.yAnchorOffset)):(a.vx=t.x+t.radius-t.xAnchorOffset-(e.x+e.radius-e.xAnchorOffset),a.vy=t.y+t.radius-t.yAnchorOffset-(e.y+e.radius-e.yAnchorOffset)),a.magnitude=Math.sqrt(a.vx*a.vx+a.vy*a.vy),n=e.radius+t.radius,a.magnitude<n){d=!0,i=n-a.magnitude,i+=.3,a.dx=a.vx/a.magnitude,a.dy=a.vy/a.magnitude,a.vxHalf=Math.abs(a.dx*i/2),a.vyHalf=Math.abs(a.dy*i/2),o=e.x>t.x?1:-1,s=e.y>t.y?1:-1,e.x=e.x+a.vxHalf*o,e.y=e.y+a.vyHalf*s,t.x=t.x+a.vxHalf*-o,t.y=t.y+a.vyHalf*-s,a.lx=a.vy,a.ly=-a.vx;var p=e.vx*a.dx+e.vy*a.dy;u.x=p*a.dx,u.y=p*a.dy;var f=e.vx*(a.lx/a.magnitude)+e.vy*(a.ly/a.magnitude);l.x=f*(a.lx/a.magnitude),l.y=f*(a.ly/a.magnitude);var g=t.vx*a.dx+t.vy*a.dy;h.x=g*a.dx,h.y=g*a.dy;var v=t.vx*(a.lx/a.magnitude)+t.vy*(a.ly/a.magnitude);c.x=v*(a.lx/a.magnitude),c.y=v*(a.ly/a.magnitude),e.bounce={},e.bounce.x=l.x+h.x,e.bounce.y=l.y+h.y,t.bounce={},t.bounce.x=u.x+c.x,t.bounce.y=u.y+c.y,e.vx=e.bounce.x/e.mass,e.vy=e.bounce.y/e.mass,t.vx=t.bounce.x/t.mass,t.vy=t.bounce.y/t.mass}return d}},{key:"multipleCircleCollision",value:function(e){for(var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=0;r<e.length;r++)for(var n=e[r],i=r+1;i<e.length;i++){var o=e[i];this.movingCircleCollision(n,o,t)}}},{key:"rectangleCollision",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!0:arguments[3];e._bumpPropertiesAdded||this.addCollisionProperties(e),t._bumpPropertiesAdded||this.addCollisionProperties(t);var i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=void 0,h=void 0;return n?(l=e.gx+e.halfWidth-e.xAnchorOffset-(t.gx+t.halfWidth-t.xAnchorOffset),h=e.gy+e.halfHeight-e.yAnchorOffset-(t.gy+t.halfHeight-t.yAnchorOffset)):(l=e.x+e.halfWidth-e.xAnchorOffset-(t.x+t.halfWidth-t.xAnchorOffset),h=e.y+e.halfHeight-e.yAnchorOffset-(t.y+t.halfHeight-t.yAnchorOffset)),o=e.halfWidth+t.halfWidth,s=e.halfHeight+t.halfHeight,Math.abs(l)<o&&Math.abs(h)<s&&(a=o-Math.abs(l),u=s-Math.abs(h),a>=u?(h>0?(i="top",e.y=e.y+u):(i="bottom",e.y=e.y-u),r&&(e.vy*=-1)):(l>0?(i="left",e.x=e.x+a):(i="right",e.x=e.x-a),r&&(e.vx*=-1))),i}},{key:"hitTestRectangle",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];e._bumpPropertiesAdded||this.addCollisionProperties(e),t._bumpPropertiesAdded||this.addCollisionProperties(t);var n=void 0,i=void 0,o=void 0,s=void 0,a=void 0;return n=!1,r?(s=e.gx+e.halfWidth-e.xAnchorOffset-(t.gx+t.halfWidth-t.xAnchorOffset),a=e.gy+e.halfHeight-e.yAnchorOffset-(t.gy+t.halfHeight-t.yAnchorOffset)):(s=e.x+e.halfWidth-e.xAnchorOffset-(t.x+t.halfWidth-t.xAnchorOffset),a=e.y+e.halfHeight-e.yAnchorOffset-(t.y+t.halfHeight-t.yAnchorOffset)),i=e.halfWidth+t.halfWidth,o=e.halfHeight+t.halfHeight,n=Math.abs(s)<i&&Math.abs(a)<o?!0:!1}},{key:"hitTestCircleRectangle",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];t._bumpPropertiesAdded||this.addCollisionProperties(t),e._bumpPropertiesAdded||this.addCollisionProperties(e);var n=void 0,i=void 0,o=void 0,s=void 0,a=void 0,u=void 0;if(r?(o=e.gx,s=e.gy,a=t.gx,u=t.gy):(o=e.x,s=e.y,a=t.x,u=t.y),n=s-e.yAnchorOffset<u-t.halfHeight-t.yAnchorOffset?o-e.xAnchorOffset<a-1-t.halfWidth-t.xAnchorOffset?"topLeft":o-e.xAnchorOffset>a+1+t.halfWidth-t.xAnchorOffset?"topRight":"topMiddle":s-e.yAnchorOffset>u+t.halfHeight-t.yAnchorOffset?o-e.xAnchorOffset<a-1-t.halfWidth-t.xAnchorOffset?"bottomLeft":o-e.xAnchorOffset>a+1+t.halfWidth-t.xAnchorOffset?"bottomRight":"bottomMiddle":o-e.xAnchorOffset<a-t.halfWidth-t.xAnchorOffset?"leftMiddle":"rightMiddle","topMiddle"===n||"bottomMiddle"===n||"leftMiddle"===n||"rightMiddle"===n)i=this.hitTestRectangle(e,t,r);else{var l={};switch(n){case"topLeft":l.x=a-t.xAnchorOffset,l.y=u-t.yAnchorOffset;break;case"topRight":l.x=a+t.width-t.xAnchorOffset,l.y=u-t.yAnchorOffset;break;case"bottomLeft":l.x=a-t.xAnchorOffset,l.y=u+t.height-t.yAnchorOffset;break;case"bottomRight":l.x=a+t.width-t.xAnchorOffset,l.y=u+t.height-t.yAnchorOffset}i=this.hitTestCirclePoint(e,l,r)}return i?n:i}},{key:"hitTestCirclePoint",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return e._bumpPropertiesAdded||this.addCollisionProperties(e),t.diameter=1,t.width=t.diameter,t.radius=.5,t.centerX=t.x,t.centerY=t.y,t.gx=t.x,t.gy=t.y,t.xAnchorOffset=0,t.yAnchorOffset=0,t._bumpPropertiesAdded=!0,this.hitTestCircle(e,t,r)}},{key:"circleRectangleCollision",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];t._bumpPropertiesAdded||this.addCollisionProperties(t),e._bumpPropertiesAdded||this.addCollisionProperties(e);var i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,l=void 0;if(n?(s=e.gx,a=e.gy,u=t.gx,l=t.gy):(s=e.x,a=e.y,u=t.x,l=t.y),i=a-e.yAnchorOffset<l-t.halfHeight-t.yAnchorOffset?s-e.xAnchorOffset<u-1-t.halfWidth-t.xAnchorOffset?"topLeft":s-e.xAnchorOffset>u+1+t.halfWidth-t.xAnchorOffset?"topRight":"topMiddle":a-e.yAnchorOffset>l+t.halfHeight-t.yAnchorOffset?s-e.xAnchorOffset<u-1-t.halfWidth-t.xAnchorOffset?"bottomLeft":s-e.xAnchorOffset>u+1+t.halfWidth-t.xAnchorOffset?"bottomRight":"bottomMiddle":s-e.xAnchorOffset<u-t.halfWidth-t.xAnchorOffset?"leftMiddle":"rightMiddle","topMiddle"===i||"bottomMiddle"===i||"leftMiddle"===i||"rightMiddle"===i)o=this.rectangleCollision(e,t,r,n);else{var h={};switch(i){case"topLeft":h.x=u-t.xAnchorOffset,h.y=l-t.yAnchorOffset;break;case"topRight":h.x=u+t.width-t.xAnchorOffset,h.y=l-t.yAnchorOffset;break;case"bottomLeft":h.x=u-t.xAnchorOffset,h.y=l+t.height-t.yAnchorOffset;break;case"bottomRight":h.x=u+t.width-t.xAnchorOffset,h.y=l+t.height-t.yAnchorOffset}o=this.circlePointCollision(e,h,r,n)}return o?i:o}},{key:"circlePointCollision",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];return e._bumpPropertiesAdded||this.addCollisionProperties(e),t.diameter=1,t.width=t.diameter,t.radius=.5,t.centerX=t.x,t.centerY=t.y,t.gx=t.x,t.gy=t.y,t.xAnchorOffset=0,t.yAnchorOffset=0,t._bumpPropertiesAdded=!0,this.circleCollision(e,t,r,n)}},{key:"bounceOffSurface",value:function(e,t){e._bumpPropertiesAdded||this.addCollisionProperties(e);var r=void 0,n=void 0,i={},o={},s={},a=e.mass||1;t.lx=t.y,t.ly=-t.x,t.magnitude=Math.sqrt(t.x*t.x+t.y*t.y),t.dx=t.x/t.magnitude,t.dy=t.y/t.magnitude,r=e.vx*t.dx+e.vy*t.dy,i.vx=r*t.dx,i.vy=r*t.dy,n=e.vx*(t.lx/t.magnitude)+e.vy*(t.ly/t.magnitude),o.vx=n*(t.lx/t.magnitude),o.vy=n*(t.ly/t.magnitude),o.vx*=-1,o.vy*=-1,s.x=i.vx+o.vx,s.y=i.vy+o.vy,e.vx=s.x/a,e.vy=s.y/a}},{key:"contain",value:function(e,t){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=arguments.length<=3||void 0===arguments[3]?void 0:arguments[3];e._bumpPropertiesAdded||this.addCollisionProperties(e),void 0===t.xAnchorOffset&&(t.xAnchorOffset=0),void 0===t.yAnchorOffset&&(t.yAnchorOffset=0),void 0===e.parent.gx&&(e.parent.gx=0),void 0===e.parent.gy&&(e.parent.gy=0);var i=new Set;return e.x-e.xAnchorOffset<t.x-e.parent.gx-t.xAnchorOffset&&(r&&(e.vx*=-1),e.mass&&(e.vx/=e.mass),e.x=t.x-e.parent.gx-t.xAnchorOffset+e.xAnchorOffset,i.add("left")),e.y-e.yAnchorOffset<t.y-e.parent.gy-t.yAnchorOffset&&(r&&(e.vy*=-1),e.mass&&(e.vy/=e.mass),e.y=t.y-e.parent.gy-t.yAnchorOffset+e.yAnchorOffset,i.add("top")),e.x-e.xAnchorOffset+e.width>t.width-t.xAnchorOffset&&(r&&(e.vx*=-1),e.mass&&(e.vx/=e.mass),e.x=t.width-e.width-t.xAnchorOffset+e.xAnchorOffset,i.add("right")),e.y-e.yAnchorOffset+e.height>t.height-t.yAnchorOffset&&(r&&(e.vy*=-1),e.mass&&(e.vy/=e.mass),e.y=t.height-e.height-t.yAnchorOffset+e.yAnchorOffset,i.add("bottom")),0===i.size&&(i=void 0),i&&n&&n(i),i}},{key:"outsideBounds",value:function(e,t,r){var n=t.x,i=t.y,o=t.width,s=t.height,a=new Set;return e.x<n-e.width&&a.add("left"),e.y<i-e.height&&a.add("top"),e.x>o+e.width&&a.add("right"),e.y>s+e.height&&a.add("bottom"),0===a.size&&(a=void 0),a&&r&&r(a),a}},{key:"_getCenter",value:function(e,t,r){return void 0!==e.anchor?0!==e.anchor[r]?0:t/2:t}},{key:"hit",value:function(e,t){function r(e,t){var r=void 0!==e.parent,n=void 0!==t.parent;if(r&&n)return e.diameter&&t.diameter?i(e,t):e.diameter&&!t.diameter?s(e,t):o(e,t);if(n&&void 0!==e.x&&void 0!==e.y)return c(e,t);throw new Error("I'm sorry, "+e+" and "+t+" cannot be use together in a collision test.'")}function n(){if(e instanceof Array)var n=[o,i],i=n[0],o=n[1];for(var s=t.length-1;s>=0;s--){var a=t[s];x=r(e,a),x&&h&&h(x,a)}}function i(e,t){return a?e.vx+e.vy!==0&&t.vx+t.vy!==0?f(e,t,l):g(e,t,u,l):p(e,t)}function o(e,t){return a?m(e,t,u,l):d(e,t,l)}function s(e,t){return a?y(e,t,u,l):v(e,t,l)}var a=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],u=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],l=arguments[4],h=arguments.length<=5||void 0===arguments[5]?void 0:arguments[5],c=this.hitTestPoint.bind(this),d=this.hitTestRectangle.bind(this),p=this.hitTestCircle.bind(this),f=this.movingCircleCollision.bind(this),g=this.circleCollision.bind(this),v=this.hitTestCircleRectangle.bind(this),m=this.rectangleCollision.bind(this),y=this.circleRectangleCollision.bind(this),x=void 0,b=void 0!==e.parent,_=void 0!==t.parent;return b&&t instanceof Array||_&&e instanceof Array?n():(x=r(e,t),x&&h&&h(x)),x}}]),e}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Charm=function(){function e(){var t=this,r=void 0===arguments[0]?PIXI:arguments[0];if(_classCallCheck(this,e),void 0===r)throw new Error("Please assign a rendering engine in the constructor before using charm.js");this.renderer="",r.ParticleContainer&&r.Sprite&&(this.renderer="pixi"),this.globalTweens=[],this.easingFormulas={linear:function(e){return e},smoothstep:function(e){return e*e*(3-2*e)},smoothstepSquared:function(e){return Math.pow(e*e*(3-2*e),2)},smoothstepCubed:function(e){return Math.pow(e*e*(3-2*e),3)},acceleration:function(e){return e*e},accelerationCubed:function(e){return Math.pow(e*e,3)},deceleration:function(e){return 1-Math.pow(1-e,2)},decelerationCubed:function(e){return 1-Math.pow(1-e,3)},sine:function(e){return Math.sin(e*Math.PI/2)},sineSquared:function(e){return Math.pow(Math.sin(e*Math.PI/2),2)},sineCubed:function(e){return Math.pow(Math.sin(e*Math.PI/2),2)},inverseSine:function(e){return 1-Math.sin((1-e)*Math.PI/2)},inverseSineSquared:function(e){return 1-Math.pow(Math.sin((1-e)*Math.PI/2),2)},inverseSineCubed:function(e){return 1-Math.pow(Math.sin((1-e)*Math.PI/2),3)},spline:function(e,t,r,n,i){return.5*(2*r+(-t+n)*e+(2*t-5*r+4*n-i)*e*e+(-t+3*r-3*n+i)*e*e*e)},cubicBezier:function(e,t,r,n,i){var o=e*e,s=o*e;return t+(3*-t+e*(3*t-t*e))*e+(3*r+e*(-6*r+3*r*e))*e+(3*n-3*n*e)*o+i*s}},this._addScaleProperties=function(e){"pixi"===t.renderer&&(!e.scaleX&&e.scale.x&&Object.defineProperty(e,"scaleX",{get:function(){return e.scale.x},set:function(t){e.scale.x=t}}),!e.scaleY&&e.scale.y&&Object.defineProperty(e,"scaleY",{get:function(){return e.scale.y},set:function(t){e.scale.y=t}}))}}return _createClass(e,[{key:"tweenProperty",value:function(e,t,r,n,i){var o=void 0===arguments[5]?"smoothstep":arguments[5],s=this,a=void 0===arguments[6]?!1:arguments[6],u=void 0===arguments[7]?0:arguments[7],l={},h=o.split(" ");return"bounce"===h[0]&&(l.startMagnitude=parseInt(h[1]),l.endMagnitude=parseInt(h[2])),l.start=function(e,t){l.startValue=JSON.parse(JSON.stringify(e)),l.endValue=JSON.parse(JSON.stringify(t)),l.playing=!0,l.totalFrames=i,l.frameCounter=0,s.globalTweens.push(l)},l.start(r,n),l.update=function(){var r=void 0;if(l.playing)if(l.frameCounter<l.totalFrames){var n=l.frameCounter/l.totalFrames;r="bounce"!==h[0]?s.easingFormulas[o](n):s.easingFormulas.spline(n,l.startMagnitude,0,1,l.endMagnitude),e[t]=l.endValue*r+l.startValue*(1-r),l.frameCounter+=1}else l.end()},l.end=function(){l.playing=!1,l.onComplete&&l.onComplete(),s.globalTweens.splice(s.globalTweens.indexOf(l),1),a&&s.wait(u).then(function(){l.start(l.endValue,l.startValue)})},l.play=function(){return l.playing=!0},l.pause=function(){return l.playing=!1},l}},{key:"makeTween",value:function(e){var t=this,r={};r.tweens=[],e.forEach(function(e){var n=t.tweenProperty.apply(t,_toConsumableArray(e));r.tweens.push(n)});var n=0;return r.completed=function(){n+=1,n===r.tweens.length&&(r.onComplete&&r.onComplete(),n=0)},r.tweens.forEach(function(e){e.onComplete=function(){return r.completed()}}),r.pause=function(){r.tweens.forEach(function(e){e.playing=!1})},r.play=function(){r.tweens.forEach(function(e){e.playing=!0})},r}},{key:"fadeOut",value:function(e){var t=void 0===arguments[1]?60:arguments[1];return this.tweenProperty(e,"alpha",e.alpha,0,t,"sine")}},{key:"fadeIn",value:function(e){var t=void 0===arguments[1]?60:arguments[1];return this.tweenProperty(e,"alpha",e.alpha,1,t,"sine")}},{key:"pulse",value:function(e){var t=void 0===arguments[1]?60:arguments[1],r=void 0===arguments[2]?0:arguments[2];return this.tweenProperty(e,"alpha",e.alpha,r,t,"smoothstep",!0)}},{key:"slide",value:function(e,t,r){var n=void 0===arguments[3]?60:arguments[3],i=void 0===arguments[4]?"smoothstep":arguments[4],o=void 0===arguments[5]?!1:arguments[5],s=void 0===arguments[6]?0:arguments[6];return this.makeTween([[e,"x",e.x,t,n,i,o,s],[e,"y",e.y,r,n,i,o,s]])}},{key:"breathe",value:function(e){var t=void 0===arguments[1]?.8:arguments[1],r=void 0===arguments[2]?.8:arguments[2],n=void 0===arguments[3]?60:arguments[3],i=void 0===arguments[4]?!0:arguments[4],o=void 0===arguments[5]?0:arguments[5];return this._addScaleProperties(e),this.makeTween([[e,"scaleX",e.scaleX,t,n,"smoothstepSquared",i,o],[e,"scaleY",e.scaleY,r,n,"smoothstepSquared",i,o]])}},{key:"scale",value:function(e){var t=void 0===arguments[1]?.5:arguments[1],r=void 0===arguments[2]?.5:arguments[2],n=void 0===arguments[3]?60:arguments[3];return this._addScaleProperties(e),this.makeTween([[e,"scaleX",e.scaleX,t,n,"smoothstep",!1],[e,"scaleY",e.scaleY,r,n,"smoothstep",!1]])}},{key:"strobe",value:function(e){var t=void 0===arguments[1]?1.3:arguments[1],r=void 0===arguments[2]?10:arguments[2],n=void 0===arguments[3]?20:arguments[3],i=void 0===arguments[4]?10:arguments[4],o=void 0===arguments[5]?!0:arguments[5],s=void 0===arguments[6]?0:arguments[6],a="bounce "+r+" "+n;return this._addScaleProperties(e),this.makeTween([[e,"scaleX",e.scaleX,t,i,a,o,s],[e,"scaleY",e.scaleY,t,i,a,o,s]])}},{key:"wobble",value:function(e){var t=void 0===arguments[1]?1.2:arguments[1],r=void 0===arguments[2]?1.2:arguments[2],n=void 0===arguments[3]?10:arguments[3],i=void 0===arguments[4]?10:arguments[4],o=void 0===arguments[5]?10:arguments[5],s=void 0===arguments[6]?-10:arguments[6],a=void 0===arguments[7]?-10:arguments[7],u=void 0===arguments[8]?.98:arguments[8],l=this,h=void 0===arguments[9]?!0:arguments[9],c=void 0===arguments[10]?0:arguments[10],d="bounce "+i+" "+o,p="bounce "+s+" "+a;this._addScaleProperties(e);var f=this.makeTween([[e,"scaleX",e.scaleX,t,n,d,h,c],[e,"scaleY",e.scaleY,r,n,p,h,c]]);return f.tweens.forEach(function(e){e.onComplete=function(){e.endValue>1&&(e.endValue*=u,e.endValue<=1&&(e.endValue=1,l.removeTween(e)))}}),f}},{key:"followCurve",value:function(e,t,r){var n=void 0===arguments[3]?"smoothstep":arguments[3],i=this,o=void 0===arguments[4]?!1:arguments[4],s=void 0===arguments[5]?0:arguments[5],a={},u=n.split(" ");return"bounce"===u[0]&&(a.startMagnitude=parseInt(u[1]),a.endMagnitude=parseInt(u[2])),a.start=function(e){a.playing=!0,a.totalFrames=r,a.frameCounter=0,a.pointsArray=JSON.parse(JSON.stringify(e)),i.globalTweens.push(a)},a.start(t),a.update=function(){var t=void 0,r=void 0,o=a.pointsArray;a.playing&&(a.frameCounter<a.totalFrames?(t=a.frameCounter/a.totalFrames,r="bounce"!==u[0]?i.easingFormulas[n](t):i.easingFormulas.spline(t,a.startMagnitude,0,1,a.endMagnitude),e.x=i.easingFormulas.cubicBezier(r,o[0][0],o[1][0],o[2][0],o[3][0]),e.y=i.easingFormulas.cubicBezier(r,o[0][1],o[1][1],o[2][1],o[3][1]),a.frameCounter+=1):a.end())},a.end=function(){a.playing=!1,a.onComplete&&a.onComplete(),i.globalTweens.splice(i.globalTweens.indexOf(a),1),o&&i.wait(s).then(function(){a.pointsArray=a.pointsArray.reverse(),a.start(a.pointsArray)})},a.pause=function(){a.playing=!1},a.play=function(){a.playing=!0},a}},{key:"walkPath",value:function(e,t){var r=void 0===arguments[2]?300:arguments[2],n=void 0===arguments[3]?"smoothstep":arguments[3],i=void 0===arguments[4]?!1:arguments[4],o=this,s=void 0===arguments[5]?!1:arguments[5],a=void 0===arguments[6]?0:arguments[6],u=JSON.parse(JSON.stringify(t)),l=r/u.length,h=0,c=function p(t){var r=o.makeTween([[e,"x",u[t][0],u[t+1][0],l,n],[e,"y",u[t][1],u[t+1][1],l,n]]);return r.onComplete=function(){t+=1,t<u.length-1?o.wait(a).then(function(){r=p(t)}):i&&(s&&u.reverse(),o.wait(a).then(function(){t=0,e.x=u[0][0],e.y=u[0][1],r=p(t)}))},r},d=c(h);return d}},{key:"walkCurve",value:function(e,t){var r=void 0===arguments[2]?300:arguments[2],n=void 0===arguments[3]?"smoothstep":arguments[3],i=void 0===arguments[4]?!1:arguments[4],o=this,s=void 0===arguments[5]?!1:arguments[5],a=void 0===arguments[6]?0:arguments[6],u=r/t.length,l=0,h=function d(r){var l=o.followCurve(e,t[r],u,n);return l.onComplete=function(){r+=1,r<t.length?o.wait(a).then(function(){l=d(r)}):i&&(s&&(t.reverse(),t.forEach(function(e){return e.reverse()})),o.wait(a).then(function(){r=0,e.x=t[0][0],e.y=t[0][1],l=d(r)}))},l},c=h(l);return c}},{key:"wait",value:function(){var e=void 0===arguments[0]?0:arguments[0];return new Promise(function(t,r){setTimeout(t,e)})}},{key:"removeTween",value:function(e){var t=this;e.tweens?(e.pause(),e.tweens.forEach(function(e){t.globalTweens.splice(t.globalTweens.indexOf(e),1)})):(e.pause(),this.globalTweens.splice(this.globalTweens.indexOf(e),1))}},{key:"update",value:function(){if(this.globalTweens.length>0)for(var e=this.globalTweens.length-1;e>=0;e--){var t=this.globalTweens[e];t&&t.update()}}}]),e}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Smoothie=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{engine:PIXI,renderer:void 0,root:void 0,update:void 0,interpolate:!0,fps:60,renderFps:void 0,properties:{position:!0,rotation:!0,size:!1,scale:!1,alpha:!1,tile:!1}}:arguments[0];if(_classCallCheck(this,e),void 0===t.engine)throw new Error("Please assign a rendering engine as Smoothie's engine option");if(this.engine="",t.engine.ParticleContainer&&t.engine.Sprite&&(this.renderingEngine="pixi",this.Container=t.engine.Container,this.Sprite=t.engine.Sprite,this.MovieClip=t.engine.extras.MovieClip),void 0===t.renderer)throw new Error("Please assign a renderer object as Smoothie's renderer option");if(this.renderer=t.renderer,void 0===t.root)throw new Error("Please assign a root container object (the stage) as Smoothie's rootr option");if(this.stage=t.root,void 0===t.update)throw new Error("Please assign a function that you want to update on each frame as Smoothie's update option");this.update=t.update,void 0===t.properties?this.properties={position:!0,rotation:!0}:this.properties=t.properties,void 0!==t.fps?this._fps=t.fps:this._fps=void 0,void 0!==t.renderFps?this._renderFps=t.renderFps:this._renderFps=void 0,t.interpolate===!1?this.interpolate=!1:this.interpolate=!0,this.paused=!1,this._startTime=Date.now(),this._frameDuration=1e3/this._fps,this._lag=0,this._lagOffset=0,this._renderStartTime=0,void 0!==this._renderFps&&(this._renderDuration=1e3/this._renderFps)}return _createClass(e,[{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}},{key:"start",value:function(){this.gameLoop()}},{key:"gameLoop",value:function(e){var t=this;if(requestAnimationFrame(this.gameLoop.bind(this)),!this.paused){var r=function(){var e=Date.now(),r=e-t._startTime;for(r>1e3&&(r=t._frameDuration),t._startTime=e,t._lag+=r;t._lag>=t._frameDuration;)t.capturePreviousSpriteProperties(),t.update(),t._lag-=t._frameDuration;t._lagOffset=t._lag/t._frameDuration,t.render(t._lagOffset)};void 0===this._fps?(this.update(),this.render()):void 0===this._renderFps?r():e>=this._renderStartTime&&(r(),this._renderStartTime=e+this._renderDuration)}}},{key:"capturePreviousSpriteProperties",value:function(){for(var e=this,t=function i(t){if(e.properties.position&&(t._previousX=t.x,t._previousY=t.y),e.properties.rotation&&(t._previousRotation=t.rotation),e.properties.size&&(t._previousWidth=t.width,t._previousHeight=t.height),e.properties.scale&&(t._previousScaleX=t.scale.x,t._previousScaleY=t.scale.y),e.properties.alpha&&(t._previousAlpha=t.alpha),e.properties.tile&&(void 0!==t.tilePosition&&(t._previousTilePositionX=t.tilePosition.x,t._previousTilePositionY=t.tilePosition.y),void 0!==t.tileScale&&(t._previousTileScaleX=t.tileScale.x,t._previousTileScaleY=t.tileScale.y)),t.children&&t.children.length>0)for(var r=0;r<t.children.length;r++){var n=t.children[r];i(n)}},r=0;r<this.stage.children.length;r++){var n=this.stage.children[r];t(n)}}},{key:"render",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];this.interpolate&&!function(){for(var r=function o(r){if(e.properties.position&&(r._currentX=r.x,r._currentY=r.y,void 0!==r._previousX&&(r.x=(r.x-r._previousX)*t+r._previousX),void 0!==r._previousY&&(r.y=(r.y-r._previousY)*t+r._previousY)),e.properties.rotation&&(r._currentRotation=r.rotation,void 0!==r._previousRotation&&(r.rotation=(r.rotation-r._previousRotation)*t+r._previousRotation)),e.properties.size&&(r instanceof e.Sprite||r instanceof e.MovieClip)&&(r._currentWidth=r.width,r._currentHeight=r.height,void 0!==r._previousWidth&&(r.width=(r.width-r._previousWidth)*t+r._previousWidth),
void 0!==r._previousHeight&&(r.height=(r.height-r._previousHeight)*t+r._previousHeight)),e.properties.scale&&(r._currentScaleX=r.scale.x,r._currentScaleY=r.scale.y,void 0!==r._previousScaleX&&(r.scale.x=(r.scale.x-r._previousScaleX)*t+r._previousScaleX),void 0!==r._previousScaleY&&(r.scale.y=(r.scale.y-r._previousScaleY)*t+r._previousScaleY)),e.properties.alpha&&(r._currentAlpha=r.alpha,void 0!==r._previousAlpha&&(r.alpha=(r.alpha-r._previousAlpha)*t+r._previousAlpha)),e.properties.tile&&(void 0!==r.tilePosition&&(r._currentTilePositionX=r.tilePosition.x,r._currentTilePositionY=r.tilePosition.y,void 0!==r._previousTilePositionX&&(r.tilePosition.x=(r.tilePosition.x-r._previousTilePositionX)*t+r._previousTilePositionX),void 0!==r._previousTilePositionY&&(r.tilePosition.y=(r.tilePosition.y-r._previousTilePositionY)*t+r._previousTilePositionY)),void 0!==r.tileScale&&(r._currentTileScaleX=r.tileScale.x,r._currentTileScaleY=r.tileScale.y,void 0!==r._previousTileScaleX&&(r.tileScale.x=(r.tileScale.x-r._previousTileScaleX)*t+r._previousTileScaleX),void 0!==r._previousTileScaleY&&(r.tileScale.y=(r.tileScale.y-r._previousTileScaleY)*t+r._previousTileScaleY))),0!==r.children.length)for(var n=0;n<r.children.length;n++){var i=r.children[n];o(i)}},n=0;n<e.stage.children.length;n++){var i=e.stage.children[n];r(i)}}(),this.renderer.render(this.stage),this.interpolate&&!function(){for(var t=function i(t){if(e.properties.position&&(t.x=t._currentX,t.y=t._currentY),e.properties.rotation&&(t.rotation=t._currentRotation),e.properties.size&&(t instanceof e.Sprite||t instanceof e.MovieClip)&&(t.width=t._currentWidth,t.height=t._currentHeight),e.properties.scale&&(t.scale.x=t._currentScaleX,t.scale.y=t._currentScaleY),e.properties.alpha&&(t.alpha=t._currentAlpha),e.properties.tile&&(void 0!==t.tilePosition&&(t.tilePosition.x=t._currentTilePositionX,t.tilePosition.y=t._currentTilePositionY),void 0!==t.tileScale&&(t.tileScale.x=t._currentTileScaleX,t.tileScale.y=t._currentTileScaleY)),0!==t.children.length)for(var r=0;r<t.children.length;r++){var n=t.children[r];i(n)}},r=0;r<e.stage.children.length;r++){var n=e.stage.children[r];t(n)}}()}},{key:"fps",get:function(){return this._fps},set:function(e){this._fps=e,this._frameDuration=1e3/this._fps}},{key:"renderFps",get:function(){return this._renderFps},set:function(e){this._renderFps=e,this._renderDuration=1e3/this._renderFps}},{key:"dt",get:function(){return this._lagOffset}}]),e}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),SpriteUtilities=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?PIXI:arguments[0];if(_classCallCheck(this,e),void 0===t)throw new Error("Please supply a reference to PIXI in the SpriteUtilities constructor before using spriteUtilities.js");this.renderer="",t.ParticleContainer&&t.Sprite&&(this.renderer="pixi",this.Container=t.Container,this.ParticleContainer=t.ParticleContainer,this.TextureCache=t.utils.TextureCache,this.Texture=t.Texture,this.Rectangle=t.Rectangle,this.MovieClip=t.extras.MovieClip,this.BitmapText=t.extras.BitmapText,this.Sprite=t.Sprite,this.TilingSprite=t.extras.TilingSprite,this.Graphics=t.Graphics,this.Text=t.Text,this.shakingSprites=[])}return _createClass(e,[{key:"update",value:function(){if(this.shakingSprites.length>0)for(var e=this.shakingSprites.length-1;e>=0;e--){var t=this.shakingSprites[e];t.updateShake&&t.updateShake()}}},{key:"sprite",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],i=arguments[4],o=arguments[5],s=void 0,a=void 0;if("string"==typeof e){if(a=this.TextureCache[e]?this.TextureCache[e]:this.Texture.fromImage(e),!a)throw new Error(e+" cannot be found");s=n?new this.TilingSprite(a,i,o):new this.Sprite(a)}else e instanceof this.Texture?s=n?new this.TilingSprite(e,i,o):new this.Sprite(e):e instanceof Array&&("string"==typeof e[0]?s=this.TextureCache[e[0]]?this.MovieClip.fromFrames(e):this.MovieClip.fromImages(e):e[0]instanceof this.Texture&&(s=new this.MovieClip(e)));return s?(s.x=t,s.y=r,i&&(s.width=i),o&&(s.height=o),s instanceof this.MovieClip&&this.addStatePlayer(s),s):void 0}},{key:"addStatePlayer",value:function(e){function t(t){o(),e.gotoAndStop(t)}function r(){o(),e.gotoAndStop(e.currentFrame)}function n(t){o(),t?(u=t[0],l=t[1]):(u=0,l=e.totalFrames-1),a=l-u,e.fps||(e.fps=12);var r=1e3/e.fps;e.gotoAndStop(u),s=1,e.animating||(h=setInterval(i.bind(this),r),e.animating=!0)}function i(){a+1>s?(e.gotoAndStop(e.currentFrame+1),s+=1):e.loop&&(e.gotoAndStop(u),s=1)}function o(){void 0!==h&&e.animating===!0&&(e.animating=!1,s=0,u=0,l=0,a=0,clearInterval(h))}var s=0,a=0,u=0,l=0,h=void 0;e.show=t,e.stopAnimation=r,e.playAnimation=n}},{key:"tilingSprite",value:function(e,t,r,n,i){if(void 0===t)throw new Error("Please define a width as your second argument for the tiling sprite");if(void 0===r)throw new Error("Please define a height as your third argument for the tiling sprite");var o=this.sprite(e,n,i,!0,t,r);return Object.defineProperties(o,{tileX:{get:function(){return o.tilePosition.x},set:function(e){o.tilePosition.x=e},enumerable:!0,configurable:!0},tileY:{get:function(){return o.tilePosition.y},set:function(e){o.tilePosition.y=e},enumerable:!0,configurable:!0},tileScaleX:{get:function(){return o.tileScale.x},set:function(e){o.tileScale.x=e},enumerable:!0,configurable:!0},tileScaleY:{get:function(){return o.tileScale.y},set:function(e){o.tileScale.y=e},enumerable:!0,configurable:!0}}),o}},{key:"filmstrip",value:function(e,t,r){for(var n=arguments.length<=3||void 0===arguments[3]?0:arguments[3],i=[],o=this.TextureCache[e].width,s=this.TextureCache[e].height,a=o/t,u=s/r,l=a*u,h=0;l>h;h++){var c=h%a*t,d=Math.floor(h/a)*r;n>0&&(c+=n+n*h%a,d+=n+n*Math.floor(h/a)),i.push([c,d])}return this.frames(e,i,t,r)}},{key:"frame",value:function(e,t,r,n,i){var o=void 0,s=void 0;if("string"==typeof e?this.TextureCache[e]&&(o=new this.Texture(this.TextureCache[e])):e instanceof this.Texture&&(o=new this.Texture(e)),o)return s=new this.Rectangle(t,r,n,i),o.frame=s,o;throw new Error("Please load the "+e+" texture into the cache.")}},{key:"frames",value:function(e,t,r,n){var i=this,o=void 0;if("string"==typeof e?this.TextureCache[e]&&(o=new this.Texture(this.TextureCache[e])):e instanceof this.Texture&&(o=new this.Texture(e)),o){var s=t.map(function(e){var t=e[0],s=e[1],a=new i.Rectangle(t,s,r,n),u=new i.Texture(o);return u.frame=a,u});return s}throw new Error("Please load the "+e+" texture into the cache.")}},{key:"frameSeries",value:function(){for(var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],r=arguments.length<=2||void 0===arguments[2]?"":arguments[2],n=arguments.length<=3||void 0===arguments[3]?"":arguments[3],i=[],o=e;t+1>o;o++){var s=this.TextureCache[""+(r+o+n)];i.push(s)}return i}},{key:"text",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"message":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"16px sans":arguments[1],r=arguments.length<=2||void 0===arguments[2]?"red":arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3],i=arguments.length<=4||void 0===arguments[4]?0:arguments[4],o=new this.Text(e,{font:t,fill:r});return o.x=n,o.y=i,o._content=e,Object.defineProperty(o,"content",{get:function(){return this._content},set:function(e){this._content=e,this.text=e},enumerable:!0,configurable:!0}),o}},{key:"bitmapText",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"message":arguments[0],t=arguments[1],r=arguments[2],n=arguments[3],i=arguments.length<=4||void 0===arguments[4]?0:arguments[4],o=arguments.length<=5||void 0===arguments[5]?0:arguments[5],s=new this.BitmapText(e,{font:t,align:r,tint:n});return s.x=i,s.y=o,s._content=e,Object.defineProperty(s,"content",{get:function(){return this._content},set:function(e){this._content=e,this.text=e},enumerable:!0,configurable:!0}),s}},{key:"rectangle",value:function(){var e=arguments.length<=0||void 0===arguments[0]?32:arguments[0],t=arguments.length<=1||void 0===arguments[1]?32:arguments[1],r=arguments.length<=2||void 0===arguments[2]?16724736:arguments[2],n=arguments.length<=3||void 0===arguments[3]?13260:arguments[3],i=arguments.length<=4||void 0===arguments[4]?0:arguments[4],o=arguments.length<=5||void 0===arguments[5]?0:arguments[5],s=arguments.length<=6||void 0===arguments[6]?0:arguments[6],a=new this.Graphics;a._sprite=void 0,a._width=e,a._height=t,a._fillStyle=this.color(r),a._strokeStyle=this.color(n),a._lineWidth=i;var u=function(e,t,r,n,i){a.clear(),a.beginFill(r),i>0&&a.lineStyle(i,n,1),a.drawRect(0,0,e,t),a.endFill()};u(a._width,a._height,a._fillStyle,a._strokeStyle,a._lineWidth);var l=a.generateTexture(),h=new this.Sprite(l);h.x=o,h.y=s;var c=this;return Object.defineProperties(h,{fillStyle:{get:function(){return a._fillStyle},set:function(e){a._fillStyle=c.color(e),u(a._width,a._height,a._fillStyle,a._strokeStyle,a._lineWidth,a._x,a._y);var t=a.generateTexture();a._sprite.texture=t},enumerable:!0,configurable:!0},strokeStyle:{get:function(){return a._strokeStyle},set:function(e){a._strokeStyle=c.color(e),u(a._width,a._height,a._fillStyle,a._strokeStyle,a._lineWidth,a._x,a._y);var t=a.generateTexture();a._sprite.texture=t},enumerable:!0,configurable:!0},lineWidth:{get:function(){return a._lineWidth},set:function(e){a._lineWidth=e,u(a._width,a._height,a._fillStyle,a._strokeStyle,a._lineWidth,a._x,a._y);var t=a.generateTexture();a._sprite.texture=t},enumerable:!0,configurable:!0}}),a._sprite=h,h}},{key:"circle",value:function(){var e=arguments.length<=0||void 0===arguments[0]?32:arguments[0],t=arguments.length<=1||void 0===arguments[1]?16724736:arguments[1],r=arguments.length<=2||void 0===arguments[2]?13260:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3],i=arguments.length<=4||void 0===arguments[4]?0:arguments[4],o=arguments.length<=5||void 0===arguments[5]?0:arguments[5],s=new this.Graphics;s._diameter=e,s._fillStyle=this.color(t),s._strokeStyle=this.color(r),s._lineWidth=n;var a=function(e,t,r,n){s.clear(),s.beginFill(t),n>0&&s.lineStyle(n,r,1),s.drawCircle(0,0,e/2),s.endFill()};a(s._diameter,s._fillStyle,s._strokeStyle,s._lineWidth);var u=s.generateTexture(),l=new this.Sprite(u);l.x=i,l.y=o;var h=this;return Object.defineProperties(l,{fillStyle:{get:function(){return s._fillStyle},set:function(e){s._fillStyle=h.color(e),a(s._diameter,s._fillStyle,s._strokeStyle,s._lineWidth);var t=s.generateTexture();s._sprite.texture=t},enumerable:!0,configurable:!0},strokeStyle:{get:function(){return s._strokeStyle},set:function(e){s._strokeStyle=h.color(e),a(s._diameter,s._fillStyle,s._strokeStyle,s._lineWidth);var t=s.generateTexture();s._sprite.texture=t},enumerable:!0,configurable:!0},diameter:{get:function(){return s._diameter},set:function(e){s._lineWidth=10,a(s._diameter,s._fillStyle,s._strokeStyle,s._lineWidth);var t=s.generateTexture();s._sprite.texture=t},enumerable:!0,configurable:!0},radius:{get:function(){return s._diameter/2},set:function(e){a(2*e,s._fillStyle,s._strokeStyle,s._lineWidth);var t=s.generateTexture();s._sprite.texture=t},enumerable:!0,configurable:!0}}),s._sprite=l,l}},{key:"line",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?1:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3],i=arguments.length<=4||void 0===arguments[4]?32:arguments[4],o=arguments.length<=5||void 0===arguments[5]?32:arguments[5],s=new this.Graphics;s._strokeStyle=this.color(e),s._width=t,s._ax=r,s._ay=n,s._bx=i,s._by=o;var a=function(e,t,r,n,i,o){s.clear(),s.lineStyle(t,e,1),s.moveTo(r,n),s.lineTo(i,o)};a(s._strokeStyle,s._width,s._ax,s._ay,s._bx,s._by);var u=this;return Object.defineProperties(s,{ax:{get:function(){return s._ax},set:function(e){s._ax=e,a(s._strokeStyle,s._width,s._ax,s._ay,s._bx,s._by)},enumerable:!0,configurable:!0},ay:{get:function(){return s._ay},set:function(e){s._ay=e,a(s._strokeStyle,s._width,s._ax,s._ay,s._bx,s._by)},enumerable:!0,configurable:!0},bx:{get:function(){return s._bx},set:function(e){s._bx=e,a(s._strokeStyle,s._width,s._ax,s._ay,s._bx,s._by)},enumerable:!0,configurable:!0},by:{get:function(){return s._by},set:function(e){s._by=e,a(s._strokeStyle,s._width,s._ax,s._ay,s._bx,s._by)},enumerable:!0,configurable:!0},strokeStyle:{get:function(){return s._strokeStyle},set:function(e){s._strokeStyle=u.color(e),a(s._strokeStyle,s._width,s._ax,s._ay,s._bx,s._by)},enumerable:!0,configurable:!0},width:{get:function(){return s._width},set:function(e){s._width=e,a(s._strokeStyle,s._width,s._ax,s._ay,s._bx,s._by)},enumerable:!0,configurable:!0}}),s}},{key:"grid",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?32:arguments[2],n=arguments.length<=3||void 0===arguments[3]?32:arguments[3],i=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],o=arguments.length<=5||void 0===arguments[5]?0:arguments[5],s=arguments.length<=6||void 0===arguments[6]?0:arguments[6],a=arguments.length<=7||void 0===arguments[7]?void 0:arguments[7],u=arguments.length<=8||void 0===arguments[8]?void 0:arguments[8],l=new this.Container,h=function(){for(var h=e*t,c=0;h>c;c++){var d=c%e*r,p=Math.floor(c/e)*n,f=a();l.addChild(f),i?(f.x=d+r/2-f.width/2+o,f.y=p+n/2-f.width/2+s):(f.x=d+o,f.y=p+s),u&&u(f)}};return h(),l}},{key:"shoot",value:function(e,t,r,n,i,o,s,a){var u=a();u.anchor.set(.5,.5),e.addChild(u),u.x=r,u.y=n;var l=u.getGlobalPosition().x,h=u.getGlobalPosition().y;i.addChild(u),u.x=l,u.y=h,u.vx=Math.cos(t)*o,u.vy=Math.sin(t)*o,s.push(u)}},{key:"grid",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?32:arguments[2],n=arguments.length<=3||void 0===arguments[3]?32:arguments[3],i=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],o=arguments.length<=5||void 0===arguments[5]?0:arguments[5],s=arguments.length<=6||void 0===arguments[6]?0:arguments[6],a=arguments.length<=7||void 0===arguments[7]?void 0:arguments[7],u=arguments.length<=8||void 0===arguments[8]?void 0:arguments[8],l=this.group(),h=function(){for(var h=e*t,c=0;h>c;c++){var d=c%e*r,p=Math.floor(c/e)*n,f=a();l.addChild(f),i?(f.x=d+r/2-f.halfWidth+o,f.y=p+n/2-f.halfHeight+s):(f.x=d+o,f.y=p+s),u&&u(f)}};return h(),l}},{key:"shake",value:function(e){function t(){a>s&&(e.x=u,e.y=l,n-=c,e.x+=d(-n,n),e.y+=d(-n,n),s+=1),s>=a&&(e.x=u,e.y=l,o.shakingSprites.splice(o.shakingSprites.indexOf(e),1))}function r(){a>s&&(e.rotation=h,n-=c,e.rotation=n*p,s+=1,p*=-1),s>=a&&(e.rotation=h,o.shakingSprites.splice(o.shakingSprites.indexOf(e),1))}var n=arguments.length<=1||void 0===arguments[1]?16:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],o=this,s=1,a=10,u=e.x,l=e.y,h=e.rotation,c=n/a,d=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};-1===o.shakingSprites.indexOf(e)&&(o.shakingSprites.push(e),e.updateShake=function(){i?r():t()});var p=1}},{key:"_getCenter",value:function(e,t,r){return void 0!==e.anchor?0!==e.anchor[r]?0:t/2:t}},{key:"group",value:function(){for(var e=new this.Container,t=arguments.length,r=Array(t),n=0;t>n;n++)r[n]=arguments[n];return r.forEach(function(t){e.addChild(t)}),e}},{key:"batch",value:function(){var e=arguments.length<=0||void 0===arguments[0]?15e3:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{rotation:!0,alpha:!0,scale:!0,uvs:!0}:arguments[1],r=new this.ParticleContainer(e,t);return r}},{key:"remove",value:function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];if(t[0]instanceof Array){var n=t[0];if(n.length>0)for(var i=n.length-1;i>=0;i--){var o=n[i];o.parent.removeChild(o),n.splice(n.indexOf(o),1)}}else t.length>1?t.forEach(function(e){e.parent.removeChild(e)}):t[0].parent.removeChild(t[0])}},{key:"colorToRGBA",value:function(e){var t,r;t=document.createElement("canvas"),t.height=1,t.width=1,r=t.getContext("2d"),r.fillStyle=e,r.fillRect(0,0,1,1);var n=r.getImageData(0,0,1,1).data;return n}},{key:"byteToHex",value:function(e){return("0"+e.toString(16)).slice(-2)}},{key:"colorToHex",value:function(e){var t,r,n=this;return t=this.colorToRGBA(e),r=[0,1,2].map(function(e){return n.byteToHex(t[e])}).join(""),"0x"+r}},{key:"color",value:function(e){return isNaN(e)?this.colorToHex(e):e}}]),e}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Tink=function(){function e(t,r){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];_classCallCheck(this,e),this.element=r,this.scale=n,this.draggableSprites=[],this.pointers=[],this.buttons=[],this.PIXI=t,this.TextureCache=this.PIXI.utils.TextureCache,this.MovieClip=this.PIXI.extras.MovieClip,this.Texture=this.PIXI.Texture}return _createClass(e,[{key:"makeDraggable",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;t>n;n++)r[n]=arguments[n];if(r[0]instanceof Array){var i=r[0];if(i.length>0)for(var o=i.length-1;o>=0;o--){var s=i[o];this.draggableSprites.push(s),void 0===s.draggable&&(s.draggable=!0,s._localDraggableAllocation=!0)}}else r.forEach(function(t){e.draggableSprites.push(t),void 0===t.draggable&&(t.draggable=!0,t._localDraggableAllocation=!0)})}},{key:"makeUndraggable",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;t>n;n++)r[n]=arguments[n];if(r[0]instanceof Array){var i=r[0];if(i.length>0)for(var o=i.length-1;o>=0;o--){var s=i[o];this.draggableSprites.splice(this.draggableSprites.indexOf(s),1),s._localDraggableAllocation===!0&&(s.draggable=!1)}}else r.forEach(function(t){e.draggableSprites.splice(e.draggableSprites.indexOf(t),1),t._localDraggableAllocation===!0&&(t.draggable=!1)})}},{key:"makePointer",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.element:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.scale:arguments[1],r=(this.draggableSprites,this.addGlobalPositionProperties),n={element:e,scale:t,_x:0,_y:0,width:1,height:1,get x(){return this._x/this.scale},get y(){return this._y/this.scale},get centerX(){return this.x},get centerY(){return this.y},get position(){return{x:this.x,y:this.y}},get cursor(){return this.element.style.cursor},set cursor(e){this.element.style.cursor=e},isDown:!1,isUp:!0,tapped:!1,downTime:0,elapsedTime:0,press:void 0,release:void 0,tap:void 0,dragSprite:null,dragOffsetX:0,dragOffsetY:0,_visible:!0,get visible(){return this._visible},set visible(e){e===!0?this.cursor="auto":this.cursor="none",this._visible=e},moveHandler:function(e){var t=e.target;this._x=e.pageX-t.offsetLeft,this._y=e.pageY-t.offsetTop,e.preventDefault()},touchmoveHandler:function(e){var t=e.target;this._x=e.targetTouches[0].pageX-t.offsetLeft,this._y=e.targetTouches[0].pageY-t.offsetTop,e.preventDefault()},downHandler:function(e){this.isDown=!0,this.isUp=!1,this.tapped=!1,this.downTime=Date.now(),this.press&&this.press(),e.preventDefault()},touchstartHandler:function(e){var t=e.target;this._x=e.targetTouches[0].pageX-t.offsetLeft,this._y=e.targetTouches[0].pageY-t.offsetTop,this.isDown=!0,this.isUp=!1,this.tapped=!1,this.downTime=Date.now(),this.press&&this.press(),e.preventDefault()},upHandler:function(e){this.elapsedTime=Math.abs(this.downTime-Date.now()),this.elapsedTime<=200&&this.tapped===!1&&(this.tapped=!0,this.tap&&this.tap()),this.isUp=!0,this.isDown=!1,this.release&&this.release(),e.preventDefault()},touchendHandler:function(e){this.elapsedTime=Math.abs(this.downTime-Date.now()),this.elapsedTime<=200&&this.tapped===!1&&(this.tapped=!0,this.tap&&this.tap()),this.isUp=!0,this.isDown=!1,this.release&&this.release(),e.preventDefault()},hitTestSprite:function(e){r(e);var t=!1,n=void 0,i=void 0;if(void 0!==e.anchor?(n=e.width*e.anchor.x,i=e.height*e.anchor.y):(n=0,i=0),e.circular){var o=this.x-(e.gx+e.width/2-n),s=this.y-(e.gy+e.width/2-i),a=Math.sqrt(o*o+s*s);t=a<e.width/2}else{var u=e.gx-n,l=e.gx+e.width-n,h=e.gy-i,c=e.gy+e.height-i;t=this.x>u&&this.x<l&&this.y>h&&this.y<c}return t}};return e.addEventListener("mousemove",n.moveHandler.bind(n),!1),e.addEventListener("mousedown",n.downHandler.bind(n),!1),window.addEventListener("mouseup",n.upHandler.bind(n),!1),e.addEventListener("touchmove",n.touchmoveHandler.bind(n),!1),e.addEventListener("touchstart",n.touchstartHandler.bind(n),!1),window.addEventListener("touchend",n.touchendHandler.bind(n),!1),e.style.touchAction="none",this.pointers.push(n),n}},{key:"addGlobalPositionProperties",value:function(e){void 0===e.gx&&Object.defineProperty(e,"gx",{get:function(){return e.getGlobalPosition().x}}),void 0===e.gy&&Object.defineProperty(e,"gy",{get:function(){return e.getGlobalPosition().y}})}},{key:"updateDragAndDrop",value:function(e){0===this.pointers.length&&this.makePointer(this.element,this.scale),this.pointers.forEach(function(t){if(t.isDown)if(null===t.dragSprite)for(var r=e.length-1;r>-1;r--){var n=e[r];if(t.hitTestSprite(n)&&n.draggable){t.dragOffsetX=t.x-n.gx,t.dragOffsetY=t.y-n.gy,t.dragSprite=n;var i=n.parent.children;i.splice(i.indexOf(n),1),i.push(n),e.splice(e.indexOf(n),1),e.push(n);break}}else t.dragSprite.x=t.x-t.dragOffsetX,t.dragSprite.y=t.y-t.dragOffsetY;t.isUp&&(t.dragSprite=null),e.some(function(e){return t.hitTestSprite(e)&&e.draggable?(t.visible&&(t.cursor="pointer"),!0):(t.visible&&(t.cursor="auto"),!1)})})}},{key:"makeInteractive",value:function(e){e.press=e.press||void 0,e.release=e.release||void 0,e.over=e.over||void 0,e.out=e.out||void 0,e.tap=e.tap||void 0,e.state="up",e.action="",e.pressed=!1,e.hoverOver=!1,e.tinkType="",e.enabled=!0,this.buttons.push(e)}},{key:"updateButtons",value:function(){var e=this;0===this.pointers.length&&this.makePointer(this.element,this.scale),this.buttons.forEach(function(t){t.enabled&&e.pointers.forEach(function(e){var r=e.hitTestSprite(t);e.isUp&&(t.state="up","button"===t.tinkType&&t.gotoAndStop(0)),r?(t.state="over",t.totalFrames&&3===t.totalFrames&&"button"===t.tinkType&&t.gotoAndStop(1),e.isDown&&(t.state="down","button"===t.tinkType&&(3===t.totalFrames?t.gotoAndStop(2):t.gotoAndStop(1))),e.visible&&(e.cursor="pointer")):e.visible&&(e.cursor="auto"),"down"===t.state&&(t.pressed||(t.press&&t.press(),t.pressed=!0,t.action="pressed")),"over"===t.state&&(t.pressed&&(t.release&&t.release(),t.pressed=!1,t.action="released",e.tapped&&t.tap&&t.tap()),t.hoverOver||(t.over&&t.over(),t.hoverOver=!0)),"up"===t.state&&(t.pressed&&(t.release&&t.release(),t.pressed=!1,t.action="released"),t.hoverOver&&(t.out&&t.out(),t.hoverOver=!1))})})}},{key:"button",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=void 0;return"string"==typeof e[0]?n=this.TextureCache[e[0]]?this.MovieClip.fromFrames(e):this.MovieClip.fromImages(e):e[0]instanceof this.Texture&&(n=new this.MovieClip(e)),this.makeInteractive(n),n.tinkType="button",n.x=t,n.y=r,n}},{key:"update",value:function(){0!==this.draggableSprites.length&&this.updateDragAndDrop(this.draggableSprites),0!==this.buttons.length&&this.updateButtons()}},{key:"keyboard",value:function(e){var t={};return t.code=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.keyCode===t.code&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1),e.preventDefault()},t.upHandler=function(e){e.keyCode===t.code&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0),e.preventDefault()},window.addEventListener("keydown",t.downHandler.bind(t),!1),window.addEventListener("keyup",t.upHandler.bind(t),!1),t}},{key:"arrowControl",value:function(e,t){if(void 0===t)throw new Error("Please supply the arrowControl method with the speed at which you want the sprite to move");var r=this.keyboard(38),n=this.keyboard(39),i=this.keyboard(40),o=this.keyboard(37);o.press=function(){e.vx=-t,e.vy=0},o.release=function(){n.isDown||0!==e.vy||(e.vx=0)},r.press=function(){e.vy=-t,e.vx=0},r.release=function(){i.isDown||0!==e.vx||(e.vy=0)},n.press=function(){e.vx=t,e.vy=0},n.release=function(){o.isDown||0!==e.vy||(e.vx=0)},i.press=function(){e.vy=t,e.vx=0},i.release=function(){r.isDown||0!==e.vx||(e.vy=0)}}}]),e}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),GameUtilities=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"distance",value:function(e,t){var r=t.x+this._getCenter(t,t.width,"x")-(e.x+this._getCenter(e,e.width,"x")),n=t.y+this._getCenter(t,t.height,"y")-(e.y+this._getCenter(e,e.height,"y"));return Math.sqrt(r*r+n*n)}},{key:"followEase",value:function(e,t,r){var n=t.x+this._getCenter(t,t.width,"x")-(e.x+this._getCenter(e,e.width,"x")),i=t.y+this._getCenter(t,t.height,"y")-(e.y+this._getCenter(e,e.height,"y")),o=Math.sqrt(n*n+i*i);o>=1&&(e.x+=n*r,e.y+=i*r)}},{key:"followConstant",value:function(e,t,r){var n=t.x+this._getCenter(t,t.width,"x")-(e.x+this._getCenter(e,e.width,"x")),i=t.y+this._getCenter(t,t.height,"y")-(e.y+this._getCenter(e,e.height,"y")),o=Math.sqrt(n*n+i*i);o>=r&&(e.x+=n/o*r,e.y+=i/o*r)}},{key:"angle",value:function(e,t){return Math.atan2(t.y+this._getCenter(t,t.height,"y")-(e.y+this._getCenter(e,e.height,"y")),t.x+this._getCenter(t,t.width,"x")-(e.x+this._getCenter(e,e.width,"x")))}},{key:"_getCenter",value:function(e,t,r){return void 0!==e.anchor?0!==e.anchor[r]?0:t/2:t}},{key:"rotateAroundSprite",value:function(e,t,r,n){e.x=t.x+this._getCenter(t,t.width,"x")-e.parent.x+r*Math.cos(n)-this._getCenter(e,e.width,"x"),e.y=t.y+this._getCenter(t,t.height,"y")-e.parent.y+r*Math.sin(n)-this._getCenter(e,e.height,"y")}},{key:"rotateAroundPoint",value:function(e,t,r,n,i){var o={};return o.x=e+Math.cos(i)*r,o.y=t+Math.sin(i)*n,o}},{key:"randomInt",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"randomFloat",value:function(e,t){return e+Math.random()*(t-e)}},{key:"wait",value:function(e,t){setTimeout(t,e)}},{key:"move",value:function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];if(t[0]instanceof Array){var n=t[0];if(n.length>0)for(var i=n.length-1;i>=0;i--){var o=n[i];o.x+=o.vx,o.y+=o.vy}}else t.length>1?t.forEach(function(e){e.x+=e.vx,e.y+=e.vy}):(t[0].x+=t[0].vx,t[0].y+=t[0].vy)}},{key:"worldCamera",value:function(e,t,r,n){var i={width:n.width,height:n.height,_x:0,_y:0,get x(){return this._x},set x(t){this._x=t,e.x=-this._x,e._previousX=e.x},get y(){return this._y},set y(t){this._y=t,e.y=-this._y,e._previousY=e.y},get centerX(){return this.x+this.width/2},get centerY(){return this.y+this.height/2},get rightInnerBoundary(){return this.x+this.width/2+this.width/4},get leftInnerBoundary(){return this.x+this.width/2-this.width/4},get topInnerBoundary(){return this.y+this.height/2-this.height/4},get bottomInnerBoundary(){return this.y+this.height/2+this.height/4},follow:function(e){e.x<this.leftInnerBoundary&&(this.x=e.x-this.width/4),e.y<this.topInnerBoundary&&(this.y=e.y-this.height/4),e.x+e.width>this.rightInnerBoundary&&(this.x=e.x+e.width-this.width/4*3),e.y+e.height>this.bottomInnerBoundary&&(this.y=e.y+e.height-this.height/4*3),this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x+this.width>t&&(this.x=t-this.width),this.y+this.height>r&&(this.y=r-this.height)},centerOver:function(e){this.x=e.x+e.halfWidth-this.width/2,this.y=e.y+e.halfHeight-this.height/2}};return i}}]),e}();!function(){"use strict";function e(){try{"undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:r=!1}catch(e){r=!1}if(!r)if("undefined"!=typeof Audio)try{var s=new Audio;"undefined"==typeof s.oncanplaythrough&&(o="canplay")}catch(e){n=!0}else n=!0;try{var s=new Audio;s.muted&&(n=!0)}catch(e){}r&&(i="undefined"==typeof t.createGain?t.createGainNode():t.createGain(),i.gain.value=1,i.connect(t.destination))}var t=null,r=!0,n=!1,i=null,o="canplaythrough";e();var s=function(){this.init()};s.prototype={init:function(){var e=this||a;return e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e.state="running",e.autoSuspend=!0,e._autoSuspend(),e.mobileAutoEnable=!0,e.noAudio=n,e.usingWebAudio=r,e.ctx=t,n||e._setupCodecs(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),"undefined"!=typeof e&&e>=0&&1>=e){t._volume=e,r&&(i.gain.value=e);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),s=0;s<o.length;s++){var u=t._howls[n]._soundById(o[s]);u&&u._node&&(u._node.volume=u._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t._muted=e,r&&(i.gain.value=e?0:t._volume);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),s=0;s<o.length;s++){var u=t._howls[n]._soundById(o[s]);u&&u._node&&(u._node.muted=e?!0:u._muted)}return t},unload:function(){for(var r=this||a,n=r._howls.length-1;n>=0;n--)r._howls[n].unload();return r.usingWebAudio&&"undefined"!=typeof t.close&&(r.ctx=null,t.close(),e(),r.ctx=t),r},codecs:function(e){return(this||a)._codecs[e]},_setupCodecs:function(){var e=this||a,t=new Audio,r=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n=/OPR\//.test(navigator.userAgent);return e._codecs={mp3:!(n||!r&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||a,r=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk/i.test(navigator.userAgent),n=!!("ontouchend"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);if(!t||!e._mobileEnabled&&r&&n){e._mobileEnabled=!1;var i=function(){var r=t.createBuffer(1,1,22050),n=t.createBufferSource();n.buffer=r,n.connect(t.destination),"undefined"==typeof n.start?n.noteOn(0):n.start(0),n.onended=function(){n.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchend",i,!0)}};return document.addEventListener("touchend",i,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&t&&"undefined"!=typeof t.suspend&&r){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio)for(var i=0;i<e._howls[n]._sounds.length;i++)if(!e._howls[n]._sounds[i]._paused)return e;return e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",t.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(t&&"undefined"!=typeof t.resume&&r)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.state="resuming",t.resume().then(function(){e.state="running"})):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var a=new s,u=function(e){var t=this;return e.src&&0!==e.src.length?void t.init(e):void console.error("An array of source files must be passed with any new Howl.");
};u.prototype={init:function(e){var n=this;return n._autoplay=e.autoplay||!1,n._ext=e.ext||null,n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload="boolean"==typeof e.preload?e.preload:!0,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src="string"!=typeof e.src?e.src:[e.src],n._volume=void 0!==e.volume?e.volume:1,n._duration=0,n._loaded=!1,n._sounds=[],n._endTimers={},n._onend=e.onend?[{fn:e.onend}]:[],n._onfaded=e.onfaded?[{fn:e.onfaded}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._webAudio=r&&!n._html5,"undefined"!=typeof t&&t&&a.mobileAutoEnable&&a._enableMobileAudio(),a._howls.push(n),n._preload&&n.load(),n},load:function(){var e=this,t=null;if(n)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var i,o;if(e._ext&&e._ext[r]?i=e._ext[r]:(o=e._src[r],i=/^data:audio\/([^;,]+);/i.exec(o),i||(i=/\.([^.]+)$/.exec(o.split("?",1)[0])),i&&(i=i[1].toLowerCase())),a.codecs(i)){t=e._src[r];break}}return t?(e._src=t,"https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new l(e),e._webAudio&&c(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e){var r=this,n=arguments,i=null;if("number"==typeof e)i=e,e=null;else if("undefined"==typeof e){e="__default";for(var s=0,u=0;u<r._sounds.length;u++)r._sounds[u]._paused&&!r._sounds[u]._ended&&(s++,i=r._sounds[u]._id);1===s?e=null:i=null}var l=i?r._soundById(i):r._inactiveSound();if(!l)return null;if(i&&!e&&(e=l._sprite||"__default"),!r._loaded&&!r._sprite[e])return r.once("load",function(){r.play(r._soundById(l._id)?l._id:void 0)}),l._id;if(i&&!l._paused)return l._id;r._webAudio&&a._autoResume();var h=l._seek>0?l._seek:r._sprite[e][0]/1e3,c=(r._sprite[e][0]+r._sprite[e][1])/1e3-h,d=1e3*c/Math.abs(l._rate);d!==1/0&&(r._endTimers[l._id]=setTimeout(r._ended.bind(r,l),d)),l._paused=!1,l._ended=!1,l._sprite=e,l._seek=h,l._start=r._sprite[e][0]/1e3,l._stop=(r._sprite[e][0]+r._sprite[e][1])/1e3,l._loop=!(!l._loop&&!r._sprite[e][2]);var p=l._node;if(r._webAudio){var f=function(){r._refreshBuffer(l);var e=l._muted||r._muted?0:l._volume*a.volume();p.gain.setValueAtTime(e,t.currentTime),l._playStart=t.currentTime,"undefined"==typeof p.bufferSource.start?l._loop?p.bufferSource.noteGrainOn(0,h,86400):p.bufferSource.noteGrainOn(0,h,c):l._loop?p.bufferSource.start(0,h,86400):p.bufferSource.start(0,h,c),r._endTimers[l._id]||d===1/0||(r._endTimers[l._id]=setTimeout(r._ended.bind(r,l),d)),n[1]||setTimeout(function(){r._emit("play",l._id)},0)};r._loaded?f():(r.once("load",f),r._clearTimer(l._id))}else{var g=function(){p.currentTime=h,p.muted=l._muted||r._muted||a._muted||p.muted,p.volume=l._volume*a.volume(),p.playbackRate=l._rate,setTimeout(function(){p.play(),n[1]||r._emit("play",l._id)},0)};if(4===p.readyState||!p.readyState&&navigator.isCocoonJS)g();else{var v=function(){d!==1/0&&(r._endTimers[l._id]=setTimeout(r._ended.bind(r,l),d)),g(),p.removeEventListener(o,v,!1)};p.addEventListener(o,v,!1),r._clearTimer(l._id)}}return l._id},pause:function(e){var t=this;if(!t._loaded)return t.once("play",function(){t.pause(e)}),t;for(var r=t._getSoundIds(e),n=0;n<r.length;n++){t._clearTimer(r[n]);var i=t._soundById(r[n]);if(i&&!i._paused){if(i._seek=t.seek(r[n]),i._paused=!0,t._stopFade(r[n]),i._node)if(t._webAudio){if(!i._node.bufferSource)return t;"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),i._node.bufferSource=null}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i._id)}}return t},stop:function(e){var t=this;if(!t._loaded)return"undefined"!=typeof t._sounds[0]._sprite&&t.once("play",function(){t.stop(e)}),t;for(var r=t._getSoundIds(e),n=0;n<r.length;n++){t._clearTimer(r[n]);var i=t._soundById(r[n]);if(i&&!i._paused){if(i._seek=i._start||0,i._paused=!0,i._ended=!0,t._stopFade(r[n]),i._node)if(t._webAudio){if(!i._node.bufferSource)return t;"undefined"==typeof i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),i._node.bufferSource=null}else isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.pause(),i._node.currentTime=i._start||0);t._emit("stop",i._id)}}return t},mute:function(e,r){var n=this;if(!n._loaded)return n.once("play",function(){n.mute(e,r)}),n;if("undefined"==typeof r){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var i=n._getSoundIds(r),o=0;o<i.length;o++){var s=n._soundById(i[o]);s&&(s._muted=e,n._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume*a.volume(),t.currentTime):s._node&&(s._node.muted=a._muted?!0:e))}return n},volume:function(){var e,r,n=this,i=arguments;if(0===i.length)return n._volume;if(1===i.length){var o=n._getSoundIds(),s=o.indexOf(i[0]);s>=0?r=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),r=parseInt(i[1],10));var u;if(!("undefined"!=typeof e&&e>=0&&1>=e))return u=r?n._soundById(r):n._sounds[0],u?u._volume:0;if(!n._loaded)return n.once("play",function(){n.volume.apply(n,i)}),n;"undefined"==typeof r&&(n._volume=e),r=n._getSoundIds(r);for(var l=0;l<r.length;l++)u=n._soundById(r[l]),u&&(u._volume=e,i[2]||n._stopFade(r[l]),n._webAudio&&u._node&&!u._muted?u._node.gain.setValueAtTime(e*a.volume(),t.currentTime):u._node&&!u._muted&&(u._node.volume=e*a.volume()));return n},fade:function(e,r,n,i){var o=this;if(!o._loaded)return o.once("play",function(){o.fade(e,r,n,i)}),o;o.volume(e,i);for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var u=o._soundById(s[a]);if(u)if(o._webAudio&&!u._muted){var l=t.currentTime,h=l+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,l),u._node.gain.linearRampToValueAtTime(r,h),u._timeout=setTimeout(function(e,n){delete n._timeout,setTimeout(function(){n._volume=r,o._emit("faded",e)},h-t.currentTime>0?Math.ceil(1e3*(h-t.currentTime)):0)}.bind(o,s[a],u),n)}else{var c=Math.abs(e-r),d=e>r?"out":"in",p=c/.01,f=n/p;!function(){var t=e;u._interval=setInterval(function(e,n){t+="in"===d?.01:-.01,t=Math.max(0,t),t=Math.min(1,t),t=Math.round(100*t)/100,o.volume(t,e,!0),t===r&&(clearInterval(n._interval),delete n._interval,o._emit("faded",e))}.bind(o,s[a],u),f)}()}}return o},_stopFade:function(e){var r=this,n=r._soundById(e);return n._interval?(clearInterval(n._interval),delete n._interval,r._emit("faded",e)):n._timeout&&(clearTimeout(n._timeout),delete n._timeout,n._node.gain.cancelScheduledValues(t.currentTime),r._emit("faded",e)),r},loop:function(){var e,t,r,n=this,i=arguments;if(0===i.length)return n._loop;if(1===i.length){if("boolean"!=typeof i[0])return r=n._soundById(parseInt(i[0],10)),r?r._loop:!1;e=i[0],n._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var o=n._getSoundIds(t),s=0;s<o.length;s++)r=n._soundById(o[s]),r&&(r._loop=e,n._webAudio&&r._node&&r._node.bufferSource&&(r._node.bufferSource.loop=e));return n},rate:function(){var e,t,r=this,n=arguments;if(0===n.length)t=r._sounds[0]._id;else if(1===n.length){var i=r._getSoundIds(),o=i.indexOf(n[0]);o>=0?t=parseInt(n[0],10):e=parseFloat(n[0])}else 2===n.length&&(e=parseFloat(n[0]),t=parseInt(n[1],10));var s;if("number"!=typeof e)return s=r._soundById(t),s?s._rate:r._rate;if(!r._loaded)return r.once("load",function(){r.rate.apply(r,n)}),r;"undefined"==typeof t&&(r._rate=e),t=r._getSoundIds(t);for(var a=0;a<t.length;a++)if(s=r._soundById(t[a])){s._rate=e,r._webAudio&&s._node&&s._node.bufferSource?s._node.bufferSource.playbackRate.value=e:s._node&&(s._node.playbackRate=e);var u=r.seek(t[a]),l=(r._sprite[s._sprite][0]+r._sprite[s._sprite][1])/1e3-u,h=1e3*l/Math.abs(s._rate);r._clearTimer(t[a]),r._endTimers[t[a]]=setTimeout(r._ended.bind(r,s),h)}return r},seek:function(){var e,r,n=this,i=arguments;if(0===i.length)r=n._sounds[0]._id;else if(1===i.length){var o=n._getSoundIds(),s=o.indexOf(i[0]);s>=0?r=parseInt(i[0],10):(r=n._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),r=parseInt(i[1],10));if("undefined"==typeof r)return n;if(!n._loaded)return n.once("load",function(){n.seek.apply(n,i)}),n;var a=n._soundById(r);if(a){if(!(e>=0))return n._webAudio?a._seek+(n.playing(r)?t.currentTime-a._playStart:0):a._node.currentTime;var u=n.playing(r);u&&n.pause(r,!0),a._seek=e,n._clearTimer(r),u&&n.play(r,!0)}return n},playing:function(e){var t=this,r=t._soundById(e)||t._sounds[0];return r?!r._paused:!1},duration:function(){return this._duration},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++){t[r]._paused||(e.stop(t[r]._id),e._emit("end",t[r]._id)),e._webAudio||(t[r]._node.src="",t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener(o,t[r]._loadFn,!1)),delete t[r]._node,e._clearTimer(t[r]._id);var n=a._howls.indexOf(e);n>=0&&a._howls.splice(n,1)}return h&&delete h[e._src],e._sounds=[],e=null,null},on:function(e,t,r,n){var i=this,o=i["_on"+e];return"function"==typeof t&&o.push(n?{id:r,fn:t,once:n}:{id:r,fn:t}),i},off:function(e,t,r){var n=this,i=n["_on"+e];if(t){for(var o=0;o<i.length;o++)if(t===i[o].fn&&r===i[o].id){i.splice(o,1);break}}else if(e)n["_on"+e]=[];else for(var s=Object.keys(n),o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(n[s[o]])&&(n[s[o]]=[]);return n},once:function(e,t,r){var n=this;return n.on(e,t,r,1),n},_emit:function(e,t,r){for(var n=this,i=n["_on"+e],o=0;o<i.length;o++)i[o].id&&i[o].id!==t||(setTimeout(function(e){e.call(this,t,r)}.bind(n,i[o].fn),0),i[o].once&&n.off(e,i[o].fn,i[o].id));return n},_ended:function(e){var r=this,n=e._sprite,i=!(!e._loop&&!r._sprite[n][2]);if(r._emit("end",e._id),!r._webAudio&&i&&r.stop(e._id).play(e._id),r._webAudio&&i){r._emit("play",e._id),e._seek=e._start||0,e._playStart=t.currentTime;var o=1e3*(e._stop-e._start)/Math.abs(e._rate);r._endTimers[e._id]=setTimeout(r._ended.bind(r,e),o)}return r._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,r._clearTimer(e._id),e._node.bufferSource=null,a._autoSuspend()),r._webAudio||i||r.stop(e._id),r},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new l(e)},_drain:function(){var e=this,t=e._pool,r=0,n=0;if(!(e._sounds.length<t)){for(n=0;n<e._sounds.length;n++)e._sounds[n]._ended&&r++;for(n=e._sounds.length-1;n>=0;n--){if(t>=r)return;e._sounds[n]._ended&&(e._webAudio&&e._sounds[n]._node&&e._sounds[n]._node.disconnect(0),e._sounds.splice(n,1),r--)}}},_getSoundIds:function(e){var t=this;if("undefined"==typeof e){for(var r=[],n=0;n<t._sounds.length;n++)r.push(t._sounds[n]._id);return r}return[e]},_refreshBuffer:function(e){var r=this;return e._node.bufferSource=t.createBufferSource(),e._node.bufferSource.buffer=h[r._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=r._rate,r}};var l=function(e){this._parent=e,this.init()};if(l.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=Math.round(Date.now()*Math.random()),t._sounds.push(e),e.create(),e},create:function(){var e=this,r=e._parent,n=a._muted||e._muted||e._parent._muted?0:e._volume*a.volume();return r._webAudio?(e._node="undefined"==typeof t.createGain?t.createGainNode():t.createGain(),e._node.gain.setValueAtTime(n,t.currentTime),e._node.paused=!0,e._node.connect(i)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(o,e._loadFn,!1),e._node.src=r._src,e._node.preload="auto",e._node.volume=n,e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=Math.round(Date.now()*Math.random()),e},_errorListener:function(){var e=this;e._node.error&&4===e._node.error.code&&(a.noAudio=!0),e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t._emit("load")),t._autoplay&&t.play(),e._node.removeEventListener(o,e._loadFn,!1)}},r)var h={},c=function(e){var t=e._src;if(h[t])return e._duration=h[t].duration,void f(e);if(/^data:[^;]+;base64,/.test(t)){window.atob=window.atob||function(e){for(var t,r,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=String(e).replace(/=+$/,""),o=0,s=0,a="";r=i.charAt(s++);~r&&(t=o%4?64*t+r:r,o++%4)?a+=String.fromCharCode(255&t>>(-2*o&6)):0)r=n.indexOf(r);return a};for(var r=atob(t.split(",")[1]),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);p(n.buffer,e)}else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){p(o.response,e)},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete h[t],e.load())},d(o)}},d=function(e){try{e.send()}catch(t){e.onerror()}},p=function(e,r){t.decodeAudioData(e,function(e){e&&r._sounds.length>0&&(h[r._src]=e,f(r,e))},function(){r._emit("loaderror",null,"Decoding audio data failed.")})},f=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e._emit("load")),e._autoplay&&e.play()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:a,Howl:u}}),"undefined"!=typeof exports&&(exports.Howler=a,exports.Howl=u),"undefined"!=typeof window&&(window.HowlerGlobal=s,window.Howler=a,window.Howl=u,window.Sound=l)}(),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function r(e){var t="length"in e&&e.length,r=ie.type(e);return"function"===r||ie.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,r){if(ie.isFunction(t))return ie.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return ie.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(de.test(t))return ie.filter(t,e,r);t=ie.filter(t,e)}return ie.grep(e,function(e){return ie.inArray(e,t)>=0!==r})}function i(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=be[e]={};return ie.each(e.match(xe)||[],function(e,r){t[r]=!0}),t}function s(){fe.addEventListener?(fe.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1)):(fe.detachEvent("onreadystatechange",a),e.detachEvent("onload",a))}function a(){(fe.addEventListener||"load"===event.type||"complete"===fe.readyState)&&(s(),ie.ready())}function u(e,t,r){if(void 0===r&&1===e.nodeType){var n="data-"+t.replace(Se,"-$1").toLowerCase();if(r=e.getAttribute(n),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:Ee.test(r)?ie.parseJSON(r):r}catch(i){}ie.data(e,t,r)}else r=void 0}return r}function l(e){var t;for(t in e)if(("data"!==t||!ie.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function h(e,t,r,n){if(ie.acceptData(e)){var i,o,s=ie.expando,a=e.nodeType,u=a?ie.cache:e,l=a?e[s]:e[s]&&s;if(l&&u[l]&&(n||u[l].data)||void 0!==r||"string"!=typeof t)return l||(l=a?e[s]=V.pop()||ie.guid++:s),u[l]||(u[l]=a?{}:{toJSON:ie.noop}),("object"==typeof t||"function"==typeof t)&&(n?u[l]=ie.extend(u[l],t):u[l].data=ie.extend(u[l].data,t)),o=u[l],n||(o.data||(o.data={}),o=o.data),void 0!==r&&(o[ie.camelCase(t)]=r),"string"==typeof t?(i=o[t],null==i&&(i=o[ie.camelCase(t)])):i=o,i}}function c(e,t,r){if(ie.acceptData(e)){var n,i,o=e.nodeType,s=o?ie.cache:e,a=o?e[ie.expando]:ie.expando;if(s[a]){if(t&&(n=r?s[a]:s[a].data)){ie.isArray(t)?t=t.concat(ie.map(t,ie.camelCase)):t in n?t=[t]:(t=ie.camelCase(t),t=t in n?[t]:t.split(" ")),i=t.length;for(;i--;)delete n[t[i]];if(r?!l(n):!ie.isEmptyObject(n))return}(r||(delete s[a].data,l(s[a])))&&(o?ie.cleanData([e],!0):re.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return fe.activeElement}catch(e){}}function g(e){var t=ke.split("|"),r=e.createDocumentFragment();if(r.createElement)for(;t.length;)r.createElement(t.pop());return r}function v(e,t){var r,n,i=0,o=typeof e.getElementsByTagName!==Te?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Te?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],r=e.childNodes||e;null!=(n=r[i]);i++)!t||ie.nodeName(n,t)?o.push(n):ie.merge(o,v(n,t));return void 0===t||t&&ie.nodeName(e,t)?ie.merge([e],o):o}function m(e){Re.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return ie.nodeName(e,"table")&&ie.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function x(e){return e.type=(null!==ie.find.attr(e,"type"))+"/"+e.type,e}function b(e){var t=qe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){for(var r,n=0;null!=(r=e[n]);n++)ie._data(r,"globalEval",!t||ie._data(t[n],"globalEval"))}function w(e,t){if(1===t.nodeType&&ie.hasData(e)){var r,n,i,o=ie._data(e),s=ie._data(t,o),a=o.events;if(a){delete s.handle,s.events={};for(r in a)for(n=0,i=a[r].length;i>n;n++)ie.event.add(t,r,a[r][n])}s.data&&(s.data=ie.extend({},s.data))}}function T(e,t){var r,n,i;if(1===t.nodeType){if(r=t.nodeName.toLowerCase(),!re.noCloneEvent&&t[ie.expando]){i=ie._data(t);for(n in i.events)ie.removeEvent(t,n,i.handle);t.removeAttribute(ie.expando)}"script"===r&&t.text!==e.text?(x(t).text=e.text,b(t)):"object"===r?(t.parentNode&&(t.outerHTML=e.outerHTML),re.html5Clone&&e.innerHTML&&!ie.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===r&&Re.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===r?t.defaultSelected=t.selected=e.defaultSelected:("input"===r||"textarea"===r)&&(t.defaultValue=e.defaultValue)}}function E(t,r){var n,i=ie(r.createElement(t)).appendTo(r.body),o=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(i[0]))?n.display:ie.css(i[0],"display");return i.detach(),o}function S(e){var t=fe,r=Ze[e];return r||(r=E(e,t),"none"!==r&&r||(Qe=(Qe||ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Qe[0].contentWindow||Qe[0].contentDocument).document,t.write(),t.close(),r=E(e,t),Qe.detach()),Ze[e]=r),r}function C(e,t){return{get:function(){var r=e();if(null!=r)return r?void delete this.get:(this.get=t).apply(this,arguments)}}}function A(e,t){if(t in e)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),n=t,i=dt.length;i--;)if(t=dt[i]+r,t in e)return t;return n}function M(e,t){for(var r,n,i,o=[],s=0,a=e.length;a>s;s++)n=e[s],n.style&&(o[s]=ie._data(n,"olddisplay"),r=n.style.display,t?(o[s]||"none"!==r||(n.style.display=""),""===n.style.display&&Me(n)&&(o[s]=ie._data(n,"olddisplay",S(n.nodeName)))):(i=Me(n),(r&&"none"!==r||!i)&&ie._data(n,"olddisplay",i?r:ie.css(n,"display"))));for(s=0;a>s;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[s]||"":"none"));return e}function O(e,t,r){var n=ut.exec(t);return n?Math.max(0,n[1]-(r||0))+(n[2]||"px"):t}function R(e,t,r,n,i){for(var o=r===(n?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===r&&(s+=ie.css(e,r+Ae[o],!0,i)),n?("content"===r&&(s-=ie.css(e,"padding"+Ae[o],!0,i)),"margin"!==r&&(s-=ie.css(e,"border"+Ae[o]+"Width",!0,i))):(s+=ie.css(e,"padding"+Ae[o],!0,i),"padding"!==r&&(s+=ie.css(e,"border"+Ae[o]+"Width",!0,i)));return s}function P(e,t,r){var n=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=et(e),s=re.boxSizing&&"border-box"===ie.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=tt(e,t,o),(0>i||null==i)&&(i=e.style[t]),nt.test(i))return i;n=s&&(re.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+R(e,t,r||(s?"border":"content"),n,o)+"px"}function D(e,t,r,n,i){return new D.prototype.init(e,t,r,n,i)}function F(){return setTimeout(function(){pt=void 0}),pt=ie.now()}function B(e,t){var r,n={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)r=Ae[i],n["margin"+r]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function L(e,t,r){for(var n,i=(xt[t]||[]).concat(xt["*"]),o=0,s=i.length;s>o;o++)if(n=i[o].call(r,t,e))return n}function k(e,t,r){var n,i,o,s,a,u,l,h,c=this,d={},p=e.style,f=e.nodeType&&Me(e),g=ie._data(e,"fxshow");r.queue||(a=ie._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,ie.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],l=ie.css(e,"display"),h="none"===l?ie._data(e,"olddisplay")||S(e.nodeName):l,"inline"===h&&"none"===ie.css(e,"float")&&(re.inlineBlockNeedsLayout&&"inline"!==S(e.nodeName)?p.zoom=1:p.display="inline-block")),r.overflow&&(p.overflow="hidden",re.shrinkWrapBlocks()||c.always(function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]}));for(n in t)if(i=t[n],gt.exec(i)){if(delete t[n],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!g||void 0===g[n])continue;f=!0}d[n]=g&&g[n]||ie.style(e,n)}else l=void 0;if(ie.isEmptyObject(d))"inline"===("none"===l?S(e.nodeName):l)&&(p.display=l);else{g?"hidden"in g&&(f=g.hidden):g=ie._data(e,"fxshow",{}),o&&(g.hidden=!f),f?ie(e).show():c.done(function(){ie(e).hide()}),c.done(function(){var t;ie._removeData(e,"fxshow");for(t in d)ie.style(e,t,d[t])});for(n in d)s=L(f?g[n]:0,n,c),n in g||(g[n]=s.start,f&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function N(e,t){var r,n,i,o,s;for(r in e)if(n=ie.camelCase(r),i=t[n],o=e[r],ie.isArray(o)&&(i=o[1],o=e[r]=o[0]),r!==n&&(e[n]=o,delete e[r]),s=ie.cssHooks[n],s&&"expand"in s){o=s.expand(o),delete e[n];for(r in o)r in e||(e[r]=o[r],t[r]=i)}else t[n]=i}function I(e,t,r){var n,i,o=0,s=yt.length,a=ie.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=pt||F(),r=Math.max(0,l.startTime+l.duration-t),n=r/l.duration||0,o=1-n,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,r]),1>o&&u?r:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:ie.extend({},t),opts:ie.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:pt||F(),duration:r.duration,tweens:[],createTween:function(t,r){var n=ie.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var r=0,n=t?l.tweens.length:0;if(i)return this;for(i=!0;n>r;r++)l.tweens[r].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),h=l.props;for(N(h,l.opts.specialEasing);s>o;o++)if(n=yt[o].call(l,e,h,l.opts))return n;return ie.map(h,L,l),ie.isFunction(l.opts.start)&&l.opts.start.call(e,l),ie.fx.timer(ie.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function j(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,o=t.toLowerCase().match(xe)||[];if(ie.isFunction(r))for(;n=o[i++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function U(e,t,r,n){function i(a){var u;return o[a]=!0,ie.each(e[a]||[],function(e,a){var l=a(t,r,n);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=e===Wt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function H(e,t){var r,n,i=ie.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ie.extend(!0,e,r),e}function X(e,t,r){for(var n,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){u.unshift(s);break}if(u[0]in r)o=u[0];else{for(s in r){if(!u[0]||e.converters[s+" "+u[0]]){o=s;break}n||(n=s)}o=o||n}return o?(o!==u[0]&&u.unshift(o),r[o]):void 0}function W(e,t,r,n){var i,o,s,a,u,l={},h=e.dataTypes.slice();if(h[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=h.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!u&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=h.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],h.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(c){return{state:"parsererror",error:s?c:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function Y(e,t,r,n){var i;if(ie.isArray(t))ie.each(t,function(t,i){r||qt.test(e)?n(e,i):Y(e+"["+("object"==typeof i?t:"")+"]",i,r,n)});else if(r||"object"!==ie.type(t))n(e,t);else for(i in t)Y(e+"["+i+"]",t[i],r,n)}function G(){try{return new e.XMLHttpRequest}catch(t){}}function z(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function q(e){return ie.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var V=[],$=V.slice,K=V.concat,J=V.push,Q=V.indexOf,Z={},ee=Z.toString,te=Z.hasOwnProperty,re={},ne="1.11.3",ie=function(e,t){return new ie.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,ae=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};ie.fn=ie.prototype={jquery:ne,constructor:ie,selector:"",length:0,toArray:function(){return $.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:$.call(this)},pushStack:function(e){var t=ie.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ie.each(this,e,t)},map:function(e){return this.pushStack(ie.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(0>e?t:0);return this.pushStack(r>=0&&t>r?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:V.sort,splice:V.splice},ie.extend=ie.fn.extend=function(){var e,t,r,n,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||ie.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(i=arguments[a]))for(n in i)e=s[n],r=i[n],s!==r&&(l&&r&&(ie.isPlainObject(r)||(t=ie.isArray(r)))?(t?(t=!1,o=e&&ie.isArray(e)?e:[]):o=e&&ie.isPlainObject(e)?e:{},s[n]=ie.extend(l,o,r)):void 0!==r&&(s[n]=r));return s},ie.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ie.type(e)},isArray:Array.isArray||function(e){return"array"===ie.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!ie.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ie.type(e)||e.nodeType||ie.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(re.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&ie.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(se,"ms-").replace(ae,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i,o=0,s=e.length,a=r(e);if(n){if(a)for(;s>o&&(i=t.apply(e[o],n),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],n),i===!1)break}else if(a)for(;s>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(r(Object(e))?ie.merge(n,"string"==typeof e?[e]:e):J.call(n,e)),n},inArray:function(e,t,r){var n;if(t){if(Q)return Q.call(t,e,r);for(n=t.length,r=r?0>r?Math.max(0,n+r):r:0;n>r;r++)if(r in t&&t[r]===e)return r}return-1},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;r>n;)e[i++]=t[n++];if(r!==r)for(;void 0!==t[n];)e[i++]=t[n++];return e.length=i,e},grep:function(e,t,r){for(var n,i=[],o=0,s=e.length,a=!r;s>o;o++)n=!t(e[o],o),n!==a&&i.push(e[o]);return i},map:function(e,t,n){var i,o=0,s=e.length,a=r(e),u=[];if(a)for(;s>o;o++)i=t(e[o],o,n),null!=i&&u.push(i);else for(o in e)i=t(e[o],o,n),null!=i&&u.push(i);return K.apply([],u)},guid:1,proxy:function(e,t){var r,n,i;return"string"==typeof t&&(i=e[t],t=e,e=i),ie.isFunction(e)?(r=$.call(arguments,2),n=function(){return e.apply(t||this,r.concat($.call(arguments)))},n.guid=e.guid=e.guid||ie.guid++,n):void 0},now:function(){return+new Date},support:re}),ie.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var le=function(e){function t(e,t,r,n){var i,o,s,a,u,l,c,p,f,g;if((t?t.ownerDocument||t:U)!==D&&P(t),t=t||D,r=r||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return r;if(!n&&B){if(11!==a&&(i=ye.exec(e)))if(s=i[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return r;if(o.id===s)return r.push(o),r}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&I(t,o)&&o.id===s)return r.push(o),r}else{if(i[2])return Q.apply(r,t.getElementsByTagName(e)),r;if((s=i[3])&&_.getElementsByClassName)return Q.apply(r,t.getElementsByClassName(s)),r}if(_.qsa&&(!L||!L.test(e))){if(p=c=j,f=t,g=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(l=S(e),(c=t.getAttribute("id"))?p=c.replace(be,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",u=l.length;u--;)l[u]=p+d(l[u]);f=xe.test(e)&&h(t.parentNode)||t,g=l.join(",")}if(g)try{return Q.apply(r,f.querySelectorAll(g)),r}catch(v){}finally{c||t.removeAttribute("id")}}}return A(e.replace(ue,"$1"),t,r,n)}function r(){function e(r,n){return t.push(r+" ")>w.cacheLength&&delete e[t.shift()],e[r+" "]=n}var t=[];return e}function n(e){return e[j]=!0,e}function i(e){var t=D.createElement("div");try{return!!e(t)}catch(r){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var r=e.split("|"),n=e.length;n--;)w.attrHandle[r[n]]=t}function s(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||q)-(~e.sourceIndex||q);if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function a(e){return function(t){var r=t.nodeName.toLowerCase();return"input"===r&&t.type===e}}function u(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function l(e){return n(function(t){return t=+t,n(function(r,n){for(var i,o=e([],r.length,t),s=o.length;s--;)r[i=o[s]]&&(r[i]=!(n[i]=r[i]))})})}function h(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function c(){}function d(e){for(var t=0,r=e.length,n="";r>t;t++)n+=e[t].value;return n}function p(e,t,r){var n=t.dir,i=r&&"parentNode"===n,o=X++;return t.first?function(t,r,o){for(;t=t[n];)if(1===t.nodeType||i)return e(t,r,o)}:function(t,r,s){var a,u,l=[H,o];if(s){for(;t=t[n];)if((1===t.nodeType||i)&&e(t,r,s))return!0;
}else for(;t=t[n];)if(1===t.nodeType||i){if(u=t[j]||(t[j]={}),(a=u[n])&&a[0]===H&&a[1]===o)return l[2]=a[2];if(u[n]=l,l[2]=e(t,r,s))return!0}}}function f(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function g(e,r,n){for(var i=0,o=r.length;o>i;i++)t(e,r[i],n);return n}function v(e,t,r,n,i){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(!r||r(o,n,i))&&(s.push(o),l&&t.push(a));return s}function m(e,t,r,i,o,s){return i&&!i[j]&&(i=m(i)),o&&!o[j]&&(o=m(o,s)),n(function(n,s,a,u){var l,h,c,d=[],p=[],f=s.length,m=n||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!n&&t?m:v(m,d,e,a,u),x=r?o||(n?e:f||i)?[]:s:y;if(r&&r(y,x,a,u),i)for(l=v(x,p),i(l,[],a,u),h=l.length;h--;)(c=l[h])&&(x[p[h]]=!(y[p[h]]=c));if(n){if(o||e){if(o){for(l=[],h=x.length;h--;)(c=x[h])&&l.push(y[h]=c);o(null,x=[],l,u)}for(h=x.length;h--;)(c=x[h])&&(l=o?ee(n,c):d[h])>-1&&(n[l]=!(s[l]=c))}}else x=v(x===s?x.splice(f,x.length):x),o?o(null,s,x,u):Q.apply(s,x)})}function y(e){for(var t,r,n,i=e.length,o=w.relative[e[0].type],s=o||w.relative[" "],a=o?1:0,u=p(function(e){return e===t},s,!0),l=p(function(e){return ee(t,e)>-1},s,!0),h=[function(e,r,n){var i=!o&&(n||r!==M)||((t=r).nodeType?u(e,r,n):l(e,r,n));return t=null,i}];i>a;a++)if(r=w.relative[e[a].type])h=[p(f(h),r)];else{if(r=w.filter[e[a].type].apply(null,e[a].matches),r[j]){for(n=++a;i>n&&!w.relative[e[n].type];n++);return m(a>1&&f(h),a>1&&d(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ue,"$1"),r,n>a&&y(e.slice(a,n)),i>n&&y(e=e.slice(n)),i>n&&d(e))}h.push(r)}return f(h)}function x(e,r){var i=r.length>0,o=e.length>0,s=function(n,s,a,u,l){var h,c,d,p=0,f="0",g=n&&[],m=[],y=M,x=n||o&&w.find.TAG("*",l),b=H+=null==y?1:Math.random()||.1,_=x.length;for(l&&(M=s!==D&&s);f!==_&&null!=(h=x[f]);f++){if(o&&h){for(c=0;d=e[c++];)if(d(h,s,a)){u.push(h);break}l&&(H=b)}i&&((h=!d&&h)&&p--,n&&g.push(h))}if(p+=f,i&&f!==p){for(c=0;d=r[c++];)d(g,m,s,a);if(n){if(p>0)for(;f--;)g[f]||m[f]||(m[f]=K.call(u));m=v(m)}Q.apply(u,m),l&&!n&&m.length>0&&p+r.length>1&&t.uniqueSort(u)}return l&&(H=b,M=y),g};return i?n(s):s}var b,_,w,T,E,S,C,A,M,O,R,P,D,F,B,L,k,N,I,j="sizzle"+1*new Date,U=e.document,H=0,X=0,W=r(),Y=r(),G=r(),z=function(e,t){return e===t&&(R=!0),0},q=1<<31,V={}.hasOwnProperty,$=[],K=$.pop,J=$.push,Q=$.push,Z=$.slice,ee=function(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=ne.replace("w","w#"),oe="\\["+re+"*("+ne+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+re+"*\\]",se=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(re+"+","g"),ue=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),le=new RegExp("^"+re+"*,"+re+"*"),he=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),ce=new RegExp("="+re+"*([^\\]'\"]*?)"+re+"*\\]","g"),de=new RegExp(se),pe=new RegExp("^"+ie+"$"),fe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,be=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),we=function(e,t,r){var n="0x"+t-65536;return n!==n||r?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Te=function(){P()};try{Q.apply($=Z.call(U.childNodes),U.childNodes),$[U.childNodes.length].nodeType}catch(Ee){Q={apply:$.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}_=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},P=t.setDocument=function(e){var t,r,n=e?e.ownerDocument||e:U;return n!==D&&9===n.nodeType&&n.documentElement?(D=n,F=n.documentElement,r=n.defaultView,r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",Te,!1):r.attachEvent&&r.attachEvent("onunload",Te)),B=!E(n),_.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=i(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=me.test(n.getElementsByClassName),_.getById=i(function(e){return F.appendChild(e).id=j,!n.getElementsByName||!n.getElementsByName(j).length}),_.getById?(w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&B){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}},w.filter.ID=function(e){var t=e.replace(_e,we);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var t=e.replace(_e,we);return function(e){var r="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),w.find.TAG=_.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):_.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[i++];)1===r.nodeType&&n.push(r);return n}return o},w.find.CLASS=_.getElementsByClassName&&function(e,t){return B?t.getElementsByClassName(e):void 0},k=[],L=[],(_.qsa=me.test(n.querySelectorAll))&&(i(function(e){F.appendChild(e).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+re+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+j+"-]").length||L.push("~="),e.querySelectorAll(":checked").length||L.push(":checked"),e.querySelectorAll("a#"+j+"+*").length||L.push(".#.+[+~]")}),i(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+re+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(_.matchesSelector=me.test(N=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&i(function(e){_.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),k.push("!=",se)}),L=L.length&&new RegExp(L.join("|")),k=k.length&&new RegExp(k.join("|")),t=me.test(F.compareDocumentPosition),I=t||me.test(F.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return R=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!_.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===U&&I(U,e)?-1:t===n||t.ownerDocument===U&&I(U,t)?1:O?ee(O,e)-ee(O,t):0:4&r?-1:1)}:function(e,t){if(e===t)return R=!0,0;var r,i=0,o=e.parentNode,a=t.parentNode,u=[e],l=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:O?ee(O,e)-ee(O,t):0;if(o===a)return s(e,t);for(r=e;r=r.parentNode;)u.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;u[i]===l[i];)i++;return i?s(u[i],l[i]):u[i]===U?-1:l[i]===U?1:0},n):D},t.matches=function(e,r){return t(e,null,null,r)},t.matchesSelector=function(e,r){if((e.ownerDocument||e)!==D&&P(e),r=r.replace(ce,"='$1']"),_.matchesSelector&&B&&(!k||!k.test(r))&&(!L||!L.test(r)))try{var n=N.call(e,r);if(n||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return t(r,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&P(e),I(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&P(e);var r=w.attrHandle[t.toLowerCase()],n=r&&V.call(w.attrHandle,t.toLowerCase())?r(e,t,!B):void 0;return void 0!==n?n:_.attributes||!B?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,r=[],n=0,i=0;if(R=!_.detectDuplicates,O=!_.sortStable&&e.slice(0),e.sort(z),R){for(;t=e[i++];)t===e[i]&&(n=r.push(i));for(;n--;)e.splice(r[n],1)}return O=null,e},T=t.getText=function(e){var t,r="",n=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=T(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[n++];)r+=T(t);return r},w=t.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,we),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&de.test(r)&&(t=S(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,r,n){return function(i){var o=t.attr(i,e);return null==o?"!="===r:r?(o+="","="===r?o===n:"!="===r?o!==n:"^="===r?n&&0===o.indexOf(n):"*="===r?n&&o.indexOf(n)>-1:"$="===r?n&&o.slice(-n.length)===n:"~="===r?(" "+o.replace(ae," ")+" ").indexOf(n)>-1:"|="===r?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,r,n,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,u){var l,h,c,d,p,f,g=o!==s?"nextSibling":"previousSibling",v=t.parentNode,m=a&&t.nodeName.toLowerCase(),y=!u&&!a;if(v){if(o){for(;g;){for(c=t;c=c[g];)if(a?c.nodeName.toLowerCase()===m:1===c.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?v.firstChild:v.lastChild],s&&y){for(h=v[j]||(v[j]={}),l=h[e]||[],p=l[0]===H&&l[1],d=l[0]===H&&l[2],c=p&&v.childNodes[p];c=++p&&c&&c[g]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===t){h[e]=[H,p,d];break}}else if(y&&(l=(t[j]||(t[j]={}))[e])&&l[0]===H)d=l[1];else for(;(c=++p&&c&&c[g]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==m:1!==c.nodeType)||!++d||(y&&((c[j]||(c[j]={}))[e]=[H,d]),c!==t)););return d-=i,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(e,r){var i,o=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[j]?o(r):o.length>1?(i=[e,e,"",r],w.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,i=o(e,r),s=i.length;s--;)n=ee(e,i[s]),e[n]=!(t[n]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:n(function(e){var t=[],r=[],i=C(e.replace(ue,"$1"));return i[j]?n(function(e,t,r,n){for(var o,s=i(e,null,n,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,n,o){return t[0]=e,i(t,null,o,r),t[0]=null,!r.pop()}}),has:n(function(e){return function(r){return t(e,r).length>0}}),contains:n(function(e){return e=e.replace(_e,we),function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:n(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,we).toLowerCase(),function(t){var r;do if(r=B?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return r=r.toLowerCase(),r===e||0===r.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===F},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,r){return[0>r?r+t:r]}),even:l(function(e,t){for(var r=0;t>r;r+=2)e.push(r);return e}),odd:l(function(e,t){for(var r=1;t>r;r+=2)e.push(r);return e}),lt:l(function(e,t,r){for(var n=0>r?r+t:r;--n>=0;)e.push(n);return e}),gt:l(function(e,t,r){for(var n=0>r?r+t:r;++n<t;)e.push(n);return e})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=u(b);return c.prototype=w.filters=w.pseudos,w.setFilters=new c,S=t.tokenize=function(e,r){var n,i,o,s,a,u,l,h=Y[e+" "];if(h)return r?0:h.slice(0);for(a=e,u=[],l=w.preFilter;a;){(!n||(i=le.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),n=!1,(i=he.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(ue," ")}),a=a.slice(n.length));for(s in w.filter)!(i=fe[s].exec(a))||l[s]&&!(i=l[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return r?a.length:a?t.error(e):Y(e,u).slice(0)},C=t.compile=function(e,t){var r,n=[],i=[],o=G[e+" "];if(!o){for(t||(t=S(e)),r=t.length;r--;)o=y(t[r]),o[j]?n.push(o):i.push(o);o=G(e,x(i,n)),o.selector=e}return o},A=t.select=function(e,t,r,n){var i,o,s,a,u,l="function"==typeof e&&e,c=!n&&S(e=l.selector||e);if(r=r||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&_.getById&&9===t.nodeType&&B&&w.relative[o[1].type]){if(t=(w.find.ID(s.matches[0].replace(_e,we),t)||[])[0],!t)return r;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=fe.needsContext.test(e)?0:o.length;i--&&(s=o[i],!w.relative[a=s.type]);)if((u=w.find[a])&&(n=u(s.matches[0].replace(_e,we),xe.test(o[0].type)&&h(t.parentNode)||t))){if(o.splice(i,1),e=n.length&&d(o),!e)return Q.apply(r,n),r;break}}return(l||C(e,c))(n,t,!B,r,xe.test(e)&&h(t.parentNode)||t),r},_.sortStable=j.split("").sort(z).join("")===j,_.detectDuplicates=!!R,P(),_.sortDetached=i(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,r){return r?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,r){return r||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,r){var n;return r?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);ie.find=le,ie.expr=le.selectors,ie.expr[":"]=ie.expr.pseudos,ie.unique=le.uniqueSort,ie.text=le.getText,ie.isXMLDoc=le.isXML,ie.contains=le.contains;var he=ie.expr.match.needsContext,ce=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,de=/^.[^:#\[\.,]*$/;ie.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ie.find.matchesSelector(n,e)?[n]:[]:ie.find.matches(e,ie.grep(t,function(e){return 1===e.nodeType}))},ie.fn.extend({find:function(e){var t,r=[],n=this,i=n.length;if("string"!=typeof e)return this.pushStack(ie(e).filter(function(){for(t=0;i>t;t++)if(ie.contains(n[t],this))return!0}));for(t=0;i>t;t++)ie.find(e,n[t],r);return r=this.pushStack(i>1?ie.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&he.test(e)?ie(e):e||[],!1).length}});var pe,fe=e.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ve=ie.fn.init=function(e,t){var r,n;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ge.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||pe).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ie?t[0]:t,ie.merge(this,ie.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:fe,!0)),ce.test(r[1])&&ie.isPlainObject(t))for(r in t)ie.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if(n=fe.getElementById(r[2]),n&&n.parentNode){if(n.id!==r[2])return pe.find(e);this.length=1,this[0]=n}return this.context=fe,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ie.isFunction(e)?"undefined"!=typeof pe.ready?pe.ready(e):e(ie):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ie.makeArray(e,this))};ve.prototype=ie.fn,pe=ie(fe);var me=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};ie.extend({dir:function(e,t,r){for(var n=[],i=e[t];i&&9!==i.nodeType&&(void 0===r||1!==i.nodeType||!ie(i).is(r));)1===i.nodeType&&n.push(i),i=i[t];return n},sibling:function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}}),ie.fn.extend({has:function(e){var t,r=ie(e,this),n=r.length;return this.filter(function(){for(t=0;n>t;t++)if(ie.contains(this,r[t]))return!0})},closest:function(e,t){for(var r,n=0,i=this.length,o=[],s=he.test(e)||"string"!=typeof e?ie(e,t||this.context):0;i>n;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&ie.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?ie.unique(o):o)},index:function(e){return e?"string"==typeof e?ie.inArray(this[0],ie(e)):ie.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ie.unique(ie.merge(this.get(),ie(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ie.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ie.dir(e,"parentNode")},parentsUntil:function(e,t,r){return ie.dir(e,"parentNode",r)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return ie.dir(e,"nextSibling")},prevAll:function(e){return ie.dir(e,"previousSibling")},nextUntil:function(e,t,r){return ie.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return ie.dir(e,"previousSibling",r)},siblings:function(e){return ie.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ie.sibling(e.firstChild)},contents:function(e){return ie.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ie.merge([],e.childNodes)}},function(e,t){ie.fn[e]=function(r,n){var i=ie.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=ie.filter(n,i)),this.length>1&&(ye[e]||(i=ie.unique(i)),me.test(e)&&(i=i.reverse())),this.pushStack(i)}});var xe=/\S+/g,be={};ie.Callbacks=function(e){e="string"==typeof e?be[e]||o(e):ie.extend({},e);var t,r,n,i,s,a,u=[],l=!e.once&&[],h=function(o){for(r=e.memory&&o,n=!0,s=a||0,a=0,i=u.length,t=!0;u&&i>s;s++)if(u[s].apply(o[0],o[1])===!1&&e.stopOnFalse){r=!1;break}t=!1,u&&(l?l.length&&h(l.shift()):r?u=[]:c.disable())},c={add:function(){if(u){var n=u.length;!function o(t){ie.each(t,function(t,r){var n=ie.type(r);"function"===n?e.unique&&c.has(r)||u.push(r):r&&r.length&&"string"!==n&&o(r)})}(arguments),t?i=u.length:r&&(a=n,h(r))}return this},remove:function(){return u&&ie.each(arguments,function(e,r){for(var n;(n=ie.inArray(r,u,n))>-1;)u.splice(n,1),t&&(i>=n&&i--,s>=n&&s--)}),this},has:function(e){return e?ie.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],i=0,this},disable:function(){return u=l=r=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,r||c.disable(),this},locked:function(){return!l},fireWith:function(e,r){return!u||n&&!l||(r=r||[],r=[e,r.slice?r.slice():r],t?l.push(r):h(r)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},ie.extend({Deferred:function(e){var t=[["resolve","done",ie.Callbacks("once memory"),"resolved"],["reject","fail",ie.Callbacks("once memory"),"rejected"],["notify","progress",ie.Callbacks("memory")]],r="pending",n={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ie.Deferred(function(r){ie.each(t,function(t,o){var s=ie.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&ie.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===n?r.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ie.extend(e,n):n}},i={};return n.pipe=n.then,ie.each(t,function(e,o){var s=o[2],a=o[3];n[o[1]]=s.add,a&&s.add(function(){r=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?n:this,arguments),this},i[o[0]+"With"]=s.fireWith}),n.promise(i),e&&e.call(i,i),i},when:function(e){var t,r,n,i=0,o=$.call(arguments),s=o.length,a=1!==s||e&&ie.isFunction(e.promise)?s:0,u=1===a?e:ie.Deferred(),l=function(e,r,n){return function(i){r[e]=this,n[e]=arguments.length>1?$.call(arguments):i,n===t?u.notifyWith(r,n):--a||u.resolveWith(r,n)}};if(s>1)for(t=new Array(s),r=new Array(s),n=new Array(s);s>i;i++)o[i]&&ie.isFunction(o[i].promise)?o[i].promise().done(l(i,n,o)).fail(u.reject).progress(l(i,r,t)):--a;return a||u.resolveWith(n,o),u.promise()}});var _e;ie.fn.ready=function(e){return ie.ready.promise().done(e),this},ie.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ie.readyWait++:ie.ready(!0)},ready:function(e){if(e===!0?!--ie.readyWait:!ie.isReady){if(!fe.body)return setTimeout(ie.ready);ie.isReady=!0,e!==!0&&--ie.readyWait>0||(_e.resolveWith(fe,[ie]),ie.fn.triggerHandler&&(ie(fe).triggerHandler("ready"),ie(fe).off("ready")))}}}),ie.ready.promise=function(t){if(!_e)if(_e=ie.Deferred(),"complete"===fe.readyState)setTimeout(ie.ready);else if(fe.addEventListener)fe.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1);else{fe.attachEvent("onreadystatechange",a),e.attachEvent("onload",a);var r=!1;try{r=null==e.frameElement&&fe.documentElement}catch(n){}r&&r.doScroll&&!function i(){if(!ie.isReady){try{r.doScroll("left")}catch(e){return setTimeout(i,50)}s(),ie.ready()}}()}return _e.promise(t)};var we,Te="undefined";for(we in ie(re))break;re.ownLast="0"!==we,re.inlineBlockNeedsLayout=!1,ie(function(){var e,t,r,n;r=fe.getElementsByTagName("body")[0],r&&r.style&&(t=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",r.appendChild(n).appendChild(t),typeof t.style.zoom!==Te&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",re.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(r.style.zoom=1)),r.removeChild(n))}),function(){var e=fe.createElement("div");if(null==re.deleteExpando){re.deleteExpando=!0;try{delete e.test}catch(t){re.deleteExpando=!1}}e=null}(),ie.acceptData=function(e){var t=ie.noData[(e.nodeName+" ").toLowerCase()],r=+e.nodeType||1;return 1!==r&&9!==r?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Se=/([A-Z])/g;ie.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ie.cache[e[ie.expando]]:e[ie.expando],!!e&&!l(e)},data:function(e,t,r){return h(e,t,r)},removeData:function(e,t){return c(e,t)},_data:function(e,t,r){return h(e,t,r,!0)},_removeData:function(e,t){return c(e,t,!0)}}),ie.fn.extend({data:function(e,t){var r,n,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=ie.data(o),1===o.nodeType&&!ie._data(o,"parsedAttrs"))){for(r=s.length;r--;)s[r]&&(n=s[r].name,0===n.indexOf("data-")&&(n=ie.camelCase(n.slice(5)),u(o,n,i[n])));ie._data(o,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ie.data(this,e)}):arguments.length>1?this.each(function(){ie.data(this,e,t)}):o?u(o,e,ie.data(o,e)):void 0},removeData:function(e){return this.each(function(){ie.removeData(this,e)})}}),ie.extend({queue:function(e,t,r){var n;return e?(t=(t||"fx")+"queue",n=ie._data(e,t),r&&(!n||ie.isArray(r)?n=ie._data(e,t,ie.makeArray(r)):n.push(r)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=ie.queue(e,t),n=r.length,i=r.shift(),o=ie._queueHooks(e,t),s=function(){ie.dequeue(e,t)};"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return ie._data(e,r)||ie._data(e,r,{empty:ie.Callbacks("once memory").add(function(){ie._removeData(e,t+"queue"),ie._removeData(e,r)})})}}),ie.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?ie.queue(this[0],e):void 0===t?this:this.each(function(){var r=ie.queue(this,e,t);ie._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&ie.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ie.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=ie.Deferred(),o=this,s=this.length,a=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)r=ie._data(o[s],e+"queueHooks"),r&&r.empty&&(n++,r.empty.add(a));return a(),i.promise(t)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ae=["Top","Right","Bottom","Left"],Me=function(e,t){return e=t||e,"none"===ie.css(e,"display")||!ie.contains(e.ownerDocument,e)},Oe=ie.access=function(e,t,r,n,i,o,s){var a=0,u=e.length,l=null==r;if("object"===ie.type(r)){i=!0;for(a in r)ie.access(e,t,a,r[a],!0,o,s)}else if(void 0!==n&&(i=!0,ie.isFunction(n)||(s=!0),l&&(s?(t.call(e,n),t=null):(l=t,t=function(e,t,r){return l.call(ie(e),r)})),t))for(;u>a;a++)t(e[a],r,s?n:n.call(e[a],a,t(e[a],r)));return i?e:l?t.call(e):u?t(e[0],r):o},Re=/^(?:checkbox|radio)$/i;!function(){var e=fe.createElement("input"),t=fe.createElement("div"),r=fe.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",re.leadingWhitespace=3===t.firstChild.nodeType,re.tbody=!t.getElementsByTagName("tbody").length,re.htmlSerialize=!!t.getElementsByTagName("link").length,re.html5Clone="<:nav></:nav>"!==fe.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,r.appendChild(e),re.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,r.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",re.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,re.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){re.noCloneEvent=!1}),t.cloneNode(!0).click()),null==re.deleteExpando){re.deleteExpando=!0;try{delete t.test}catch(n){re.deleteExpando=!1}}}(),function(){var t,r,n=fe.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})r="on"+t,(re[t+"Bubbles"]=r in e)||(n.setAttribute(r,"t"),re[t+"Bubbles"]=n.attributes[r].expando===!1);n=null}();var Pe=/^(?:input|select|textarea)$/i,De=/^key/,Fe=/^(?:mouse|pointer|contextmenu)|click/,Be=/^(?:focusinfocus|focusoutblur)$/,Le=/^([^.]*)(?:\.(.+)|)$/;ie.event={global:{},add:function(e,t,r,n,i){var o,s,a,u,l,h,c,d,p,f,g,v=ie._data(e);if(v){for(r.handler&&(u=r,r=u.handler,i=u.selector),r.guid||(r.guid=ie.guid++),(s=v.events)||(s=v.events={}),(h=v.handle)||(h=v.handle=function(e){return typeof ie===Te||e&&ie.event.triggered===e.type?void 0:ie.event.dispatch.apply(h.elem,arguments)},h.elem=e),t=(t||"").match(xe)||[""],a=t.length;a--;)o=Le.exec(t[a])||[],p=g=o[1],f=(o[2]||"").split(".").sort(),p&&(l=ie.event.special[p]||{},p=(i?l.delegateType:l.bindType)||p,l=ie.event.special[p]||{},c=ie.extend({type:p,origType:g,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&ie.expr.match.needsContext.test(i),namespace:f.join(".")},u),(d=s[p])||(d=s[p]=[],d.delegateCount=0,l.setup&&l.setup.call(e,n,f,h)!==!1||(e.addEventListener?e.addEventListener(p,h,!1):e.attachEvent&&e.attachEvent("on"+p,h))),l.add&&(l.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),ie.event.global[p]=!0);e=null}},remove:function(e,t,r,n,i){var o,s,a,u,l,h,c,d,p,f,g,v=ie.hasData(e)&&ie._data(e);if(v&&(h=v.events)){for(t=(t||"").match(xe)||[""],l=t.length;l--;)if(a=Le.exec(t[l])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(c=ie.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,d=h[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=d.length;o--;)s=d[o],!i&&g!==s.origType||r&&r.guid!==s.guid||a&&!a.test(s.namespace)||n&&n!==s.selector&&("**"!==n||!s.selector)||(d.splice(o,1),s.selector&&d.delegateCount--,c.remove&&c.remove.call(e,s));u&&!d.length&&(c.teardown&&c.teardown.call(e,f,v.handle)!==!1||ie.removeEvent(e,p,v.handle),delete h[p])}else for(p in h)ie.event.remove(e,p+t[l],r,n,!0);ie.isEmptyObject(h)&&(delete v.handle,ie._removeData(e,"events"))}},trigger:function(t,r,n,i){var o,s,a,u,l,h,c,d=[n||fe],p=te.call(t,"type")?t.type:t,f=te.call(t,"namespace")?t.namespace.split("."):[];if(a=h=n=n||fe,3!==n.nodeType&&8!==n.nodeType&&!Be.test(p+ie.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),s=p.indexOf(":")<0&&"on"+p,t=t[ie.expando]?t:new ie.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),r=null==r?[t]:ie.makeArray(r,[t]),l=ie.event.special[p]||{},i||!l.trigger||l.trigger.apply(n,r)!==!1)){if(!i&&!l.noBubble&&!ie.isWindow(n)){for(u=l.delegateType||p,Be.test(u+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),h=a;h===(n.ownerDocument||fe)&&d.push(h.defaultView||h.parentWindow||e)}for(c=0;(a=d[c++])&&!t.isPropagationStopped();)t.type=c>1?u:l.bindType||p,o=(ie._data(a,"events")||{})[t.type]&&ie._data(a,"handle"),o&&o.apply(a,r),o=s&&a[s],o&&o.apply&&ie.acceptData(a)&&(t.result=o.apply(a,r),t.result===!1&&t.preventDefault());if(t.type=p,!i&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),r)===!1)&&ie.acceptData(n)&&s&&n[p]&&!ie.isWindow(n)){h=n[s],h&&(n[s]=null),ie.event.triggered=p;try{n[p]()}catch(g){}ie.event.triggered=void 0,h&&(n[s]=h)}return t.result}},dispatch:function(e){e=ie.event.fix(e);var t,r,n,i,o,s=[],a=$.call(arguments),u=(ie._data(this,"events")||{})[e.type]||[],l=ie.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=ie.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,o=0;(n=i.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(n.namespace))&&(e.handleObj=n,
e.data=n.data,r=((ie.event.special[n.origType]||{}).handle||n.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,n,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(i=[],o=0;a>o;o++)n=t[o],r=n.selector+" ",void 0===i[r]&&(i[r]=n.needsContext?ie(r,this).index(u)>=0:ie.find(r,this,null,[u]).length),i[r]&&i.push(n);i.length&&s.push({elem:u,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},fix:function(e){if(e[ie.expando])return e;var t,r,n,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Fe.test(i)?this.mouseHooks:De.test(i)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new ie.Event(o),t=n.length;t--;)r=n[t],e[r]=o[r];return e.target||(e.target=o.srcElement||fe),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,n,i,o=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||fe,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ie.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ie.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,n){var i=ie.extend(new ie.Event,r,{type:e,isSimulated:!0,originalEvent:{}});n?ie.event.trigger(i,null,t):ie.event.dispatch.call(t,i),i.isDefaultPrevented()&&r.preventDefault()}},ie.removeEvent=fe.removeEventListener?function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)}:function(e,t,r){var n="on"+t;e.detachEvent&&(typeof e[n]===Te&&(e[n]=null),e.detachEvent(n,r))},ie.Event=function(e,t){return this instanceof ie.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?d:p):this.type=e,t&&ie.extend(this,t),this.timeStamp=e&&e.timeStamp||ie.now(),void(this[ie.expando]=!0)):new ie.Event(e,t)},ie.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ie.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==n&&!ie.contains(n,i))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),re.submitBubbles||(ie.event.special.submit={setup:function(){return ie.nodeName(this,"form")?!1:void ie.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,r=ie.nodeName(t,"input")||ie.nodeName(t,"button")?t.form:void 0;r&&!ie._data(r,"submitBubbles")&&(ie.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),ie._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ie.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ie.nodeName(this,"form")?!1:void ie.event.remove(this,"._submit")}}),re.changeBubbles||(ie.event.special.change={setup:function(){return Pe.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ie.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ie.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ie.event.simulate("change",this,e,!0)})),!1):void ie.event.add(this,"beforeactivate._change",function(e){var t=e.target;Pe.test(t.nodeName)&&!ie._data(t,"changeBubbles")&&(ie.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ie.event.simulate("change",this.parentNode,e,!0)}),ie._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ie.event.remove(this,"._change"),!Pe.test(this.nodeName)}}),re.focusinBubbles||ie.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){ie.event.simulate(t,e.target,ie.event.fix(e),!0)};ie.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=ie._data(n,t);i||n.addEventListener(e,r,!0),ie._data(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=ie._data(n,t)-1;i?ie._data(n,t,i):(n.removeEventListener(e,r,!0),ie._removeData(n,t))}}}),ie.fn.extend({on:function(e,t,r,n,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(o in e)this.on(o,t,r,e[o],i);return this}if(null==r&&null==n?(n=t,r=t=void 0):null==n&&("string"==typeof t?(n=r,r=void 0):(n=r,r=t,t=void 0)),n===!1)n=p;else if(!n)return this;return 1===i&&(s=n,n=function(e){return ie().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=ie.guid++)),this.each(function(){ie.event.add(this,e,n,r,t)})},one:function(e,t,r,n){return this.on(e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,ie(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=p),this.each(function(){ie.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){ie.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?ie.event.trigger(e,t,r,!0):void 0}});var ke="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ne=/ jQuery\d+="(?:null|\d+)"/g,Ie=new RegExp("<(?:"+ke+")[\\s/>]","i"),je=/^\s+/,Ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,Xe=/<tbody/i,We=/<|&#?\w+;/,Ye=/<(?:script|style|link)/i,Ge=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^$|\/(?:java|ecma)script/i,qe=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,$e={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:re.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ke=g(fe),Je=Ke.appendChild(fe.createElement("div"));$e.optgroup=$e.option,$e.tbody=$e.tfoot=$e.colgroup=$e.caption=$e.thead,$e.th=$e.td,ie.extend({clone:function(e,t,r){var n,i,o,s,a,u=ie.contains(e.ownerDocument,e);if(re.html5Clone||ie.isXMLDoc(e)||!Ie.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Je.innerHTML=e.outerHTML,Je.removeChild(o=Je.firstChild)),!(re.noCloneEvent&&re.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ie.isXMLDoc(e)))for(n=v(o),a=v(e),s=0;null!=(i=a[s]);++s)n[s]&&T(i,n[s]);if(t)if(r)for(a=a||v(e),n=n||v(o),s=0;null!=(i=a[s]);s++)w(i,n[s]);else w(e,o);return n=v(o,"script"),n.length>0&&_(n,!u&&v(e,"script")),n=a=i=null,o},buildFragment:function(e,t,r,n){for(var i,o,s,a,u,l,h,c=e.length,d=g(t),p=[],f=0;c>f;f++)if(o=e[f],o||0===o)if("object"===ie.type(o))ie.merge(p,o.nodeType?[o]:o);else if(We.test(o)){for(a=a||d.appendChild(t.createElement("div")),u=(He.exec(o)||["",""])[1].toLowerCase(),h=$e[u]||$e._default,a.innerHTML=h[1]+o.replace(Ue,"<$1></$2>")+h[2],i=h[0];i--;)a=a.lastChild;if(!re.leadingWhitespace&&je.test(o)&&p.push(t.createTextNode(je.exec(o)[0])),!re.tbody)for(o="table"!==u||Xe.test(o)?"<table>"!==h[1]||Xe.test(o)?0:a:a.firstChild,i=o&&o.childNodes.length;i--;)ie.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(ie.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else p.push(t.createTextNode(o));for(a&&d.removeChild(a),re.appendChecked||ie.grep(v(p,"input"),m),f=0;o=p[f++];)if((!n||-1===ie.inArray(o,n))&&(s=ie.contains(o.ownerDocument,o),a=v(d.appendChild(o),"script"),s&&_(a),r))for(i=0;o=a[i++];)ze.test(o.type||"")&&r.push(o);return a=null,d},cleanData:function(e,t){for(var r,n,i,o,s=0,a=ie.expando,u=ie.cache,l=re.deleteExpando,h=ie.event.special;null!=(r=e[s]);s++)if((t||ie.acceptData(r))&&(i=r[a],o=i&&u[i])){if(o.events)for(n in o.events)h[n]?ie.event.remove(r,n):ie.removeEvent(r,n,o.handle);u[i]&&(delete u[i],l?delete r[a]:typeof r.removeAttribute!==Te?r.removeAttribute(a):r[a]=null,V.push(i))}}}),ie.fn.extend({text:function(e){return Oe(this,function(e){return void 0===e?ie.text(this):this.empty().append((this[0]&&this[0].ownerDocument||fe).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,n=e?ie.filter(e,this):this,i=0;null!=(r=n[i]);i++)t||1!==r.nodeType||ie.cleanData(v(r)),r.parentNode&&(t&&ie.contains(r.ownerDocument,r)&&_(v(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ie.cleanData(v(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ie.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ie.clone(this,e,t)})},html:function(e){return Oe(this,function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Ne,""):void 0;if("string"==typeof e&&!Ye.test(e)&&(re.htmlSerialize||!Ie.test(e))&&(re.leadingWhitespace||!je.test(e))&&!$e[(He.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ue,"<$1></$2>");try{for(;n>r;r++)t=this[r]||{},1===t.nodeType&&(ie.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ie.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=K.apply([],e);var r,n,i,o,s,a,u=0,l=this.length,h=this,c=l-1,d=e[0],p=ie.isFunction(d);if(p||l>1&&"string"==typeof d&&!re.checkClone&&Ge.test(d))return this.each(function(r){var n=h.eq(r);p&&(e[0]=d.call(this,r,n.html())),n.domManip(e,t)});if(l&&(a=ie.buildFragment(e,this[0].ownerDocument,!1,this),r=a.firstChild,1===a.childNodes.length&&(a=r),r)){for(o=ie.map(v(a,"script"),x),i=o.length;l>u;u++)n=a,u!==c&&(n=ie.clone(n,!0,!0),i&&ie.merge(o,v(n,"script"))),t.call(this[u],n,u);if(i)for(s=o[o.length-1].ownerDocument,ie.map(o,b),u=0;i>u;u++)n=o[u],ze.test(n.type||"")&&!ie._data(n,"globalEval")&&ie.contains(s,n)&&(n.src?ie._evalUrl&&ie._evalUrl(n.src):ie.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Ve,"")));a=r=null}return this}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ie.fn[e]=function(e){for(var r,n=0,i=[],o=ie(e),s=o.length-1;s>=n;n++)r=n===s?this:this.clone(!0),ie(o[n])[t](r),J.apply(i,r.get());return this.pushStack(i)}});var Qe,Ze={};!function(){var e;re.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,r,n;return r=fe.getElementsByTagName("body")[0],r&&r.style?(t=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",r.appendChild(n).appendChild(t),typeof t.style.zoom!==Te&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(fe.createElement("div")).style.width="5px",e=3!==t.offsetWidth),r.removeChild(n),e):void 0}}();var et,tt,rt=/^margin/,nt=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),it=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},tt=function(e,t,r){var n,i,o,s,a=e.style;return r=r||et(e),s=r?r.getPropertyValue(t)||r[t]:void 0,r&&(""!==s||ie.contains(e.ownerDocument,e)||(s=ie.style(e,t)),nt.test(s)&&rt.test(t)&&(n=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=r.width,a.width=n,a.minWidth=i,a.maxWidth=o)),void 0===s?s:s+""}):fe.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,r){var n,i,o,s,a=e.style;return r=r||et(e),s=r?r[t]:void 0,null==s&&a&&a[t]&&(s=a[t]),nt.test(s)&&!it.test(t)&&(n=a.left,i=e.runtimeStyle,o=i&&i.left,o&&(i.left=e.currentStyle.left),a.left="fontSize"===t?"1em":s,s=a.pixelLeft+"px",a.left=n,o&&(i.left=o)),void 0===s?s:s+""||"auto"}),function(){function t(){var t,r,n,i;r=fe.getElementsByTagName("body")[0],r&&r.style&&(t=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",r.appendChild(n).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=s=!1,u=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,s="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,i=t.appendChild(fe.createElement("div")),i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",u=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight),t.removeChild(i)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=t.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===i[0].offsetHeight,a&&(i[0].style.display="",i[1].style.display="none",a=0===i[0].offsetHeight),r.removeChild(n))}var r,n,i,o,s,a,u;r=fe.createElement("div"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=r.getElementsByTagName("a")[0],n=i&&i.style,n&&(n.cssText="float:left;opacity:.5",re.opacity="0.5"===n.opacity,re.cssFloat=!!n.cssFloat,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===r.style.backgroundClip,re.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,ie.extend(re,{reliableHiddenOffsets:function(){return null==a&&t(),a},boxSizingReliable:function(){return null==s&&t(),s},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==u&&t(),u}}))}(),ie.swap=function(e,t,r,n){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=r.apply(e,n||[]);for(o in t)e.style[o]=s[o];return i};var ot=/alpha\([^)]*\)/i,st=/opacity\s*=\s*([^)]*)/,at=/^(none|table(?!-c[ea]).+)/,ut=new RegExp("^("+Ce+")(.*)$","i"),lt=new RegExp("^([+-])=("+Ce+")","i"),ht={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:"0",fontWeight:"400"},dt=["Webkit","O","Moz","ms"];ie.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=tt(e,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":re.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=ie.camelCase(t),u=e.style;if(t=ie.cssProps[a]||(ie.cssProps[a]=A(u,a)),s=ie.cssHooks[t]||ie.cssHooks[a],void 0===r)return s&&"get"in s&&void 0!==(i=s.get(e,!1,n))?i:u[t];if(o=typeof r,"string"===o&&(i=lt.exec(r))&&(r=(i[1]+1)*i[2]+parseFloat(ie.css(e,t)),o="number"),null!=r&&r===r&&("number"!==o||ie.cssNumber[a]||(r+="px"),re.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),!(s&&"set"in s&&void 0===(r=s.set(e,r,n)))))try{u[t]=r}catch(l){}}},css:function(e,t,r,n){var i,o,s,a=ie.camelCase(t);return t=ie.cssProps[a]||(ie.cssProps[a]=A(e.style,a)),s=ie.cssHooks[t]||ie.cssHooks[a],s&&"get"in s&&(o=s.get(e,!0,r)),void 0===o&&(o=tt(e,t,n)),"normal"===o&&t in ct&&(o=ct[t]),""===r||r?(i=parseFloat(o),r===!0||ie.isNumeric(i)?i||0:o):o}}),ie.each(["height","width"],function(e,t){ie.cssHooks[t]={get:function(e,r,n){return r?at.test(ie.css(e,"display"))&&0===e.offsetWidth?ie.swap(e,ht,function(){return P(e,t,n)}):P(e,t,n):void 0},set:function(e,r,n){var i=n&&et(e);return O(e,r,n?R(e,t,n,re.boxSizing&&"border-box"===ie.css(e,"boxSizing",!1,i),i):0)}}}),re.opacity||(ie.cssHooks.opacity={get:function(e,t){return st.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var r=e.style,n=e.currentStyle,i=ie.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=n&&n.filter||r.filter||"";r.zoom=1,(t>=1||""===t)&&""===ie.trim(o.replace(ot,""))&&r.removeAttribute&&(r.removeAttribute("filter"),""===t||n&&!n.filter)||(r.filter=ot.test(o)?o.replace(ot,i):o+" "+i)}}),ie.cssHooks.marginRight=C(re.reliableMarginRight,function(e,t){return t?ie.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),ie.each({margin:"",padding:"",border:"Width"},function(e,t){ie.cssHooks[e+t]={expand:function(r){for(var n=0,i={},o="string"==typeof r?r.split(" "):[r];4>n;n++)i[e+Ae[n]+t]=o[n]||o[n-2]||o[0];return i}},rt.test(e)||(ie.cssHooks[e+t].set=O)}),ie.fn.extend({css:function(e,t){return Oe(this,function(e,t,r){var n,i,o={},s=0;if(ie.isArray(t)){for(n=et(e),i=t.length;i>s;s++)o[t[s]]=ie.css(e,t[s],!1,n);return o}return void 0!==r?ie.style(e,t,r):ie.css(e,t)},e,t,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Me(this)?ie(this).show():ie(this).hide()})}}),ie.Tween=D,D.prototype={constructor:D,init:function(e,t,r,n,i,o){this.elem=e,this.prop=r,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(ie.cssNumber[r]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,r=D.propHooks[this.prop];return this.options.duration?this.pos=t=ie.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ie.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ie.fx.step[e.prop]?ie.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ie.cssProps[e.prop]]||ie.cssHooks[e.prop])?ie.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ie.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ie.fx=D.prototype.init,ie.fx.step={};var pt,ft,gt=/^(?:toggle|show|hide)$/,vt=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),mt=/queueHooks$/,yt=[k],xt={"*":[function(e,t){var r=this.createTween(e,t),n=r.cur(),i=vt.exec(t),o=i&&i[3]||(ie.cssNumber[e]?"":"px"),s=(ie.cssNumber[e]||"px"!==o&&+n)&&vt.exec(ie.css(r.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+n||1;do a=a||".5",s/=a,ie.style(r.elem,e,s+o);while(a!==(a=r.cur()/n)&&1!==a&&--u)}return i&&(s=r.start=+s||+n||0,r.unit=o,r.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),r}]};ie.Animation=ie.extend(I,{tweener:function(e,t){ie.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,n=0,i=e.length;i>n;n++)r=e[n],xt[r]=xt[r]||[],xt[r].unshift(t)},prefilter:function(e,t){t?yt.unshift(e):yt.push(e)}}),ie.speed=function(e,t,r){var n=e&&"object"==typeof e?ie.extend({},e):{complete:r||!r&&t||ie.isFunction(e)&&e,duration:e,easing:r&&t||t&&!ie.isFunction(t)&&t};return n.duration=ie.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ie.fx.speeds?ie.fx.speeds[n.duration]:ie.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ie.isFunction(n.old)&&n.old.call(this),n.queue&&ie.dequeue(this,n.queue)},n},ie.fn.extend({fadeTo:function(e,t,r,n){return this.filter(Me).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=ie.isEmptyObject(e),o=ie.speed(t,r,n),s=function(){var t=I(this,ie.extend({},e),o);(i||ie._data(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ie.timers,s=ie._data(this);if(i)s[i]&&s[i].stop&&n(s[i]);else for(i in s)s[i]&&s[i].stop&&mt.test(i)&&n(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(r),t=!1,o.splice(i,1));(t||!r)&&ie.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=ie._data(this),n=r[e+"queue"],i=r[e+"queueHooks"],o=ie.timers,s=n?n.length:0;for(r.finish=!0,ie.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish})}}),ie.each(["toggle","show","hide"],function(e,t){var r=ie.fn[t];ie.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(B(t,!0),e,n,i)}}),ie.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ie.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}}),ie.timers=[],ie.fx.tick=function(){var e,t=ie.timers,r=0;for(pt=ie.now();r<t.length;r++)e=t[r],e()||t[r]!==e||t.splice(r--,1);t.length||ie.fx.stop(),pt=void 0},ie.fx.timer=function(e){ie.timers.push(e),e()?ie.fx.start():ie.timers.pop()},ie.fx.interval=13,ie.fx.start=function(){ft||(ft=setInterval(ie.fx.tick,ie.fx.interval))},ie.fx.stop=function(){clearInterval(ft),ft=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(e,t){return e=ie.fx?ie.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var n=setTimeout(t,e);r.stop=function(){clearTimeout(n)}})},function(){var e,t,r,n,i;t=fe.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=t.getElementsByTagName("a")[0],r=fe.createElement("select"),i=r.appendChild(fe.createElement("option")),e=t.getElementsByTagName("input")[0],n.style.cssText="top:1px",re.getSetAttribute="t"!==t.className,re.style=/top/.test(n.getAttribute("style")),re.hrefNormalized="/a"===n.getAttribute("href"),re.checkOn=!!e.value,re.optSelected=i.selected,re.enctype=!!fe.createElement("form").enctype,r.disabled=!0,re.optDisabled=!i.disabled,e=fe.createElement("input"),e.setAttribute("value",""),re.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),re.radioValue="t"===e.value}();var bt=/\r/g;ie.fn.extend({val:function(e){var t,r,n,i=this[0];{if(arguments.length)return n=ie.isFunction(e),this.each(function(r){var i;1===this.nodeType&&(i=n?e.call(this,r,ie(this).val()):e,null==i?i="":"number"==typeof i?i+="":ie.isArray(i)&&(i=ie.map(i,function(e){return null==e?"":e+""})),t=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=ie.valHooks[i.type]||ie.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:(r=i.value,"string"==typeof r?r.replace(bt,""):null==r?"":r)}}}),ie.extend({valHooks:{option:{get:function(e){var t=ie.find.attr(e,"value");return null!=t?t:ie.trim(ie.text(e))}},select:{get:function(e){for(var t,r,n=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:n.length,u=0>i?a:o?i:0;a>u;u++)if(r=n[u],(r.selected||u===i)&&(re.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!ie.nodeName(r.parentNode,"optgroup"))){if(t=ie(r).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var r,n,i=e.options,o=ie.makeArray(t),s=i.length;s--;)if(n=i[s],ie.inArray(ie.valHooks.option.get(n),o)>=0)try{n.selected=r=!0}catch(a){n.scrollHeight}else n.selected=!1;return r||(e.selectedIndex=-1),i}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(e,t){return ie.isArray(t)?e.checked=ie.inArray(ie(e).val(),t)>=0:void 0}},re.checkOn||(ie.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var _t,wt,Tt=ie.expr.attrHandle,Et=/^(?:checked|selected)$/i,St=re.getSetAttribute,Ct=re.input;ie.fn.extend({attr:function(e,t){return Oe(this,ie.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ie.removeAttr(this,e)})}}),ie.extend({attr:function(e,t,r){var n,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Te?ie.prop(e,t,r):(1===o&&ie.isXMLDoc(e)||(t=t.toLowerCase(),n=ie.attrHooks[t]||(ie.expr.match.bool.test(t)?wt:_t)),void 0===r?n&&"get"in n&&null!==(i=n.get(e,t))?i:(i=ie.find.attr(e,t),null==i?void 0:i):null!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:(e.setAttribute(t,r+""),r):void ie.removeAttr(e,t))},removeAttr:function(e,t){var r,n,i=0,o=t&&t.match(xe);if(o&&1===e.nodeType)for(;r=o[i++];)n=ie.propFix[r]||r,ie.expr.match.bool.test(r)?Ct&&St||!Et.test(r)?e[n]=!1:e[ie.camelCase("default-"+r)]=e[n]=!1:ie.attr(e,r,""),e.removeAttribute(St?r:n)},attrHooks:{type:{set:function(e,t){if(!re.radioValue&&"radio"===t&&ie.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),wt={set:function(e,t,r){return t===!1?ie.removeAttr(e,r):Ct&&St||!Et.test(r)?e.setAttribute(!St&&ie.propFix[r]||r,r):e[ie.camelCase("default-"+r)]=e[r]=!0,r}},ie.each(ie.expr.match.bool.source.match(/\w+/g),function(e,t){var r=Tt[t]||ie.find.attr;Tt[t]=Ct&&St||!Et.test(t)?function(e,t,n){var i,o;return n||(o=Tt[t],Tt[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,Tt[t]=o),i}:function(e,t,r){return r?void 0:e[ie.camelCase("default-"+t)]?t.toLowerCase():null}}),Ct&&St||(ie.attrHooks.value={set:function(e,t,r){return ie.nodeName(e,"input")?void(e.defaultValue=t):_t&&_t.set(e,t,r)}}),St||(_t={set:function(e,t,r){var n=e.getAttributeNode(r);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(r)),n.value=t+="","value"===r||t===e.getAttribute(r)?t:void 0}},Tt.id=Tt.name=Tt.coords=function(e,t,r){var n;return r?void 0:(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},ie.valHooks.button={get:function(e,t){var r=e.getAttributeNode(t);return r&&r.specified?r.value:void 0},set:_t.set},ie.attrHooks.contenteditable={set:function(e,t,r){_t.set(e,""===t?!1:t,r)}},ie.each(["width","height"],function(e,t){ie.attrHooks[t]={set:function(e,r){return""===r?(e.setAttribute(t,"auto"),r):void 0}}})),re.style||(ie.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var At=/^(?:input|select|textarea|button|object)$/i,Mt=/^(?:a|area)$/i;ie.fn.extend({prop:function(e,t){return Oe(this,ie.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ie.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),ie.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var n,i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!ie.isXMLDoc(e),o&&(t=ie.propFix[t]||t,i=ie.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=ie.find.attr(e,"tabindex");return t?parseInt(t,10):At.test(e.nodeName)||Mt.test(e.nodeName)&&e.href?0:-1}}}}),re.hrefNormalized||ie.each(["href","src"],function(e,t){ie.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),re.optSelected||(ie.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ie.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ie.propFix[this.toLowerCase()]=this}),re.enctype||(ie.propFix.enctype="encoding");var Ot=/[\t\r\n\f]/g;ie.fn.extend({addClass:function(e){var t,r,n,i,o,s,a=0,u=this.length,l="string"==typeof e&&e;if(ie.isFunction(e))return this.each(function(t){ie(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(xe)||[];u>a;a++)if(r=this[a],n=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(Ot," "):" ")){for(o=0;i=t[o++];)n.indexOf(" "+i+" ")<0&&(n+=i+" ");s=ie.trim(n),r.className!==s&&(r.className=s)}return this},removeClass:function(e){var t,r,n,i,o,s,a=0,u=this.length,l=0===arguments.length||"string"==typeof e&&e;if(ie.isFunction(e))return this.each(function(t){ie(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(xe)||[];u>a;a++)if(r=this[a],n=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(Ot," "):"")){for(o=0;i=t[o++];)for(;n.indexOf(" "+i+" ")>=0;)n=n.replace(" "+i+" "," ");s=e?ie.trim(n):"",r.className!==s&&(r.className=s)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):ie.isFunction(e)?this.each(function(r){ie(this).toggleClass(e.call(this,r,this.className,t),t)}):this.each(function(){if("string"===r)for(var t,n=0,i=ie(this),o=e.match(xe)||[];t=o[n++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(r===Te||"boolean"===r)&&(this.className&&ie._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ie._data(this,"__className__")||"")})},hasClass:function(e){
for(var t=" "+e+" ",r=0,n=this.length;n>r;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(Ot," ").indexOf(t)>=0)return!0;return!1}}),ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ie.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),ie.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}});var Rt=ie.now(),Pt=/\?/,Dt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ie.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var r,n=null,i=ie.trim(t+"");return i&&!ie.trim(i.replace(Dt,function(e,t,i,o){return r&&t&&(n=0),0===n?e:(r=i||t,n+=!o-!i,"")}))?Function("return "+i)():ie.error("Invalid JSON: "+t)},ie.parseXML=function(t){var r,n;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(n=new DOMParser,r=n.parseFromString(t,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(t))}catch(i){r=void 0}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+t),r};var Ft,Bt,Lt=/#.*$/,kt=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,It=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jt=/^(?:GET|HEAD)$/,Ut=/^\/\//,Ht=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Xt={},Wt={},Yt="*/".concat("*");try{Bt=location.href}catch(Gt){Bt=fe.createElement("a"),Bt.href="",Bt=Bt.href}Ft=Ht.exec(Bt.toLowerCase())||[],ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Bt,type:"GET",isLocal:It.test(Ft[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Yt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ie.parseJSON,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,ie.ajaxSettings),t):H(ie.ajaxSettings,e)},ajaxPrefilter:j(Xt),ajaxTransport:j(Wt),ajax:function(e,t){function r(e,t,r,n){var i,h,m,y,b,w=t;2!==x&&(x=2,a&&clearTimeout(a),l=void 0,s=n||"",_.readyState=e>0?4:0,i=e>=200&&300>e||304===e,r&&(y=X(c,_,r)),y=W(c,y,_,i),i?(c.ifModified&&(b=_.getResponseHeader("Last-Modified"),b&&(ie.lastModified[o]=b),b=_.getResponseHeader("etag"),b&&(ie.etag[o]=b)),204===e||"HEAD"===c.type?w="nocontent":304===e?w="notmodified":(w=y.state,h=y.data,m=y.error,i=!m)):(m=w,(e||!w)&&(w="error",0>e&&(e=0))),_.status=e,_.statusText=(t||w)+"",i?f.resolveWith(d,[h,w,_]):f.rejectWith(d,[_,w,m]),_.statusCode(v),v=void 0,u&&p.trigger(i?"ajaxSuccess":"ajaxError",[_,c,i?h:m]),g.fireWith(d,[_,w]),u&&(p.trigger("ajaxComplete",[_,c]),--ie.active||ie.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,o,s,a,u,l,h,c=ie.ajaxSetup({},t),d=c.context||c,p=c.context&&(d.nodeType||d.jquery)?ie(d):ie.event,f=ie.Deferred(),g=ie.Callbacks("once memory"),v=c.statusCode||{},m={},y={},x=0,b="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!h)for(h={};t=Nt.exec(s);)h[t[1].toLowerCase()]=t[2];t=h[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?s:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return x||(e=y[r]=y[r]||e,m[e]=t),this},overrideMimeType:function(e){return x||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)v[t]=[v[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||b;return l&&l.abort(t),r(0,t),this}};if(f.promise(_).complete=g.add,_.success=_.done,_.error=_.fail,c.url=((e||c.url||Bt)+"").replace(Lt,"").replace(Ut,Ft[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=ie.trim(c.dataType||"*").toLowerCase().match(xe)||[""],null==c.crossDomain&&(n=Ht.exec(c.url.toLowerCase()),c.crossDomain=!(!n||n[1]===Ft[1]&&n[2]===Ft[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Ft[3]||("http:"===Ft[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=ie.param(c.data,c.traditional)),U(Xt,c,t,_),2===x)return _;u=ie.event&&c.global,u&&0===ie.active++&&ie.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!jt.test(c.type),o=c.url,c.hasContent||(c.data&&(o=c.url+=(Pt.test(o)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=kt.test(o)?o.replace(kt,"$1_="+Rt++):o+(Pt.test(o)?"&":"?")+"_="+Rt++)),c.ifModified&&(ie.lastModified[o]&&_.setRequestHeader("If-Modified-Since",ie.lastModified[o]),ie.etag[o]&&_.setRequestHeader("If-None-Match",ie.etag[o])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&_.setRequestHeader("Content-Type",c.contentType),_.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Yt+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)_.setRequestHeader(i,c.headers[i]);if(c.beforeSend&&(c.beforeSend.call(d,_,c)===!1||2===x))return _.abort();b="abort";for(i in{success:1,error:1,complete:1})_[i](c[i]);if(l=U(Wt,c,t,_)){_.readyState=1,u&&p.trigger("ajaxSend",[_,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){_.abort("timeout")},c.timeout));try{x=1,l.send(m,r)}catch(w){if(!(2>x))throw w;r(-1,w)}}else r(-1,"No Transport");return _},getJSON:function(e,t,r){return ie.get(e,t,r,"json")},getScript:function(e,t){return ie.get(e,void 0,t,"script")}}),ie.each(["get","post"],function(e,t){ie[t]=function(e,r,n,i){return ie.isFunction(r)&&(i=i||n,n=r,r=void 0),ie.ajax({url:e,type:t,dataType:i,data:r,success:n})}}),ie._evalUrl=function(e){return ie.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ie.fn.extend({wrapAll:function(e){if(ie.isFunction(e))return this.each(function(t){ie(this).wrapAll(e.call(this,t))});if(this[0]){var t=ie(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ie.isFunction(e)?this.each(function(t){ie(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ie(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=ie.isFunction(e);return this.each(function(r){ie(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){ie.nodeName(this,"body")||ie(this).replaceWith(this.childNodes)}).end()}}),ie.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!re.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ie.css(e,"display"))},ie.expr.filters.visible=function(e){return!ie.expr.filters.hidden(e)};var zt=/%20/g,qt=/\[\]$/,Vt=/\r?\n/g,$t=/^(?:submit|button|image|reset|file)$/i,Kt=/^(?:input|select|textarea|keygen)/i;ie.param=function(e,t){var r,n=[],i=function(e,t){t=ie.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ie.ajaxSettings&&ie.ajaxSettings.traditional),ie.isArray(e)||e.jquery&&!ie.isPlainObject(e))ie.each(e,function(){i(this.name,this.value)});else for(r in e)Y(r,e[r],t,i);return n.join("&").replace(zt,"+")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ie.prop(this,"elements");return e?ie.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ie(this).is(":disabled")&&Kt.test(this.nodeName)&&!$t.test(e)&&(this.checked||!Re.test(e))}).map(function(e,t){var r=ie(this).val();return null==r?null:ie.isArray(r)?ie.map(r,function(e){return{name:t.name,value:e.replace(Vt,"\r\n")}}):{name:t.name,value:r.replace(Vt,"\r\n")}}).get()}}),ie.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&G()||z()}:G;var Jt=0,Qt={},Zt=ie.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Qt)Qt[e](void 0,!0)}),re.cors=!!Zt&&"withCredentials"in Zt,Zt=re.ajax=!!Zt,Zt&&ie.ajaxTransport(function(e){if(!e.crossDomain||re.cors){var t;return{send:function(r,n){var i,o=e.xhr(),s=++Jt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(i in r)void 0!==r[i]&&o.setRequestHeader(i,r[i]+"");o.send(e.hasContent&&e.data||null),t=function(r,i){var a,u,l;if(t&&(i||4===o.readyState))if(delete Qt[s],t=void 0,o.onreadystatechange=ie.noop,i)4!==o.readyState&&o.abort();else{l={},a=o.status,"string"==typeof o.responseText&&(l.text=o.responseText);try{u=o.statusText}catch(h){u=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=l.text?200:404}l&&n(a,u,l,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Qt[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ie.globalEval(e),e}}}),ie.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ie.ajaxTransport("script",function(e){if(e.crossDomain){var t,r=fe.head||ie("head")[0]||fe.documentElement;return{send:function(n,i){t=fe.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,r){(r||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,r||i(200,"success"))},r.insertBefore(t,r.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var er=[],tr=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=er.pop()||ie.expando+"_"+Rt++;return this[e]=!0,e}}),ie.ajaxPrefilter("json jsonp",function(t,r,n){var i,o,s,a=t.jsonp!==!1&&(tr.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tr.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=ie.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(tr,"$1"+i):t.jsonp!==!1&&(t.url+=(Pt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||ie.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},n.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=r.jsonpCallback,er.push(i)),s&&ie.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),ie.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||fe;var n=ce.exec(e),i=!r&&[];return n?[t.createElement(n[1])]:(n=ie.buildFragment([e],t,i),i&&i.length&&ie(i).remove(),ie.merge([],n.childNodes))};var rr=ie.fn.load;ie.fn.load=function(e,t,r){if("string"!=typeof e&&rr)return rr.apply(this,arguments);var n,i,o,s=this,a=e.indexOf(" ");return a>=0&&(n=ie.trim(e.slice(a,e.length)),e=e.slice(0,a)),ie.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&ie.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,s.html(n?ie("<div>").append(ie.parseHTML(e)).find(n):e)}).complete(r&&function(e,t){s.each(r,i||[e.responseText,t,e])}),this},ie.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ie.fn[t]=function(e){return this.on(t,e)}}),ie.expr.filters.animated=function(e){return ie.grep(ie.timers,function(t){return e===t.elem}).length};var nr=e.document.documentElement;ie.offset={setOffset:function(e,t,r){var n,i,o,s,a,u,l,h=ie.css(e,"position"),c=ie(e),d={};"static"===h&&(e.style.position="relative"),a=c.offset(),o=ie.css(e,"top"),u=ie.css(e,"left"),l=("absolute"===h||"fixed"===h)&&ie.inArray("auto",[o,u])>-1,l?(n=c.position(),s=n.top,i=n.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),ie.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+i),"using"in t?t.using.call(e,d):c.css(d)}},ie.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ie.offset.setOffset(this,e,t)});var t,r,n={top:0,left:0},i=this[0],o=i&&i.ownerDocument;if(o)return t=o.documentElement,ie.contains(t,i)?(typeof i.getBoundingClientRect!==Te&&(n=i.getBoundingClientRect()),r=q(o),{top:n.top+(r.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(r.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n},position:function(){if(this[0]){var e,t,r={top:0,left:0},n=this[0];return"fixed"===ie.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ie.nodeName(e[0],"html")||(r=e.offset()),r.top+=ie.css(e[0],"borderTopWidth",!0),r.left+=ie.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-ie.css(n,"marginTop",!0),left:t.left-r.left-ie.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||nr;e&&!ie.nodeName(e,"html")&&"static"===ie.css(e,"position");)e=e.offsetParent;return e||nr})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r=/Y/.test(t);ie.fn[e]=function(n){return Oe(this,function(e,n,i){var o=q(e);return void 0===i?o?t in o?o[t]:o.document.documentElement[n]:e[n]:void(o?o.scrollTo(r?ie(o).scrollLeft():i,r?i:ie(o).scrollTop()):e[n]=i)},e,n,arguments.length,null)}}),ie.each(["top","left"],function(e,t){ie.cssHooks[t]=C(re.pixelPosition,function(e,r){return r?(r=tt(e,t),nt.test(r)?ie(e).position()[t]+"px":r):void 0})}),ie.each({Height:"height",Width:"width"},function(e,t){ie.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,n){ie.fn[n]=function(n,i){var o=arguments.length&&(r||"boolean"!=typeof n),s=r||(n===!0||i===!0?"margin":"border");return Oe(this,function(t,r,n){var i;return ie.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===n?ie.css(t,r,s):ie.style(t,r,n,s)},t,o?n:void 0,o,null)}})}),ie.fn.size=function(){return this.length},ie.fn.andSelf=ie.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ie});var ir=e.jQuery,or=e.$;return ie.noConflict=function(t){return e.$===ie&&(e.$=or),t&&e.jQuery===ie&&(e.jQuery=ir),ie},typeof t===Te&&(e.jQuery=e.$=ie),ie}),function(e,t,r){e.utils._saidHello=!0;var n={game:{canvas:{width:640,height:480},started:!1,follow:null,stage:null,$subtitle:t("#body-language-subtitle"),$credits:t("#credits"),boundary:[{x:952,y:140,width:65,height:30},{x:928,y:166,width:78,height:30},{x:882,y:190,width:96,height:100},{x:842,y:285,width:70,height:77},{x:780,y:360,width:110,height:77},{x:733,y:432,width:100,height:77},{x:683,y:500,width:100,height:77},{x:633,y:570,width:120,height:77},{x:663,y:640,width:120,height:90},{x:1106,y:140,width:350,height:122},{x:1006,y:260,width:550,height:160},{x:906,y:415,width:750,height:160},{x:876,y:570,width:800,height:300},{x:708,y:730,width:950,height:100},{x:790,y:825,width:840,height:100},{x:790,y:920,width:880,height:250},{x:725,y:1160,width:1e3,height:300},{x:900,y:1450,width:740,height:150},{x:1e3,y:1590,width:480,height:150},{x:955,y:1735,width:570,height:100},{x:925,y:1830,width:630,height:100},{x:935,y:1925,width:570,height:250},{x:990,y:2170,width:200,height:200},{x:1030,y:2365,width:130,height:260},{x:1015,y:2610,width:160,height:250},{x:1055,y:2855,width:120,height:150},{x:1085,y:3e3,width:80,height:140},{x:1095,y:3135,width:60,height:130},{x:1105,y:3260,width:60,height:80},{x:1105,y:3335,width:80,height:80},{x:1230,y:2170,width:180,height:200},{x:1240,y:2365,width:160,height:70},{x:1255,y:2430,width:160,height:70},{x:1285,y:2495,width:180,height:90},{x:1320,y:2570,width:160,height:100},{x:1380,y:2665,width:80,height:290},{x:1390,y:2950,width:80,height:130},{x:1380,y:3075,width:80,height:100},{x:1350,y:3170,width:100,height:50}],sprites:{},Blobby:{velocity:6},traps:{all:[]},pieces:{current:null,highlight:null,seen:{},all:{}}},menu:{},piece:{current:{name:"",$element:null}}},i=new Bump(e),o=new Charm(e),s=new SpriteUtilities(e),a=new GameUtilities(e),u=function(e,r){var n=[];if(e.isJson)t.each(e.textures,function(e,t){n.push(t)});else{var o=t.ajax({type:"GET",url:r.json,dataType:"json",async:!1}).responseJSON;t.each(o.frames,function(t,r){n.push(s.frame(e.url,r.frame.x,r.frame.y,r.frame.w,r.frame.h))})}var a=s.sprite(n);return a.fps=24,i.addCollisionProperties(a),a},l="*",h=function(e,r,n,i){n||(n=l),i||(i=t(".page-video_embed"));var o={method:e};r&&(o.value=r);var s=JSON.stringify(o);i.each(function(){this.contentWindow.postMessage(s,n)})},c=function(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&t++;return t},d=!1,p=t(document),f=t(window),g=t("html"),v=document.getElementById("body-language-game"),m=t(v),y=t("#game-slide"),x=t("#bg-music"),b=t(".game-menu"),_=t("#body-language-game--intro"),w=t("#body-language-game--menu");x[0].volume=.5;var T={};T.media="/media/1510-body_language",T.clips=T.media+"/pieces/video",T.sound=T.media+"/pieces/audio",T.sprites=T.media+"/sprites",n.menu.intro={start:function(){b.hide().removeClass("in in_title").each(function(){return _.show(),setTimeout(function(){_.addClass("in")},100),!1}),setTimeout(function(){n.menu.intro.end()},2e3)},end:function(){_.addClass("out"),setTimeout(function(){_.hide().removeClass("out"),n.menu.title.start()},1e3)}},n.menu.title={start:function(){b.hide().removeClass("out in in_title").each(function(){return w.show(),setTimeout(function(){w.addClass("in_title")},100),!1}),setTimeout(function(){n.menu.title.end()},2e3)},end:function(){w.addClass("out_title"),setTimeout(function(){w.hide().removeClass("out_title"),n.menu.buttons.start()},1e3)}},n.menu.buttons={start:function(){b.hide().removeClass("out in").each(function(){return w.show(),setTimeout(function(){w.addClass("in")},100),!1})},end:function(){w.addClass("out"),setTimeout(function(){w.hide().removeClass("out")},1e3)}},n.game.init=function(){n.game.renderer=new e.autoDetectRenderer(n.game.canvas.width,n.game.canvas.height,{transparent:!0}),v.appendChild(n.game.renderer.view);var i={videos:{},sprites:[]},u=0,l=0;n.game.stage=new e.Container,n.game.loader=e.loader,n.game.controls=new Tink(e,n.game.renderer.view),i.videos.bg=[{url:T.clips+"/BG-1.mp4",position:{x:0,y:-3049},index:1},{url:T.clips+"/BG-2.mp4",position:{x:0,y:-2172},index:1},{url:T.clips+"/BG-3.mp4",position:{x:0,y:-1295},index:1},{url:T.clips+"/BG-4.mp4",position:{x:0,y:-418},index:1},{url:T.clips+"/BG-5.mp4",position:{x:1239,y:-3049},index:1},{url:T.clips+"/BG-6.mp4",position:{x:1239,y:-2172},index:1},{url:T.clips+"/BG-7.mp4",position:{x:1239,y:-1295},index:1},{url:T.clips+"/BG-8.mp4",position:{x:1239,y:-418},index:1}],u+=i.videos.bg.length;var h=!1,c=!1,p=!1,f=function(){t.each(i.videos.bg,function(e,t){t.video.currentTime=0,t.video.play()})},g=function(){n.game.stage.children.sort(function(e,t){return e.layer=e.layer||0,t.layer=t.layer||0,t.layer-e.layer})},x=function(){n.game.pieces.current||(o.update(),n.game.started&&(n.game.controls.update(),n.game.Blobby.update(),n.game.traps.check(),n.game.follow&&n.game.hasOwnProperty("camera")&&n.game.camera.follow(n.game.follow)),d&&h&&!p&&(n.menu.intro.start(),p=!0,y.addClass("game_loaded"),setTimeout(function(){t(".game-loader").hide()},1e3)),u>l||d||(g(),d=!0,t.each(i.videos.bg,function(e,r){r.video.currentTime=0,r.video.loop=!0,r.video.preload="auto",r.video.play();var n=t(r.video);n.one("canplay canplaythrough play",f)}),c||(c=!0,h=!0)))},b=new Smoothie({engine:e,renderer:n.game.renderer,root:n.game.stage,fps:12,update:x.bind(this)});t.each(i.videos.bg,function(e,t){n.game.loader.add("bg-"+e,t.url)}),i.sprites={Blobby:{url:T.sprites+"/Sprites_Blobby.png",json:T.sprites+"/Sprites_Blobby.json"}},i.traps={Butterflies:{url:T.sprites+"/Sprites_Butterflies.png",json:T.sprites+"/Sprites_Butterflies.json",trigger:{x:1140,y:1868,width:425,height:60,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/butterfly-short.mp3"],autoplay:!1,loop:!1})},Avalanche:{url:T.sprites+"/Sprites_Avalanche.png",json:T.sprites+"/Sprites_Avalanche.json",trigger:{x:1082,y:1234,width:425,height:425,anchor:{x:.5,y:.5}}},Heartbeat:{trigger:{x:1082,y:1234,width:425,height:425,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Heartbeat_Mastered.mp3"],autoplay:!1,loop:!0})},Finger_Left_Pinkie:{trigger:{x:985,y:1575,width:5,height:5,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Finger_1_-_A1.mp3"],autoplay:!1,loop:!1})},Finger_Left_Ring:{trigger:{x:985,y:1555,width:5,height:5,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Finger_2_-_C_1.mp3"],autoplay:!1,loop:!1})},Finger_Left_Middle:{trigger:{x:985,y:1535,width:5,height:5,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Finger_3_-_E.mp3"],autoplay:!1,loop:!1})},Finger_Left_Index:{trigger:{x:990,y:1515,width:8,height:5,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Finger_4_-_G_.mp3"],autoplay:!1,loop:!1})},Finger_Left_Thumb:{trigger:{x:1045,y:1515,width:10,height:5,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Finger_5_-_A2.mp3"],autoplay:!1,loop:!1})},Finger_Right_Pinkie:{trigger:{x:896,y:140,width:5,height:5,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Finger_1_-_A1.mp3"],autoplay:!1,loop:!1})},Finger_Right_Ring:{trigger:{x:916,y:140,width:5,height:5,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Finger_2_-_C_1.mp3"],autoplay:!1,loop:!1})},Finger_Right_Middle:{trigger:{x:936,y:140,width:5,height:5,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Finger_3_-_E.mp3"],autoplay:!1,loop:!1})},Finger_Right_Index:{trigger:{x:956,y:140,width:5,height:5,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Finger_4_-_G_.mp3"],autoplay:!1,loop:!1})},Finger_Right_Thumb:{trigger:{x:958,y:188,width:5,height:5,anchor:{x:.5,y:.5}},sound:new r({src:[T.sound+"/Musical_Traps_Finger_5_-_A2.mp3"],autoplay:!1,loop:!1})}},i.pieces={Lips:{subtitle:"Press space bar for Lips",transition:{url:T.sprites+"/Sprites_Lips.png",json:T.sprites+"/Sprites_Lips.json"},trigger:{x:1300,y:742,width:300,height:150,anchor:{x:.5,y:.5}},element:t("#page-video_lips"),sound:new r({src:[T.sound+"/Transition-Lips_Squeak-on-Glass.ogg",T.sound+"/Transition-Lips_Squeak-on-Glass.mp3"],autoplay:!1,loop:!1})},Ears:{subtitle:"Press space bar for Ears",transition:{url:T.sprites+"/Sprite_Ear.png",json:T.sprites+"/Sprite_Ear.json"},trigger:[{x:1028,y:556,width:150,height:150,anchor:{x:.5,y:.5}},{x:1628,y:556,width:150,height:150,anchor:{x:.5,y:.5}}],element:t("#page-comic_ears"),sound:new r({src:[T.sound+"/Transition-Ears_Kettle-Boiling-Sequence-Low.ogg",T.sound+"/Transition-Ears_Kettle-Boiling-Sequence-Low.mp3"],autoplay:!1,loop:!1})},Brain:{subtitle:"Press space bar for Brain",transition:{url:T.sprites+"/Sprites_Brainstorm.png",json:T.sprites+"/Sprites_Brainstorm.json"},trigger:{x:1148,y:600,width:800,height:200,anchor:{x:.5,y:.5}},element:t("#page-video_brain")},Legs:{subtitle:"Press space bar for Legs",transition:{url:T.sprites+"/Sprites_Legs.png",json:T.sprites+"/Sprites_Legs.json"},trigger:{x:1340,y:2800,width:1200,height:1200,anchor:{x:.5,y:.5}},element:t("#page-video_legs"),sound:new r({src:[T.sound+"/Transition-Legs_Leaves-Rustling.ogg",T.sound+"/Transition-Legs_Leaves-Rustling.mp3"],autoplay:!1,loop:!1})}},t.each(i.sprites,function(e,t){return t.hasOwnProperty("url")?void n.game.loader.add(e,t.json):!0}),t.each(i.traps,function(e,t){return t.hasOwnProperty("url")?void n.game.loader.add(e,t.json):!0}),t.each(i.pieces,function(e,t){return t.hasOwnProperty("transition")&&t.transition.hasOwnProperty("url")?void n.game.loader.add(e,t.transition.json):!0}),n.game.loader.load(function(r,o){m.removeClass("loading"),m.trigger("game:loaded");var u=-1,h=0,c={columns:2,rows:4,width:1240,height:876,make:function(){return u++,i.videos.bg[u].sprite},end:function(){h++,h>=c.columns*c.rows&&(u=-1)}};for(var d in o)o.hasOwnProperty(d)&&(l++,d.startsWith("bg-")&&t.each(i.videos.bg,function(t,r){if(r.url!=o[d].url)return!0;var n=e.Texture.fromVideo(r.url);i.videos.bg[t].sprite=new e.Sprite(n),i.videos.bg[t].sprite.layer=r.index,i.videos.bg[t].video=n.baseTexture.source,i.videos.bg[t].sprite.halfWidth=Math.floor(c.width/2),i.videos.bg[t].sprite.halfHeight=Math.floor(c.height/2)}));t.each(i.sprites,function(e,t){return o.hasOwnProperty(e)&&n.game.hasOwnProperty(e)&&n.game[e].hasOwnProperty("init")?void n.game[e].init(o[e],t):!0}),t.each(i.traps,function(e,t){o.hasOwnProperty(e)&&n.game.traps.hasOwnProperty(e)&&n.game.traps[e].hasOwnProperty("init")?(n.game.traps[e].init(o[e],t),n.game.traps.all.push(n.game.traps[e])):n.game.traps.hasOwnProperty(e)&&n.game.traps[e].hasOwnProperty("init")?(n.game.traps[e].init(null,t),n.game.traps.all.push(n.game.traps[e])):t.hasOwnProperty("trigger")&&t.hasOwnProperty("sound")&&n.game.traps.all.push({settings:{trigger:t.trigger},sound:t.sound,play:function(){t.sound.play()},stop:function(){t.sound.stop()},playing:function(){return t.sound.playing()}})}),t.each(i.pieces,function(e,t){var r=t.name||e;return o.hasOwnProperty(e)&&n.game.pieces.hasOwnProperty(r)&&n.game.pieces[r].hasOwnProperty("init")?void(n.game.pieces.all.hasOwnProperty(r)||(n.game.pieces[r].init(o[e],t),n.game.pieces[r].name=r,n.game.pieces.all[r]=n.game.pieces[r])):!0}),n.game.bg=s.grid(c.columns,c.rows,c.width,c.height,!0,0,0,c.make,c.end),n.game.map=new e.Sprite,n.game.map.addChild(n.game.bg),n.game.map.layer=1,n.game.map.grid=c,n.game.stage.addChild(n.game.map),n.game.camera=a.worldCamera(n.game.map,c.columns*c.width,c.rows*c.height,n.game.renderer.view)}),b.start()},n.game.credits=function(){n.slides.updateSlide("nav",n.game.$credits),n.slides.updateSubSlide(n.game.$credits,"nav",n.game.$credits.children(".sub-slides").first())},n.game.restart=function(){n.slides.updateSlide("nav",y),n.game.pieces.seen={},n.game.started&&n.game.pan(0,0,function(e,t){n.menu.buttons.start()})},n.game.pan=function(e,t,r,i){"center"===e&&(e=-(n.game.map.grid.columns/2*n.game.map.grid.width-n.game.map.grid.width/4)),"center"===t&&(t=-(n.game.map.grid.rows/2*n.game.map.grid.height-n.game.map.grid.height/2)),i||(i=4);var s=o.slide(n.game.map,e,t,48,"smoothstep");r&&(s.onComplete=function(){r(e,t)})};var E="";n.game.subtitle=function(e){e&&E!=e?n.game.$subtitle.addClass("game-subtitle_active").text(e):E!=e&&n.game.$subtitle.removeClass("game-subtitle_active"),E=e},n.game.init(),n.game.start=function(){n.menu.buttons.end(),n.game.pieces.seen={},n.game.pan("center","center",function(e,t){n.game.Blobby.start(e,t),n.game.traps.init(),n.game.started=!0})},n.game.Blobby.start=function(e,t){return this.playing?!1:(this.playing=!0,m.addClass("blobby-is-active"),n.game.Blobby.sprite.layer=10,n.game.map.addChild(n.game.Blobby.sprite),n.game.Blobby.sprite.x=n.game.map.grid.columns/2*n.game.map.grid.width,n.game.Blobby.sprite.y=n.game.map.grid.rows/2*n.game.map.grid.height-n.game.Blobby.sprite.height,this.trigger.x=this.sprite.x-this.sprite.width*(1/8),this.trigger.y=this.sprite.y-this.sprite.height*(1/8),n.game.Blobby.walk(),n.game.follow=n.game.Blobby.sprite,void(n.game.Blobby.hasOwnProperty("keys")||(n.game.Blobby.keys={up:n.game.controls.keyboard(38),down:n.game.controls.keyboard(40),left:n.game.controls.keyboard(37),right:n.game.controls.keyboard(39)})))},n.game.Blobby.update=function(){if(n.game.Blobby.hasOwnProperty("keys")){var e=!1,t=!1;if(n.game.Blobby.keys.left.isDown?e=this.sprite.x-this.velocity:n.game.Blobby.keys.right.isDown&&(e=this.sprite.x+this.velocity),n.game.Blobby.keys.up.isDown?t=this.sprite.y-this.velocity:n.game.Blobby.keys.down.isDown&&(t=this.sprite.y+this.velocity),e!==!1||t!==!1){var r={x:this.sprite.x,y:this.sprite.y,triggerX:this.trigger.x,triggerY:this.trigger.y};return e!==!1&&(this.sprite.x=e,this.trigger.x=this.sprite.x-this.sprite.width*(1/8)),t!==!1&&(this.sprite.y=t,this.trigger.y=this.sprite.y-this.sprite.height*(1/8)),this.insideOfBoundary()?void(n.game.pieces.highlight?(n.game.pieces.highlight.settings.subtitle&&n.game.subtitle(n.game.pieces.highlight.settings.subtitle),"pulsing"!=this.currently&&this.pulse()):n.game.pieces.highlight||(n.game.subtitle(""),"walking"!=this.currently&&this.walk())):(this.sprite.x=r.x,this.sprite.y=r.y,this.trigger.x=r.triggerX,void(this.trigger.y=r.triggerY))}}},n.game.Blobby.insideOfBoundary=function(){var e=0,r=this.trigger;return t.each(n.game.boundary,function(t,n){return e>3?!0:void(i.hitTestRectangle(r,n)&&e++)}),e>0},n.game.Blobby.init=function(e,t){this.sprite=u(e,t),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5,this.trigger=this.trigger||{},this.trigger.width=this.sprite.width/4,this.trigger.height=this.sprite.height/4,this.trigger.anchor=this.sprite.anchor},n.game.Blobby.currently="",n.game.Blobby.walk=function(){n.game.Blobby.sprite.playAnimation([1,28]),n.game.Blobby.currently="walking"},n.game.Blobby.pulse=function(){n.game.Blobby.sprite.playAnimation([28,57]),n.game.Blobby.currently="pulsing"};n.game.traps.check=function(){t.each(n.game.traps.all,function(e,t){return t.settings.hasOwnProperty("trigger")?void(t.playing()&&!t.hasOwnProperty("adjust")||!i.hitTestRectangle(n.game.Blobby.trigger,t.settings.trigger)?(!t.playing()||t.hasOwnProperty("adjust"))&&t.stop():t.playing()?t.adjust():t.play()):!0});var e=null;t.each(n.game.pieces.all,function(r,o){if(!o.settings.hasOwnProperty("trigger"))return!0;var s=t.isArray(o.settings.trigger)?o.settings.trigger:[o.settings.trigger];return o.playing()||-1===t.inArray(!0,t.map(s,function(e){return i.hitTestRectangle(n.game.Blobby.trigger,e)}))?void 0:(e=o,!1)}),n.game.pieces.highlight=e},n.game.traps.init=function(){t.each(n.game.traps.all,function(e,t){return t.hasOwnProperty("sprite")?(n.game.map.addChild(t.sprite),t.sprite.position.x=t.sprite.mapX,void(t.sprite.position.y=t.sprite.mapY)):!0}),t.each(n.game.pieces.all,function(e,t){return t.hasOwnProperty("transition")?(n.game.map.addChild(t.transition),t.transition.position.x=t.transition.mapX,void(t.transition.position.y=t.transition.mapY)):!0})},n.game.traps.Butterflies=n.game.traps.Butterflies||{},n.game.traps.Butterflies.init=function(e,t){n.game.traps.Butterflies.sprite=u(e,t),n.game.traps.Butterflies.sound=t.sound,n.game.traps.Butterflies.settings=t,n.game.traps.Butterflies.sprite.loop=!1,n.game.traps.Butterflies.sprite.fps=10,n.game.traps.Butterflies.sprite.mapX=1240,n.game.traps.Butterflies.sprite.anchor.x=.5,n.game.traps.Butterflies.sprite.mapY=1668,n.game.traps.Butterflies.sprite.anchor.y=.5,n.game.traps.Butterflies.sprite.visible=!1,n.game.traps.Butterflies.sprite.stopAnimation()},n.game.traps.Butterflies.play=function(){n.game.traps.Butterflies.sprite.visible=!0,n.game.traps.Butterflies.sprite.playAnimation([2,71]),n.game.traps.Butterflies.sound.play();var e=setInterval(function(){71==n.game.traps.Butterflies.sprite.currentFrame&&(n.game.traps.Butterflies.stop(),clearInterval(e))},50)},n.game.traps.Butterflies.stop=function(){n.game.traps.Butterflies.sprite.stopAnimation(),n.game.traps.Butterflies.sprite.visible=!1,n.game.traps.Butterflies.sound.stop()},n.game.traps.Butterflies.playing=function(){return n.game.traps.Butterflies.sprite.animating},n.game.traps.Avalanche=n.game.traps.Avalanche||{},n.game.traps.Avalanche.init=function(e,t){this.sprite=u(e,t),this.settings=t,this.sprite.loop=!1,this.sprite.fps=16,this.sprite.mapX=1240,this.sprite.anchor.x=.5,
this.sprite.mapY=1350,this.sprite.anchor.y=.5,this.sprite.visible=!1,this.sprite.stopAnimation()},n.game.traps.Avalanche.play=function(){var e=this;e.sprite.visible=!0,e.sprite.playAnimation([2,71]);var t=setInterval(function(){71==e.sprite.currentFrame&&(e.stop(),clearInterval(t))},50)},n.game.traps.Avalanche.stop=function(){this.sprite.stopAnimation(),this.sprite.visible=!1},n.game.traps.Avalanche.playing=function(){return this.sprite.animating},n.game.traps.Heartbeat=n.game.traps.Heartbeat||{},n.game.traps.Heartbeat.init=function(e,t){this.settings=t},n.game.traps.Heartbeat.play=function(){this.settings.sound.play()},n.game.traps.Heartbeat.stop=function(){this.settings.sound.stop()},n.game.traps.Heartbeat.playing=function(){return this.settings.sound.playing()},n.game.traps.Heartbeat.adjust=function(){var e,t=n.game.Blobby.trigger.x+n.game.Blobby.trigger.halfWidth,r=n.game.Blobby.trigger.y+n.game.Blobby.trigger.halfHeight,i=this.settings.trigger.x+this.settings.trigger.halfWidth,o=this.settings.trigger.y+this.settings.trigger.halfHeight,s=i-t,a=o-r;0>s&&(s*=-1),0>a&&(a*=-1),e=a>s?s:a,this.settings.sound.volume(1-e/this.settings.trigger.width)},n.game.traps.Avalanche=n.game.traps.Avalanche||{},n.game.traps.Avalanche.init=function(e,t){this.sprite=u(e,t),this.settings=t,this.sprite.loop=!1,this.sprite.fps=16,this.sprite.mapX=1240,this.sprite.anchor.x=.5,this.sprite.mapY=1350,this.sprite.anchor.y=.5,this.sprite.visible=!1,this.sprite.stopAnimation()},n.game.pieces.start=function(e){if(e.settings.element){var t=this;x.length&&x[0].pause(),m.addClass("out"),t.highlight=null,t.current=e,e.settings.element.hasClass("page-video_embed")?(g.addClass("page-video_playing"),e.settings.element.addClass("page-video_playing").off("video:finished").on("video:finished",function(){t.end(e)}),h("play","","",e.settings.element)):e.settings.element.hasClass("page-video_local")?(g.addClass("page-video_playing"),e.settings.element.on("ended",function(){t.end(e)}),e.settings.element[0].play()):e.settings.element.hasClass("page-comic")&&(n.slides.updateSlide("nav",e.settings.element),n.slides.updateSubSlide(e.settings.element,"nav",e.settings.element.children(".sub-slides").first()))}},n.game.pieces.end=function(e){var t=this;if(t.current=null,e.settings.element){if(e.settings.link)return void(window.location.href=e.settings.link);n.game.pieces.seen.hasOwnProperty(e.name)||(n.game.pieces.seen[e.name]=e),c(n.game.pieces.seen)==c(n.game.pieces.all)&&n.game.credits(),m.removeClass("out").focus(),g.removeClass("page-video_playing page-comic_active"),e.settings.element.removeClass("page-video_playing page-comic_active"),x.length&&x[0].play(),e.settings.element.hasClass("page-video_embed")?h("unload","","",e.settings.element):e.settings.element.hasClass("page-video_local")?(e.settings.element[0].currentTime=0,e.settings.element[0].pause()):(e.settings.element.hasClass("page-comic")||n.game.$credits.hasClass("visible"))&&n.slides.updateSlide("nav",y)}},n.game.pieces.Lips=n.game.pieces.Lips||{},n.game.pieces.Lips.init=function(e,t){this.transition=u(e,t.transition),this.settings=t,this.transition.loop=!1,this.transition.fps=16,this.transition.mapX=1065-this.transition.halfWidth,this.transition.mapY=386-this.transition.halfHeight,this.transition.anchor.x=this.transition.anchor.y=0,this.transition.scale.x=this.transition.scale.y=1.5,this.transition.visible=!1,this.transition.stopAnimation()},n.game.pieces.Lips.play=function(){var e=this;e.transition.visible=!0,e.transition.playAnimation([2,71]),e.settings.sound.play(),n.game.lastFollow=n.game.follow,n.game.follow=null,n.game.camera.centerOver(e.transition);var t=setInterval(function(){71==e.transition.currentFrame&&(n.game.follow=n.game.lastFollow,clearInterval(t),e.stop(),n.game.pieces.start(e))},50)},n.game.pieces.Lips.stop=function(){this.transition.stopAnimation(),this.transition.visible=!1,this.settings.sound.stop()},n.game.pieces.Lips.playing=function(){return this.transition.animating},n.game.pieces.Ears=n.game.pieces.Ears||{},n.game.pieces.Ears.init=function(e,t){this.transition=u(e,t.transition),this.settings=t,this.transition.loop=!1,this.transition.fps=12,this.transition.mapX=788-this.transition.halfWidth,this.transition.anchor.x=0,this.transition.mapY=540-this.transition.halfHeight,this.transition.anchor.y=0,this.transition.visible=!1,this.transition.stopAnimation()},n.game.pieces.Ears.play=function(){var e=this;e.transition.visible=!0,e.transition.playAnimation([2,29]),e.settings.sound.play(),n.game.lastFollow=n.game.follow,n.game.follow=null,n.game.camera.centerOver(e.transition);var t=setInterval(function(){29==e.transition.currentFrame&&(n.game.follow=n.game.lastFollow,clearInterval(t),e.stop(),n.game.pieces.start(e))},50)},n.game.pieces.Ears.stop=function(){this.transition.stopAnimation(),this.transition.visible=!1,this.settings.sound.stop()},n.game.pieces.Ears.playing=function(){return this.transition.animating},n.game.pieces.Brain=n.game.pieces.Brain||{},n.game.pieces.Brain.init=function(e,t){this.transition=u(e,t.transition),this.settings=t,this.transition.loop=!1,this.transition.fps=12,this.transition.mapX=1300-this.transition.halfWidth,this.transition.anchor.x=0,this.transition.mapY=406-this.transition.halfHeight,this.transition.anchor.y=0,this.transition.visible=!1,this.transition.stopAnimation()},n.game.pieces.Brain.play=function(){var e=this;e.transition.visible=!0,e.transition.playAnimation([2,39]),n.game.lastFollow=n.game.follow,n.game.follow=null,n.game.camera.centerOver(e.transition);var t=setInterval(function(){39==e.transition.currentFrame&&(n.game.follow=n.game.lastFollow,clearInterval(t),e.stop(),n.game.pieces.start(e))},50)},n.game.pieces.Brain.stop=function(){this.transition.stopAnimation(),this.transition.visible=!1},n.game.pieces.Brain.playing=function(){return this.transition.animating},n.game.pieces.Legs=n.game.pieces.Legs||{},n.game.pieces.Legs.init=function(e,t){this.transition=u(e,t.transition),this.settings=t,this.transition.loop=!1,this.transition.fps=12,this.transition.mapX=810-this.transition.halfWidth,this.transition.mapY=2245-this.transition.halfHeight,this.transition.anchor.x=this.transition.anchor.y=0,this.transition.scale.x=this.transition.scale.y=2.4,this.transition.visible=!1,this.transition.stopAnimation()},n.game.pieces.Legs.play=function(){var e=this;e.transition.visible=!0,e.transition.playAnimation([2,44]),e.settings.sound.play();var t=setInterval(function(){44==e.transition.currentFrame&&(clearInterval(t),e.stop(),n.game.pieces.start(e))},50)},n.game.pieces.Legs.stop=function(){this.transition.stopAnimation(),this.transition.visible=!1,this.settings.sound.stop()},n.game.pieces.Legs.playing=function(){return this.transition.animating},n.slides=n.slides||{},n.slides.$slideshow=t(".cd-slideshow"),n.slides.$slides=n.slides.$slideshow.children("li"),n.slides.$navigation=t(".cd-slideshow-nav");var S=0,C=6;n.slides.resizing=!1,n.slides.scrolling=!1;var A="",M=!1;n.slides.$slides.on("swipeleft",function(){"mobile"==A&&n.slides.updateSubSlide(t(this),"next")}),n.slides.$slides.on("swiperight",function(){"mobile"==A&&n.slides.updateSubSlide(t(this),"prev")}),n.slides.$slides.on("click",function(e){var r=t(this);if("desktop"!=A||r.hasClass("visible")){if("desktop"==A&&0==t(e.target).parents(".sub-visible").length&&t(e.target).parents(".sub-slides").length>0){var i=t(e.target).parents(".cd-slider-content").parent("li"),o=i.prev(".sub-visible").length>0?"next":"prev";n.slides.updateSubSlide(r,o)}}else n.slides.updateSlide("nav",r)}),n.slides.$navigation.on("click","a",function(e){var r=t(e.target),i=r.parents(".sub-nav").length>0,o=i?r.parents(".sub-nav").parent("li").index():r.parent("li").index(),s=n.slides.$slides.eq(o);if(n.slides.$slideshow.addClass("remove-transitions"),n.slides.$navigation.removeClass("nav-open").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){n.slides.$slideshow.removeClass("remove-transitions")}),"desktop"==A&&(e.preventDefault(),n.slides.updateSlide("nav",s),f.on("DOMMouseScroll mousewheel",updateOnScroll)),i){var a=r.parent("li").index()+1,u=s.children(".sub-slides").children("li").eq(a);n.slides.updateSubSlide(s,"nav",u)}else s.children(".sub-slides").attr("style","").children("li.sub-visible").removeClass("sub-visible").end().children("li").eq(0).addClass("sub-visible"),n.slides.updateSlideDots(s.children(".slider-dots"),"nav",0)}),f.on("resize",function(){n.slides.resizing||(window.requestAnimationFrame?window.requestAnimationFrame(n.slides.updateOnResize):n.slides.updateOnResize(),n.slides.resizing=!0)}),n.slides.updateSlideDots=function(e,t,r){var n=e.children(".active");if("next"==t)var i=n.next();else if("prev"==t)var i=n.prev();else var i=e.children("li").eq(r);n.removeClass("active"),i.addClass("active")},n.slides.updateSubSlide=function(e,t,r,i){var o=0,s=e.children(".slider-dots"),a=6*Number(e.find(".cd-slider-content").eq(0).css("margin-right").replace("px","")),u=window.innerWidth;if(u="desktop"==A?u-a:u,e.children(".sub-slides").length>0){var l=e.children(".sub-slides"),h=l.children(".sub-visible");if(0==h.length&&(h=l.children("li").eq(0).addClass("sub-visible")),"nav"==t)var c=r;else var c="next"==t?h.next():h.prev();if(c.length>0){var d=c.index();o=parseInt(-d*u),n.slides.setTransformValue(l.get(0),"translateX",o+"px"),n.slides.updateSlideDots(s,t,d),h.removeClass("sub-visible"),c.addClass("sub-visible"),i!==!1&&c.trigger("slides-sub:slid"),c.data("time")&&e.data("_auto")?(clearInterval(e.data("_auto")),e.data("_auto",setInterval(function(){n.slides.updateSubSlide(e,"next")},c.data("time")))):e.data("_auto")&&1e4!=e.data("_interval")&&(clearInterval(e.data("_auto")),e.data("_interval",1e4),e.data("_auto",setInterval(function(){n.slides.updateSubSlide(e,"next")},1e4)))}}},n.slides.updateSlide=function(e,t,r){var i=n.slides.$slides.filter(".visible"),o=i.find(".cd-slider-content").length>0?3*Number(i.find(".cd-slider-content").eq(0).css("margin-bottom").replace("px","")):0,s=n.slides.getTranslateValue(n.slides.$slideshow.get(0),"Y");if("nav"==e)var a=t;else var a="next"==e?i.next():i.prev();if(a.length>0){var u=parseInt(-a.offset().top+s+o);u>0&&(u=0),n.slides.setTransformValue(n.slides.$slideshow.get(0),"translateY",u+"px"),i.removeClass("visible"),a.addClass("visible"),0==a.find(".sub-visible").length&&a.find(".sub-slides").children("li").eq("0").addClass("sub-visible"),r!==!1&&(a.trigger("slides:slid"),a.find(".sub-slides").children("li").eq("0").length&&a.find(".sub-slides").children("li").eq("0").trigger("slides-sub:slid")),i.data("_auto")?(clearInterval(i.data("_auto")),i.data("_interval",null),i.data("_auto",null)):a.data("auto")&&!a.data("_auto")&&(a.data("_interval",1e4),a.data("_auto",setInterval(function(){n.slides.updateSubSlide(a,"next")},1e4)))}},n.slides.updateOnResize=function(){A=n.slides.windowWidth(n.slides.$slideshow.get(0)),n.slides.bindEvents(A,M,!1),"mobile"==A?(M=!0,n.slides.$slideshow.attr("style","").children(".visible").removeClass("visible")):(M=!1,0==n.slides.$slides.filter(".visible").length&&slides.eq(0).addClass("visible"),n.slides.updateSlide("nav",n.slides.$slides.filter(".visible"),!1)),n.slides.initSlideshow(n.slides.$slideshow,!1),n.slides.resizing=!1},n.slides.scrollHijacking=function(e){return e.originalEvent.detail<0||e.originalEvent.wheelDelta>0?(S--,Math.abs(S)>=C&&n.slides.updateSlide("prev")):(S++,S>=C&&n.slides.updateSlide("next")),n.slides.scrolling=!1,!1},n.slides.updateOnScroll=function(e){n.slides.scrolling||(window.requestAnimationFrame?window.requestAnimationFrame(function(){n.slides.scrollHijacking(e)}):scrollHijacking(e),n.slides.scrolling=!0)},n.slides.bindEvents=function(e,t,r){"desktop"==e&&t?p.on("keydown",function(e){if("39"==e.which){var t=n.slides.$slides.filter(".visible");n.slides.updateSubSlide(t,"next",null,r)}else if("37"==e.which){var t=n.slides.$slides.filter(".visible");n.slides.updateSubSlide(t,"prev",null,r)}}):"mobile"==e&&p.off("keydown")},n.slides.createSubSlideDots=function(e,r){if(0==e.find(".slider-dots").length)for(var n=t('<ol class="slider-dots"></ol>').appendTo(e),i=0;r>i;i++){var o=t(0==i?'<li class="active"></li>':"<li></li>");o.appendTo(n)}},n.slides.initSlideshow=function(e,r){var i=window.innerWidth;e.children("li").each(function(){var e=t(this),o=e.children(".sub-slides").children("li").length,s=o*i;if(s=0==s?i:s,e.css("width",s+"px"),o>0){var a=e.find(".sub-visible");0==a.length&&(a=e.find("li").eq(0),a.addClass("sub-visible")),n.slides.updateSubSlide(e,"nav",a,r),n.slides.createSubSlideDots(e,o,r)}})},n.slides.getTranslateValue=function(e,t){var r=window.getComputedStyle(e,null),n=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("-moz-transform")||r.getPropertyValue("-ms-transform")||r.getPropertyValue("-o-transform")||r.getPropertyValue("transform");if(n.indexOf("(")>=0){n=n.split("(")[1],n=n.split(")")[0],n=n.split(",");var i="X"==t?n[4]:n[5]}else var i=0;return Number(i)},n.slides.setTransformValue=function(e,r,n){e.style["-webkit-transform"]=r+"("+n+")",e.style["-moz-transform"]=r+"("+n+")",e.style["-ms-transform"]=r+"("+n+")",e.style["-o-transform"]=r+"("+n+")",e.style.transform=r+"("+n+")",t(e).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){"desktop"==A&&(S=0)})},n.slides.windowWidth=function(e){return window.getComputedStyle(e,"::before").getPropertyValue("content").replace(/["']/g,"")},A=n.slides.windowWidth(n.slides.$slideshow.get(0)),n.slides.bindEvents(A,!0,!0),n.slides.initSlideshow(n.slides.$slideshow),p.ready(function(){}).on("keyup",function(e){if(13==e.keyCode&&y.hasClass("visible")&&w.hasClass("in")&&n.game.start(),n.game.pieces.highlight&&32==e.keyCode&&n.game.pieces.highlight.play(),n.game.pieces.current)if(27==e.keyCode)n.game.pieces.end(n.game.pieces.current);else if(39==e.keyCode&&n.game.pieces.current.settings.element.hasClass("page-comic")&&n.game.pieces.current.settings.element.find("li.sub-visible").length){var t=n.game.pieces.current.settings.element.find("li.sub-visible");t.index()===t.parent().children("li").length-1&&n.game.pieces.end(n.game.pieces.current)}else if(n.game.pieces.current.settings.element&&n.game.pieces.current.settings.element.hasClass("page-comic-holder")){var r=n.game.pieces.current.settings.element.find(".page-comic"),i=r.data("unslider");37==e.keyCode?0==i.current?n.game.pieces.end(n.game.pieces.current):i.prev():39==e.keyCode&&(i.current==i.total-1?n.game.pieces.end(n.game.pieces.current):i.next())}}).on("click",".visible .end-piece",function(e){e.preventDefault(),n.game.pieces.current?n.game.pieces.end(n.game.pieces.current):n.game.started?n.slides.updateSlide("nav",y):n.game.restart()}).on("click",".in #body-language-game--menu--start",function(e){e.preventDefault(),n.game.start()}).on("click",".visible .return-to-game",function(e){e.preventDefault(),n.game.restart()}).on("click",".in #body-language-game--menu--credits",function(e){e.preventDefault(),n.game.credits()}),f.on("message",function(e){var r=e.originalEvent;if(!/^https?:\/\/player.vimeo.com/.test(r.origin))return!1;"*"===l&&(l=r.origin);var n=JSON.parse(r.data),i=n.player_id?t("#"+n.player_id):null;switch(n.event){case"ready":h("addEventListener","pause",l,i),h("addEventListener","finish",l,i),h("addEventListener","playProgress",l,i),i&&i.trigger("video:ready");break;case"playProgress":i&&i.trigger("video:playing");break;case"pause":i&&i.trigger("video:paused");break;case"finish":i&&i.trigger("video:finished")}})}(window.PIXI,window.jQuery,window.Howl);